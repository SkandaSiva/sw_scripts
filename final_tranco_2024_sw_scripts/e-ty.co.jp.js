/* ! speed-kit 2.16.2 | Copyright (c) 2024 Baqend GmbH */
"use strict";function e(e,t,s={}){const i=new Headers,r=["accept-language","content-language"],n=["application/x-www-form-urlencoded","multipart/form-data","text/plain"];"navigate"!==e.mode&&r.push("accept");for(const[t,s]of e.headers)r.includes(t.toLocaleLowerCase())&&i.append(t,s),"content-type"===t.toLocaleLowerCase()&&n.some(e=>s.includes(e))&&i.append(t,s);const a={headers:i};return a.credentials=e.credentials,a.referrer=e.referrer,"navigate"!==e.mode&&(a.mode=e.mode),new Request(t,Object.assign(a,s))}function t(e){const t=e.split(/[?&#]/)[0],s=t.lastIndexOf(".");return-1===s||t.lastIndexOf("/")>s?"":t.substr(s).toLowerCase()}var s;function i(e){switch(e){case".js":case".mjs":case".wasm":case".wast":return s.Script;case".html":case".htm":return s.Document;case".css":return s.Style;case".woff2":case".woff":case".ttf":case".otf":case".eot":return s.Font;case".mp3":case".wav":return s.Audio;case".vtt":return s.Track;case".pdf":return s.PDF;case".png":case".jpeg":case".jpg":case".gif":case".svg":case".ico":case".webp":case".avif":return s.Image;case".mp4":case".ogg":case".ogv":case".webm":return s.Video;default:return s.Undefined}}function r(e){if("navigate"===e.mode)return s.Navigate;const r=function(e){for(const t of Object.values(s))if(t===e)return t;return s.Undefined}(e.destination||"");if(r!==s.Undefined)return e.url,r;if(function(e){return e.headers.has("X-Requested-With")&&"XMLHttpRequest"===e.headers.get("X-Requested-With")?s.Fetch:s.Undefined}(e)!==s.Undefined)return s.Fetch,e.url,s.Fetch;const n=function(e){const t=[];return e&&"*/*"!==e?((e.includes("text/html")||e.includes("application/xhtml+xml"))&&t.push(s.Document),e.includes("text/css")&&t.push(s.Style),(e.includes("text/javascript")||e.includes("application/javascript")||e.includes("application/wasm"))&&t.push(s.Script),e.includes("image/")&&t.push(s.Image),e.includes("font/")&&t.push(s.Font),e.includes("video/")&&t.push(s.Video),e.includes("audio/")&&t.push(s.Audio),e.includes("text/vtt")&&t.push(s.Track),1===t.length?t[0]:s.Undefined):s.Undefined}(e.headers.get("accept")||"");if(n!==s.Undefined)return e.url,n;const{pathname:a}=new URL(e.url),o=i(t(a));return o!==s.Undefined?(e.url,o):a.endsWith("/")?s.Document:s.Undefined}function n(e){const{userAgent:t}=navigator;return t.indexOf(e+"/")>-1}function a(){return n("Firefox")}!function(e){e.Document="document",e.Navigate="navigate",e.Fetch="fetch",e.Audio="audio",e.Video="video",e.Track="track",e.PDF="pdf",e.Image="image",e.Style="style",e.Script="script",e.Font="font",e.Undefined="undefined"}(s||(s={}));const o=[s.Navigate,s.Document,s.Script,s.Style,s.Undefined];function c(e,i){const r=e.contentType,n=new URL(e.originalRequest.url),c=i.relativeModuleImports;return!i.shouldResetResponseUrl(e)&&((r!==s.Image||!a())&&(!c&&r===s.Script||!function(e,s){const{pathname:i}=e,r=".svg"===t(i);return o.includes(s)||r}(n,r)))}function h(e,t){var s={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(s[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(s[i[r]]=e[i[r]])}return s}function u(e,t,s,i){var r,n=arguments.length,a=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,s,i);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(n<3?r(a):n>3?r(t,s,a):r(t,s))||a);return n>3&&a&&Object.defineProperty(t,s,a),a}Object.create;Object.create;class l{constructor(e){this.Bu=[],this.Bv=e}putItem(e,t){this.popItem(e),this.Bu.length>=this.Bv&&this.Bu.shift(),this.Bu.push({navigationKey:e,item:t})}getItem(e){for(const t of this.Bu)if(t.navigationKey===e)return t.item;return null}popItem(e){for(const t of this.Bu)if(t.navigationKey===e)return this.Bu.splice(this.Bu.indexOf(t),1),t.item;return null}size(){return this.Bu.length}iterate(e){for(const t of this.Bu)e(t.navigationKey,t.item)}}const d=new l(10);class p{constructor(e,t){this.clientId=e,this.url=t}static fromClientID(e){const t=d.getItem(e);if(!t){const t=clients.get(e),s=new p(e,t.then(e=>e.url).catch(()=>""));return d.putItem(e,s),s}return t}static fromNavigateURL(e,t){const s=new p(t||"",e);return t&&d.putItem(t,s),s}}function g(e){return[].concat(e)}const m=[240,375,576,768,992,1200,1920,2560,3840];function f(e){const t=m.find(t=>e<=t);return void 0===t?-1:t}function w(e){if(e.clientHintWidth)return new Map([["width",""+f(e.clientHintWidth)]]);if(!e.downscale)return new Map;if(e.maxHeight)return new Map([["height",""+e.maxHeight]]);const t=function(e){const{screenWidth:t,screenDPR:s}=e;return f(t*(s*(e.screenSizeFactor||1)))}(e),s=e.maxWidth?e.maxWidth:t;return isFinite(s)&&s>0?new Map([["width",""+s]]):new Map}function v(e){const t=w(e);return e.avif&&t.set("auto","avif"),e.webp&&t.set("auto",""+(e.avif?"avif,webp":"webp")),null!==e.quality&&100!==e.quality&&t.set("quality",""+e.quality),null===e.quality&&e.optimize&&t.set("optimize",""+e.optimize),e.pjpeg&&e.pathname.match(/\.jpe?g$/i)&&t.set("format","pjpeg"),e.format&&t.set("format",e.format),function(e,t){const s=t.crop;if(s)if("string"==typeof s)e.set("crop",s+",smart");else if(s instanceof Array)if(s.length>=4){const[t,i,r,n]=s;e.set("crop",`${r},${n},x${t},y${i}`)}else if(s.length>=2){const[t,i]=s;e.set("crop",`${t},${i},smart`)}}(t,e),function(e,t){if(!1!==t.overrideWidth)for(const s of g(t.overrideWidth)){const i=t.searchParams.get(s);if(i&&!Number.isNaN(+i)){e.delete("height"),e.set("width",String(+i));break}}}(t,e),function(e,t){if(!1!==t.overrideHeight)for(const s of g(t.overrideHeight)){const i=t.searchParams.get(s);if(i&&!Number.isNaN(+i)){e.delete("width"),e.set("height",String(+i));break}}}(t,e),[...t].map(e=>e.join("="))}var y;!function(e){e.IF_CACHED="if-cached"}(y||(y={}));const R="baqend-speedkit";function S(e,t){const s=new URL("https://www.baqend.com/");return s.searchParams.append(e,t),s.search.replace(/\?/,"")}function b(e,t){const s=e.search.split(/[?&]/).filter(e=>e&&!e.includes("="));for(const e of s)t.search=t.search.replace(new RegExp(e+"=(&|$)"),e+"$1")}function C(e){const t=e.match(/^http(s?):\/\//)?e:"https://"+e;return new URL(t,location.origin)}function A(e,t=!1){const s=new URL(e);return s.hash&&(s.hash=""),t||function(e){const t=Array.from(e.entries()).sort((e,t)=>e[0]===t[0]?e[1]<t[1]?-1:1:e[0]<t[0]?-1:1);t.forEach(t=>e.delete(t[0])),t.forEach(t=>e.append(t[0],t[1]))}(s.searchParams),s.toString()}function k(e,t){return function(e,t){if(!t.search.length)return;const s=new Map,i=e.search.substring(1).split("&").filter(e=>""!==e);let r=0;e.searchParams.forEach((e,t)=>{const n=i[r];n&&s.set(S(t,e),n),r+=1});const n=Array.from(t.searchParams).map(e=>{const[t,i]=e,r=s.get(S(t,i));return r?""+r:`${t}=${i}`});t.search="?"+n.join("&")}(e,t),b(e,t),t.search=t.search.replace(/[<>{}|\[\]]/g,e=>encodeURIComponent(e)),t}function I(e){return function(e){const[,t]=/^(?:(?:\w+?:)?\/\/)?(.*)$/.exec(e);return t}(function(e){try{const t=new URL(e);return t.hash&&(t.hash=""),t.toString()}catch(t){const s=e.match(/([^#]+)#/);return s&&s[1]?s[1]:e}}(e))}function q(e,t){const s=3&t.length,i=t.length-s,r=3432918353,n=461845907;let a,o,c,h;for(a=e,h=0;h<i;)c=255&t.charCodeAt(h)|(255&t.charCodeAt(h+=1))<<8|(255&t.charCodeAt(h+=1))<<16|(255&t.charCodeAt(h+=1))<<24,h+=1,c=(65535&c)*r+(((c>>>16)*r&65535)<<16)&4294967295,c=c<<15|c>>>17,c=(65535&c)*n+(((c>>>16)*n&65535)<<16)&4294967295,a^=c,a=a<<13|a>>>19,o=5*(65535&a)+((5*(a>>>16)&65535)<<16)&4294967295,a=27492+(65535&o)+((58964+(o>>>16)&65535)<<16);switch(c=0,s){case 3:c^=(255&t.charCodeAt(h+2))<<16;case 2:c^=(255&t.charCodeAt(h+1))<<8;case 1:c^=255&t.charCodeAt(h),c=(65535&c)*r+(((c>>>16)*r&65535)<<16)&4294967295,c=c<<15|c>>>17,c=(65535&c)*n+(((c>>>16)*n&65535)<<16)&4294967295,a^=c}return a^=t.length,a^=a>>>16,a=2246822507*(65535&a)+((2246822507*(a>>>16)&65535)<<16)&4294967295,a^=a>>>13,a=3266489909*(65535&a)+((3266489909*(a>>>16)&65535)<<16)&4294967295,a^=a>>>16,a>>>0}function O(e){const t=Array.from(e).map(e=>String.fromCharCode(e)).join("");return btoa(t).replace(/(?:A(?:AAA|AA=|A==))+$/,"")}class F{constructor(e,t,s){this.Ez=e,this.E0=t,this.E1=s}static fromJSON(e){return new F((t=e.b,Uint8Array.from([...atob(t)].map(e=>e.charCodeAt(0)))),e.m,e.h);var t}contains(e){return this.Ex(e).every(e=>this.Ey(e))}toJSON(){return{b:O(this.Ez),m:this.E0,h:this.E1}}Ex(e){const t=[],s=q(0,e),i=q(s,e);for(let e=0;e<this.E1;e+=1)t[e]=(s+e*i)%this.E0;return t}Ey(e){const t=this.Ez[e>>3];if(t){return 0!=(t&1<<(7&e))}return!1}}var H,N,E,D,P,B,T;function G(e){const t=e.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)\.?(\d+)?/i)||[];let s=null;if(/trident/i.test(t[1]))return s=/\brv[ :]+(\d+)\.?(\d+)?/g.exec(e)||[],["IE",parseInt(s[1],10)||0,parseInt(s[2],10)||0];const i=function(e){if(/(iPhone|iPod|iPad).*AppleWebKit(?!.*?Version)/.test(e)){const t=e.match(/(OS |os |OS)(\d+)_?(\d+)?/i)||[];return[/\b(crios)\/(\d+)/i.test(e)?"Safari":"SafariWebView",parseInt(t[2],10)||0,parseInt(t[3],10)||0]}return null}(e)||function(e,t){if("Chrome"===t[1]){let t=null;if(t=e.match(/\bEdg\/(\d+)\.?(\d+)?/)||e.match(/\bEdge\/(\d+)\.?(\d+)?/),null!=t)return["Edge",parseInt(t[1],10),parseInt(t[2],10)||0];if(t=e.match(/\bOPR\/(\d+)\.?(\d+)?/),null!=t)return["Opera",parseInt(t[1],10),parseInt(t[2],10)||0]}return null}(e,t);if(null!==i)return i;const r=t[2]?[t[1],parseInt(t[2],10),parseInt(t[3],10)||0]:[navigator.appName,parseInt(navigator.appVersion,10),0];return-1===e.indexOf("Android")&&null!=(s=e.match(/version\/(\d+)\.?(\d+)?/i))&&(r.splice(1,1,parseInt(s[1],10)),r.splice(2,1,parseInt(s[2],10)||0)),r}function x(e){return new Promise(t=>setTimeout(t,e))}function U(e){const[t]=G(navigator.userAgent);return"Safari"===t?async function e(t){const s=Date.now();if(t<10)return;if(t<500)return x(t);await x(500);const i=Date.now()-s;return e(t-i)}(e):x(e)}function M(e){const t=e.headers.get("date")||"";return Date.parse(t)}!function(e){e[e.OK=200]="OK",e[e.NoContent=204]="NoContent",e[e.BaqendRedirect=231]="BaqendRedirect",e[e.MovedPermanently=301]="MovedPermanently",e[e.MovedTemporarily=302]="MovedTemporarily",e[e.NotModified=304]="NotModified",e[e.PermanentRedirect=308]="PermanentRedirect",e[e.CORSRedirect=357]="CORSRedirect",e[e.BadRequest=400]="BadRequest",e[e.Forbidden=403]="Forbidden",e[e.InternalServerError=500]="InternalServerError",e[e.BadGateway=502]="BadGateway",e[e.FetchTypeError=542]="FetchTypeError",e[e.TimeoutError=543]="TimeoutError"}(H||(H={}));class L{constructor(e){this.public=e.has("public"),this.private=e.has("private"),this.noCache=e.has("no-cache"),this.onlyIfCached=e.has("only-if-cached"),this.swMaxAge=e.get("sw-max-age"),this.maxAge=e.get("max-age"),this.maxStale=e.get("max-stale"),this.minFresh=e.get("min-fresh"),this.staleWhileRevalidate=e.get("stale-while-revalidate"),this.staleIfError=e.get("stale-if-error"),this.mustRevalidate=e.has("must-revalidate"),this.proxyRevalidate=e.has("proxy-revalidate"),this.immutable=e.has("immutable"),this.noStore=e.has("no-store"),this.noTransform=e.has("no-transform"),this.expires=e.get("expires")}static fromString(e){const t=e.split(/,\s*/).map(e=>e.split("=",2)).map(([e,t])=>[e,t?parseInt(t,10):-1]),s=new Map(t);return new L(s)}}function W(e,t){return L.fromString(e.headers.get(t)||"")}function J(e,t,s){const i=W(e,"cache-control"),r=W(e,"baqend-sw-control"),n=function(...e){for(const t of e)if(null!=t)return t;return null}(i.swMaxAge,i.maxAge),a=!!r.expires;if(e.headers.has("date")&&null!=n){const o=function(e,t,s=0){const i=e.headers.get(t);return null==i?s:parseInt(i,10)}(e,"age"),c=M(e)+t;new Date(c-t);let h;return h=a?r.expires+t:i.swMaxAge||s?c+1e3*(n-o):c+1e3*n,Date.now(),Date.now()>h}return null}!function(e){e.SWException="SWException",e.BloomfilterException="BloomfilterException",e.DashboardDisabled="DashboardDisabled",e.ServerError="ServerError",e.PostMessage="PostMessage",e.CORSRedirect="CORSRedirect",e.Offline="Offline",e.OriginServerError="OriginServerError",e.None="None",e.AssetTimeout="AssetTimeout"}(N||(N={}));function j(e){const t={};return e?(e.split(",").forEach(e=>{const s=e.includes(";")?e.trim().split(";")[0]:e,i=e.match(/desc=([^;]*)/),r=e.match(/dur=([^;]*)/);Object.assign(t,{[s]:{desc:i?i[1]:"",dur:r?r[1]:""}})}),t):t}!function(e){e.Blacklist="Blacklist",e.Blocked="Blocked",e.ClientError="ClientError",e.Redirect="Redirect",e.CORSRedirect="CORSRedirect",e.CriticalResource="CriticalResource",e.Delayed="Delayed",e.Disabled="Disabled",e.Disconnected="Disconnected",e.DynamicBlock="DynamicBlock",e.DynamicBlockPreload="DynamicBlockPreload",e.DynamicBlockCached="DynamicBlockCached",e.Error="Error",e.Fallback="Fallback",e.Fetchlist="Fetchlist",e.FirstLoad="FirstLoad",e.GroupChange="GroupChange",e.HardReload="HardReload",e.IgnoredAfterPOSTNavigate="IgnoredAfterPOSTNavigate",e.InternalServerError="InternalServerError",e.LoopDetected="LoopDetected",e.NavigationPreload="NavigationPreload",e.NonSKGroup="NonSKGroup",e.SkUnsupported="SkUnsupported",e.NoSwInstalled="NoSwInstalled",e.NoSwResponse="NoSwResponse",e.Offline="Offline",e.Onboarding="Onboarding",e.SafeScript="SafeScript",e.SwFailed="SwFailed",e.TrackingRequest="TrackingRequest",e.Unknown="Unknown",e.Immutable="Immutable",e.NotEnabled="NotEnabled",e.NotWhitelisted="NotWhitelisted",e.UserAgentChanged="UserAgentChanged",e.TooLargeRequest="TooLargeRequest",e.FormatNotSupported="FormatNotSupported",e.OtherSwInstalled="OtherSwInstalled",e.SwBooting="SwBooting",e.NoNavigate="NoNavigate",e.NoMatchingNavigate="NoMatchingNavigate",e.Timeout="Timeout",e.DisabledSites="DisabledSites",e.PartialResponse="PartialResponse",e.PreloadBlacklist="PreloadBlacklist"}(E||(E={})),function(e){e.CacheMiss="CacheMiss",e.ExpiredResponse="ExpiredResponse",e.InstantRefresh="InstantRefresh",e.Deployment="Deployment",e.InvalidCacheSketch="InvalidCacheSketch",e.ReloadCacheMode="ReloadCacheMode",e.UrlInCacheSketch="UrlInCacheSketch"}(D||(D={})),function(e){e.CacheHit="CacheHit",e.RevalidationWhitelist="RevalidationWhitelist"}(P||(P={})),function(e){e.AssetAPI="AssetAPI",e.Origin="Origin"}(B||(B={})),function(e){e.AssetAPI="AssetAPI",e.Shield="Shield",e.Storage="Storage",e.Edge="Edge",e.Collapsed="Collapsed",e.PendingAsset="PendingAsset",e.Stream="Stream",e.MissingCachingHeader="MissingCachingHeader",e.Generated="Generated",e.Origin="Origin",e.SwCache="SwCache",e.SDN="SDN",e.BfCache="BfCache"}(T||(T={}));class K{constructor(e){this.Hx=null,this.pop=null,this.Hy=!1,this.Hz=null,this.H1=null;e.get("etag");const t=e.get("x-cache-lookup"),s=j(e.get("server-timing"));this.H0=T.MissingCachingHeader,this.Hw="MISS",this.setPoP(s.pop),this.setDuration(s.pop),this.Hu(e),this.Hv(s.hotness),this.interpretCacheMetric(s.cache,t),this.Hw,this.pop,this.Hx}getDuration(){return this.Hx}setDuration(e){e&&e.dur?this.Hx=parseInt(e.dur,10):this.Hx=null}interpretCacheMetric(e,t){const s=!!t;if(s&&!/Upstream/i.test(t))return this.Hw="HIT",void(this.H0=T.Edge);if(!e||!e.desc)return;const i=e.desc;if("HIT"===i)return this.Hw=s?"SHIELD":"HIT",void(this.H0=s?T.Shield:T.Edge);if("SHIELD"===i)return this.Hw="SHIELD",void(this.H0=T.Shield);if("STORAGE"!==i){var r;if("MISS"!==i)return"STREAM_DEPLOYMENT"===i?(this.Hz=D.Deployment,void(this.H0=T.Stream)):"STREAM_INVALID"===i?(this.Hz=D.InstantRefresh,void(this.H0=T.Stream)):void(this.H0=T[(r=i,r.split(/[ _-]/).filter(e=>!!e.length).map(e=>`${e.charAt(0).toUpperCase()}${e.slice(1).toLowerCase()}`).join(""))]||T.AssetAPI);this.H0=T.Stream}else this.H0=T.Storage}getResponseSource(){return this.H0}getCache(){return this.Hw}setPoP(e){e&&e.desc&&(this.pop=e.desc)}getPoP(){return this.pop||null}isBackendCacheHit(){return this.Hy}Hu(e){this.Hy=e.has("etag")}Hv(e){e&&e.desc?this.H1=parseInt(e.desc,10):this.H1=null}getHotness(){return this.H1}getResponseCause(){return this.Hz}}function $(e){return"opaqueredirect"===e.type||function(e){return e.status>=H.MovedPermanently&&e.status<=H.PermanentRedirect&&e.status!==H.NotModified}(e)}class z{constructor(e,t,s,i,r){this.request=s,this.response=i,this.cause=t,this.source=e,this.fastlyHeaders=r,i&&e.toString()===T.PendingAsset&&i.then(e=>{this.fastlyHeaders=new K(e.headers),this.source=this.fastlyHeaders.getResponseSource();const t=this.fastlyHeaders.getResponseCause();t&&(this.cause=t)})}setDisconnectCause(e){this.disconnectCause=e}setNavigateMetadata(e){this.navigateMetadata=e}setCustomFetchTimers(e,t){this.navigateMetadata&&this.navigateMetadata.timings&&(this.navigateMetadata.timings.customFetchStart=e,this.navigateMetadata.timings.customFetchEnd=t)}waitUntil(...e){this.request.waitUntil(...e)}clone(e,t,s){return new z(t||this.source,s||this.cause,e,this.response&&this.response.then(e=>e.clone()))}async getResponseStatus(){if(!this.response)return null;return(await this.response).status}async wasRedirectedFromOrigin(){if(this.source!==T.Origin||!this.response)return!1;const e=await this.response;return e.redirected||e.url!==this.request.originalRequest.url}async isRedirect(){return!!this.response&&$(await this.response)}async isSuccessful(){return!!this.response&&!await this.isClientError()&&!await this.isServerError()}async isClientError(){if(!this.response)return this.cause===E.ClientError;try{if("opaqueredirect"===(await this.response).type)return!1;const e=await this.getResponseStatus();return!e||e>=H.BadRequest&&e<H.InternalServerError}catch(e){return this.disconnectCause=N.SWException,!1}}async isServerError(){if(!this.response)return this.cause===E.InternalServerError;try{const e=await this.getResponseStatus();return"opaqueredirect"!==(await this.response).type&&(!e||e>=H.InternalServerError||0===e)}catch(e){return this.disconnectCause=N.SWException,!0}}}function V(e,t,s,i){t&&e.markAsFetched();const r=i?Promise.resolve(i):void 0;return new z(T.Origin,s,e,r)}function _(e,t,s,i){t&&e.markAsFetched();const r=i?Promise.resolve(i):void 0;return new z(T.SwCache,s,e,r)}function Y(e,t,s,i){t&&e.markAsFetched();const r=i?Promise.resolve(i):void 0;return new z(T.PendingAsset,s,e,r)}function Q(e,t,s={},i,r=T.Generated,n){return e.markAsFetched(),new z(r,i,e,Promise.resolve(new Response(t,s)),n)}function Z(e){return e===T.Edge||e===T.AssetAPI||e===T.Stream||e===T.Collapsed||e===T.Shield||e===T.Storage||e===T.PendingAsset||e===T.MissingCachingHeader}class X{constructor(e,t){this.urls=e,this.contentTypes=t,this.urlRegExp=function(e){const t=[];if(e&&t.push(...[...e].map(e=>{return`^${(t=e,t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")).replace(/\\\*/g,".*")}$`;var t})),t.length)return new RegExp(t.join("|"))}(e)}static fromJSON(e){const t=e=>{if(e&&e.length)return new Set(e)};return new X(t(e.urls),t(e.contentTypes))}match(e,t){let s=this.doesContentTypeMatch(t);return this.urlRegExp&&(s=s&&!!e.match(this.urlRegExp)),s}toJSON(){const e=e=>{if(e)return[...e]};return{urls:e(this.urls),contentTypes:e(this.contentTypes)}}doesContentTypeMatch(e){const t=e===s.Undefined,i=e===s.Navigate;return!(this.contentTypes&&!t)||(i?this.contentTypes.has(s.Document)||this.contentTypes.has(s.Navigate):this.contentTypes.has(e))}}function ee(e){return function(t){return class extends t{async handle(t,s,i){if(!this.IJ(s))return!1;const{type:r}=s,n=h(s,["type"]);return e===r&&super.handle(t,n,i)}IJ(e){return!!e&&"object"==typeof e&&"string"==typeof e.type}}}}function te(e){return function(t){return class extends t{cachePath(){return e}}}}function*se(e,t){for(const s of e)yield*t(s)}class ie{constructor(e){if(this[Symbol.toStringTag]="MultiMap",this.IF=new Map,e)for(const[t,s]of e)this.IF.has(t)?this.IF.get(t).add(s):this.IF.set(t,new Set([s]))}get size(){return e=this.values(),[...e].length;var e}[Symbol.iterator](){return this.entries()}entries(){return se(this.IF.entries(),([e,t])=>function*(e,t){for(const s of e)yield t(s)}(t,t=>[e,t]))}keys(){return this.IF.keys()}values(){return se(this.IF.values(),e=>e.keys())}clear(){this.IF.clear()}delete(e){return this.IF.delete(e)}forEach(e,t){for(const[s,i]of this.entries())e.call(t,i,s,this)}map(e,t){return new ie([...this.entries()].map(([s,i])=>e.call(t,i,s,this)))}filter(e,t){return new ie([...this.entries()].filter(([s,i])=>e.call(t,i,s,this)))}filterKey(e,t){return new ie([...this.entries()].filter(([s])=>e.call(t,s,this)))}getAll(e){const t=this.IF.get(e);if(!t){const t=new Set;return this.IF.set(e,t),t}return t}get(e){return function(e){const[t]=e;return t}(this.getAll(e))}has(e){return this.IF.has(e)}add(e,t){return this.getAll(e).add(t),this}set(e,t){const s=this.getAll(e);return s.clear(),s.add(t),this}setAll(e,t){const s=this.getAll(e);s.clear();for(const e of t)s.add(e);return this}}class re{constructor(){this.HU=[]}observe(e){this.HU.push(e)}notify(){for(const e of this.HU)e()}}const ne=[s.Image,s.Style,s.Font,s.Script];let ae=class extends re{constructor(e){super(),this.revalidationWhitelist=new Set,this.refreshJobs=new ie,this.HM=0,this.HN="default",this.HO=null,this.HL=e}addToRevalidationWhitelist(e,t){ne.includes(t)||this.revalidationWhitelist.add(e)}clearRevalidationWhitelist(){this.revalidationWhitelist.clear()}updateLastReload(){this.lastReload=Date.now()}isExpired(){return null==this.maxAge||this.maxAge<Date.now()}isInvalid(){if(null==this.maxAge)return!0;const e=this.HL.staleWhileRevalidate,t=this.maxAge+e<=Date.now();return this.maxAge,Date.now(),t}isOnWhitelist(e,t,s){if(this.revalidationWhitelist.has(e))return!0;if(ne.includes(t)){const e=M(s)+this.getDrift(),t=Date.now()-e<this.HL.staleWhileRevalidate,i=!this.lastReload||e>this.lastReload;if(t&&i)return!0}return!1}isInBloomFilter(e){return!this.bloomFilter||this.bloomFilter.contains(e)}isResponseStale(e,t,s){const i=M(s),r=this.refreshJobs.filterKey(e=>e.getTime()>=i);for(const s of r.values())if(s.match(e,t))return JSON.stringify(s.toJSON()),!0;return!1}getDrift(){return this.HM}getClientRevision(){return this.HN}getServerRevision(){return this.HO}update(e){void 0!==e.body&&this.HK(e.body),void 0!==e.maxAge&&(this.maxAge=e.maxAge),void 0!==e.drift&&(this.HM=e.drift),void 0!==e.clientRevision&&(this.HN=e.clientRevision),void 0!==e.serverRevision&&(this.HO=e.serverRevision),this.notify()}purge(){this.bloomFilter=void 0,this.maxAge=void 0,this.revalidationWhitelist.clear(),this.notify()}toJSON(){return{maxAge:this.maxAge,body:this.HI(),drift:this.HM,clientRevision:this.HN,serverRevision:this.HO}}fromJSON(e){this.HM=e.drift,this.HK(e.body),e.maxAge&&(this.maxAge=e.maxAge),void 0!==e.clientRevision&&(this.HN=e.clientRevision),void 0!==e.serverRevision&&(this.HO=e.serverRevision)}HI(){if(!this.bloomFilter)return;const e=this.HJ();return Object.assign(Object.assign({},this.bloomFilter.toJSON()),{r:e})}HJ(){if(this.refreshJobs.size)return[...this.refreshJobs.map((e,t)=>[t.getTime(),e.toJSON()])]}HK(e){if(this.refreshJobs.clear(),e&&(this.bloomFilter=F.fromJSON(e),e.r))for(const[t,s]of e.r)this.refreshJobs.add(new Date(t),X.fromJSON(s))}};ae=u([te("/com.baqend.speedkit.clock")],ae);class oe{constructor(e=""){this.HP=new Map,e&&this.fromString(e)}clear(){this.HP.clear()}fromString(e){this.clear();const t=e.trim();if(!t)return;const s=t.split(/\s*;\s+/);for(const e of s){const[t,s]=e.split(/\s*=\s*/,2);this.HP.set(t,s)}}toString(){return[...this.HP].map(([e,t])=>`${e}=${t}`).join("; ")}getItem(e){return this.HP.get(e)}keys(){return this.HP.keys()}entries(){return this.HP.entries()}getMap(){return this.HP}}let ce=class extends re{constructor(){super(),this.HQ=new Map}getCookies(e){return this.HQ.get(e)||new oe}updateCookies(e,t){this.HQ.set(e,new oe(t)),this.notify()}toJSON(){return{origins:[...this.HQ].map(([e,t])=>[e,t.toString()])}}fromJSON(e){if("string"==typeof e)return this.fromJSON({origins:[[location.origin,e]]}),void this.notify();const{origins:t}=e;this.HQ.clear();for(const[e,s]of t)this.HQ.set(e,new oe(s));this.HQ}};function he(e){if("string"!=typeof e)return null;const t=/^regexp:\/(.*)\/([\w]*)$/.exec(e);if(t){const[,e,s]=t;return new RegExp(e,s)}return null}function ue(e){return JSON.parse(e,(e,t)=>"string"==typeof t&&he(t)||t)}function le(e,t){if(!t||"/"===t)return e;return`${""+(t.lastIndexOf("/")===t.length-1?t.substr(0,t.length-1):t)}${`${0===e.indexOf("/")?"":"/"}${e}`}`}ce=u([te("/com.baqend.speedkit.cookie")],ce);let de=class extends re{constructor(e){super(),this.count=1,this.disabledCount=0,this.disconnectedCount=0,this.HX=e,this.HY=[]}getAndResetCount(){const e=this.count;return e>0?(this.count=0,this.notify(),e):0}getAndResetDisabledCount(){const e=this.disabledCount;return 0!==this.disabledCount&&(this.disabledCount=0,this.notify()),e}getAndResetDisconnectedCount(){const e=this.disconnectedCount;return 0!==this.disconnectedCount&&(this.disconnectedCount=0,this.notify()),e}decrementCount(){this.count-=1,this.notify()}incrementCount(e,t){this.HY.includes(t)||(this.count+=1,this.HY.length>10&&this.HY.shift(),t&&this.HY.push(t),this.notify(),this.HX.shouldCountIFrameNavigation()||this.HV(e).then(e=>e&&this.decrementCount()))}incrementDisabledCount(e,t){this.HY.includes(t)||(this.disabledCount+=1,this.HY.length>10&&this.HY.shift(),t&&this.HY.push(t),this.notify(),this.HX.shouldCountIFrameNavigation()||this.HV(e).then(e=>e&&this.decrementDisabledCount()))}decrementDisabledCount(){this.disabledCount-=1,this.notify()}incrementDisconnectedCount(e,t){this.HY.includes(t)||(this.disconnectedCount+=1,this.HY.length>10&&this.HY.shift(),t&&this.HY.push(t),this.notify(),this.HX.shouldCountIFrameNavigation()||this.HV(e).then(e=>e&&this.decrementDisconnectedCount()))}decrementDisconnectedCount(){this.disconnectedCount-=1,this.notify()}appendParamsToBloomFilterUrl(e){if(0===this.disconnectedCount&&0===this.disabledCount)return;const t=this.HW();e.searchParams.append("bqpi","0"),e.search+=";"+t.join(";")}appendParamsToAssetUrl(e){const t=this.getAndResetCount(),s=this.HW();t<1&&!s.length||(e.searchParams.append("bqpi",""+t),s.length&&(e.search+=";"+s.join(";")))}fromJSON(e){this.count=void 0!==e.count?e.count:1,this.disabledCount=e.disabledCount||0,this.disconnectedCount=e.disconnectedCount||0}toJSON(){return{count:this.count,disabledCount:this.disabledCount,disconnectedCount:this.disconnectedCount}}async HV(e){const t=e.resultingClientId||e.navigation.clientId;if(!t)return!1;const s=await clients.get(t);return!(a()&&!s)&&(!s||"nested"===s.frameType)}HW(){const e=[],t=this.getAndResetDisconnectedCount();t>0&&e.push("dc="+t);const s=this.getAndResetDisabledCount();return s>0&&e.push("de="+s),e}};de=u([te("/com.baqend.speedkit.pi")],de);let pe=class extends re{constructor(){super(...arguments),this.dpr=1,this.width=1/0,this.supportsTouch=!1}fromJSON(e){this.dpr=e.dpr||1,this.width=e.width||1/0,this.supportsTouch=e.supportsTouch||!1}toJSON(){return{dpr:this.dpr,width:this.width,supportsTouch:this.supportsTouch}}};function ge(e,...t){const s=e.toLowerCase();return t.some(e=>"string"==typeof e?s.includes(e):e.test(s))}pe=u([te("/com.baqend.speedkit.screen")],pe);const me=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(?:browser|link)|vodafone|wap|windows ce|xda|xiino/,fe=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br[ev]w|bumb|bw\-[nu]|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c[- ]|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/;function we(e,t=!1){return!!(t&&e.indexOf("Macintosh")>-1)||ge(e,"tablet","ipad","nexus 7","nexus 10","silk/",/\bgt-[pn]\d{4}\b/,/\bsm-t\d{3}\b/,/^.*android(?!.*mobile|.*smart-tv|.*smarttv|.*aft[tm]|.*crkey).*$/)}function ve(e){return ge(e,"appletv","apple tv","googletv","crkey","armv7l","aftt","aftm","roku","bravia","philipstv","tsbnettv","smarttv","smart-tv",/\btv\b/)}class ye{}ye.propName="";class Re extends ye{constructor(e=[]){super(),this.H6=e}matches(e,t,s,i=1){return!!this.H6.length&&this.H6.every(r=>r.matches(e,t,s,i))}toJSON(){const e={};for(const t of this.H6){e[t.constructor.propName]=t.toJSON()}return e}fromJSON(e){if("string"==typeof e)return this.fromJSON(ue(e));for(const[t,s]of Object.entries(e)){if(!Be[t])throw new Error("Illegal rule: "+t);{const e=new Be[t];e.fromJSON(s),this.addCondition(e)}}return this}addCondition(e){return this.H6.push(e)}removeCondition(e){const t=this.H6.indexOf(e);return!(t<0)&&(this.H6.splice(t,1),!0)}}function Se(e,t,s=1){return t instanceof Array?t.some(t=>Se(e,t,s)):t instanceof RegExp?t.test(e):2===s?e.toLowerCase()===t.toLowerCase():String.prototype.startsWith?e.toLowerCase().startsWith(t.toLowerCase()):e.toLowerCase().substring(0,t.length)===t.toLowerCase()}class be extends ye{constructor(e=[]){super(),this.H7=e}matches(e,t,i){if(!this.H7.length)return!1;const n=t||r(e);if(n===s.Navigate){const e=this.H7.includes(n)||this.H7.includes(s.Document);return e}const a=this.H7.includes(n);return a}toJSON(){return this.H7}fromJSON(e){if("string"==typeof e)return this.fromJSON(ue(e));if(e instanceof Array)return this.H7=e,this;throw new Error("Invalid ContentTypeCondition JSON")}}be.propName="contentType";class Ce extends ye{constructor(e){super(),this.IH=e}test(e){return null!=this.IH&&Se(e,this.IH)}toJSON(){return this.IH?function e(t){return t instanceof Array?t.map(t=>e(t)):t instanceof RegExp?`regexp:/${(s=t).source}/${s.flags||""}`:t;var s}(this.IH):null}fromJSON(e){if(null==e||"null"===e)return this.IH=null,this;try{return this.fromJSON(ue(e))}catch(e){}return this.IH=e,this}}class Ae extends Ce{matches(e,t,s){if(!s)return!1;if(!e.url.startsWith(location.origin))return location.origin,!1;const i=[...s.entries()].some(e=>this.test(`${e[0]}=${e[1]}`));return i}}Ae.propName="cookie";class ke extends ye{matches(e,t,s){const i=e.headers.get("user-agent")||navigator.userAgent;return!i||(this.constructor.name,this.userAgentMatches(i),this.userAgentMatches(i))}toJSON(){return!0}fromJSON(e){return this}}class Ie extends ke{userAgentMatches(e){return function(e){return ge(e,"wow64","windows nt","win64","msie","macintosh;","linux x86_64")}(e)}}Ie.propName="desktop";class qe extends Ce{matches(e,t,s){return this.test(C(e.url).host)}}qe.propName="host";class Oe extends ke{userAgentMatches(e){return!(/\bsm-t\d{3}\b/i.test(e)||/\bgt-p\d{3}/i.test(e))&&(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|samsungbrowser|psp|series[46]0|symbian|treo|up\.(?:browser|link)|vodafone(?!.*tab)|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br[ev]w|bumb|bw\-[nu]|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c[- ]|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))}}Oe.propName="mobile";class Fe extends Ce{matches(e,t,s,i=1){const r=C(e.url);return 2===i?this.test(r.pathname):this.test(r.pathname+r.search)}}Fe.propName="pathname";class He extends ye{constructor(e=[],t=1){super(),this.H8=e,this.H9=t}get size(){return this.H8.length}toJSON(){return this.H8.map(e=>e.toJSON())}fromJSON(e){const t=e||[];if(t instanceof Array)return this.H8=t.map(e=>(new Re).fromJSON(e)),this;throw new Error("Invalid RuleSet JSON")}matches(e,t,s){return this.H8.some(i=>i.matches(e,t,s,this.H9))}[Symbol.iterator](){return this.H8[Symbol.iterator]()}addRule(e){return this.H8.push(e)}removeRule(e){const t=this.H8.indexOf(e);return!(t<0)&&(this.H8.splice(t,1),!0)}}class Ne extends ke{userAgentMatches(e){return we(e)}}Ne.propName="tablet";class Ee extends ke{userAgentMatches(e){return ve(e)}}Ee.propName="tv";class De extends Ce{matches(e,t,s){return this.test(I(e.url))}}De.propName="url";class Pe extends Ce{matches(e,t,s){return this.test(C(e.url).hash||"")}}Pe.propName="hashparam";const Be={[be.propName]:be,[Ae.propName]:Ae,[Ie.propName]:Ie,[qe.propName]:qe,[Oe.propName]:Oe,[Fe.propName]:Fe,[Ne.propName]:Ne,[Ee.propName]:Ee,[De.propName]:De,[Pe.propName]:Pe};var Te,Ge,xe;function Ue(e,t){return e instanceof Promise?e.then(e=>t(e)):t(e)}function Me(e,t){fetch(e+"/rum/pi",{method:"POST",headers:{"Content-Type":"text/plain;charset=UTF-8"},body:JSON.stringify(t)}).catch(e=>{})}function Le(e,t,s,i){const r=e.rumTracking;if(!r||"object"==typeof r&&r.noTracking)return;const n={type:i,message:t,stackTrace:s,timestamp:Date.now()};Me(e.appURL,{jsErrors:[n]})}function We(e){return new Function("return "+e)()}!function(e){e.LOAD="load",e.SPEED_KIT_DYNAMIC_LOADED="speed-kit-dynamic-loaded"}(Te||(Te={})),function(e){e.SNIPPET="snippet",e.CONFIG="skConfig",e.RUMPLUGIN="rum",e.JSTRACKINGPLUGIN="js",e.DFCONFIG="dfConfig",e.MERGE="merge",e.CHANGEDETECTION="cd",e.DYNAMICFETCHER="df",e.BLOCKINGNOTRELEASED="blockingScriptNotReleased",e.MAINNOTMERGED="mainNotMerged",e.BODYMERGEABORTED="bodyMergeAborted",e.SERVICEWORKER="sw",e.SLOWCHUNK="slowChunk"}(Ge||(Ge={}));let Je=xe=class extends re{constructor(e,t,s){super(),this.Hi=!0,this.properties=xe.getDefaults(),this.Hj=!1,this.Hk=null,this.Hl=null,this.He=e,this.Hf=t,this.Hg=s,this.Hh=G(navigator.userAgent)}get appURL(){if(!this.optionalAppURL)throw new Error("Options are not initialized yet.");return this.optionalAppURL}get reconnectInterval(){return this.properties.reconnectInterval}get refreshInterval(){return 1e3*this.properties.refreshInterval}get relativeModuleImports(){return this.properties.relativeModuleImports}get staleWhileRevalidate(){return 1e3*this.properties.staleWhileRevalidate}get preloadBloomFilter(){return this.properties.preloadBloomFilter}get navigationPreload(){return this.properties.navigationPreload}get cachingDisabled(){return this.properties.disableCache}get originCachingEnabled(){return this.properties.enableOriginCache}shouldPreloadDynamicBlocks(e){return this.properties.preloadDynamicBlocks.matches(e.originalRequest,e.contentType,e.cookies)}get sdnSetup(){return this.properties.sdnSetup}get ignoreAfterPostNavigate(){return this.properties.ignoreAfterPostNavigate}get offlinePage(){return this.properties.offlinePage||null}get useCacheWhenOffline(){return this.properties.useCacheWhenOffline}get rumTracking(){return this.properties.rumTracking}get enforceDisabledPages(){return this.properties.enforceDisabledPages}get omitImageCredentials(){return this.properties.omitImageCredentials}get delayRacedOrigin(){return this.properties.delayRacedOrigin}get ruleSetConfig(){return this.properties.ruleSetConfig}get browserInfo(){return this.Hh}get expireBrowserCacheByFetchTime(){return this.properties.expireBrowserCacheByFetchTime}shouldCacheRequest(e){const{request:t,cookies:i}=e,r=this.userAgentChangeDetected(e);if(e.modifying)return e.setResponseCause(E.Blacklist),!1;if(e.url.hash.indexOf("bqBlacklist")>=0)return e.setResponseCause(E.Blacklist),!1;if(!this.properties.whitelist.size)return e.setResponseCause(E.NotWhitelisted),!1;if("navigate"===e.request.mode&&this.getCustomDevice()&&r)return e.setResponseCause(E.UserAgentChanged),this.Hf.setCustomDevice(""),!1;if(this.properties.disableCache)return e.setResponseCause(E.Disabled),!1;if(this.properties.whitelist.size&&!this.properties.whitelist.matches(t,e.contentType,i))return e.setResponseCause(E.NotWhitelisted),!1;if(this.properties.blacklist.matches(t,e.contentType,i))return e.setResponseCause(E.Blacklist),!1;if(e.prewarm&&this.properties.preloadBlacklist.matches(t,e.contentType,i))return e.setResponseCause(E.PreloadBlacklist),!1;if(encodeURI(t.url).length>3800)return e.setResponseCause(E.TooLargeRequest),!1;return!(e.contentType===s.Image&&!this.supportsWebP(e)&&!e.isPrewarmRequest())||(e.setResponseCause(E.FormatNotSupported),!1)}shouldBlockRequest(e){const{request:t,cookies:s,contentType:i}=e;return!e.isNavigateRequest()&&this.properties.blockedRequests.matches(t,i,s)}supportsWebP(e){const t=e.request.headers.get("Accept");return this.properties.enforceImageServing||!!t&&(t.includes("image/webp")||"*/*"===t)}shouldEnsureFetch(e){if(e.isDynamicBlockRequest()||e.isNavigateRequest())return!1;if(this.shouldDelayRequest(e))return!1;if(this.isTrackingRequest(e))return!1;const[t,s]=this.Hh;if(!e.isSameOrigin()&&"Safari"===t&&s>=17)return!1;const i=(!this.properties.whitelist.size||this.properties.whitelist.matches(e.request,e.contentType,e.cookies))&&!e.modifying,r=this.properties.fetchlist.matches(e.request,e.contentType,e.cookies),n=this.properties.blacklist.matches(e.request,e.contentType,e.cookies);return!i&&!n||n&&r}shouldDelayRequest(e){const t=this.properties.delayed.some(t=>t.rules.matches(e.request,e.contentType,e.cookies)),i=e.contentType,r=[s.Script,s.Image];return t&&!!i&&r.includes(i)}isEnabledOnSite(e){return Ue(e.getNavigateUrl(),t=>0!==t.length&&this.Ha(e,this.properties.enabledSites))}isEnabledOnURL(e,t,s=this.properties.enabledSites){if(this.isDisabledOnURL(e,t))return!1;if(!s.size)return!0;const i=s.matches(new Request(e),t.contentType,t.cookies);return i||t.setResponseCause(E.NotEnabled),i}isDisabledOnURL(e,t){if(!this.properties.disabledSites.size)return!1;const s=this.properties.disabledSites.matches(new Request(e),t.contentType,t.cookies);return s}isImmutable(e){if(!this.properties.immutableAssets.size||e.isNavigateRequest())return!1;const{request:t,cookies:s}=e,i=this.properties.immutableAssets.matches(t,e.contentType,s);return t.url,i}isTrackingRequest(e,t=this.properties.trackingRequests){const{request:s,cookies:i}=e,r=t.matches(s,e.contentType,i);return s.url,r}shouldApplyUserAgentDetection(e){return this.properties.userAgentDetection&&this.properties.userAgentDetection.matches(e.originalRequest)}HZ(e){if(e.isNavigateRequest()){if(!!e.url.href.includes("disableSpeedKit"))return e.setResponseCause(E.Disabled),!0;if(!this.properties.disabledSites.size)return!1;const t=this.properties.disabledSites.matches(e.originalRequest,e.contentType,e.cookies);return t&&e.setResponseCause(E.DisabledSites),t}return Ue(e.navigation.url,t=>{if(this.isDisabledOnURL(t,e))return e.setResponseCause(E.DisabledSites),!0;return!!t.includes("disableSpeedKit")&&(e.setResponseCause(E.Disabled),!0)})}Ha(e,t){return Ue(this.HZ(e),s=>{if(s)return e.setResponseCause(E.DisabledSites),!1;if(!t||!t.size)return!0;if(e.isNavigateRequest()){const s=t.matches(e.originalRequest,e.contentType,e.cookies);return s||e.setResponseCause(E.NotEnabled),s}return Ue(e.navigation.url,s=>this.isEnabledOnURL(s,e,t))})}hasCustomVariation(){return!!this.properties.customVariation.length}getCustomVariation(e,t){const s=e.originalRequest;let i=null;return this.properties.customVariation.forEach(r=>{if(!r.rules||r.rules.matches(s,e.contentType,e.cookies))try{i=r.variationFunction(s,t,e.cookies.getMap())}catch(e){Le(this,"variationFunctionError:"+e.message,e.stack,Ge.SERVICEWORKER)}}),i}getTransformedDynamicBlockRequest(t,s){if(!this.properties.dynamicBlockUrlTransform)return t.originalRequest;try{const i=this.properties.dynamicBlockUrlTransform(t.originalRequest,s,t.cookies.getMap());return e(t.request,i)}catch(e){return Le(this,"dynamicBlockUrlTransformError:"+e.message,e.stack,Ge.SERVICEWORKER),t.originalRequest}}getTransformedUrl(e,t){let s=e.url.toString();return this.properties.urlTransform.forEach(i=>{if(!i.rules||i.rules.matches(e.originalRequest))try{s=i.transformFunction(e.originalRequest,t,e.cookies.getMap())}catch(e){Le(this,"urlTransformFunctionError:"+e.message,e.stack,Ge.SERVICEWORKER)}}),s}updateCustomDevice(e){return this.Hf.getCustomDevice()!==e&&(this.Hf.setCustomDevice(e),!0)}getCustomDevice(){return this.Hf.getCustomDevice()||null}removeVersionNumbers(e){return e.replace(/([a-zA-Z]+)\/[\d.]+/g,"$1")}userAgentChangeDetected(e){if("navigate"!==e.request.mode)return!1;const t=e.originalRequest.headers.get("user-agent")||navigator.userAgent||navigator.vendor,s=this.removeVersionNumbers(t),i=this.Hf.getUserAgent();if(!i)return this.Hf.setUserAgent(t),!1;return this.removeVersionNumbers(i)!==s&&(this.Hf.setUserAgent(t),!0)}getUAClass(e){return ge(t=e,me)||ge(t.substr(0,4),fe)?"mobile":we(e,this.Hg.supportsTouch)?"tablet":ve(e)?"tv":"desktop";var t}static isCustomVariation(e){return!["desktop","mobile","tablet","tv"].includes(e)}async shouldFetchOrigin(e){if(-1===this.properties.fetchOriginInterval)return!1;if(0===this.properties.fetchOriginInterval)return!0;const t=Math.floor(Date.now()/1e3);if((await this.He.get("/fetch-origin-time")||t)<=t){const e=t+this.properties.fetchOriginInterval+2;return await this.He.set("/fetch-origin-time",e),!0}return!1}getDelayOptions(e){const t=xe.getDelayDefaults();for(const s of this.properties.delayed){(!s.rules||s.rules.matches(e.originalRequest))&&(s.options,Object.assign(t,s.options))}return t}shouldDefer(e){return this.properties.defer.matches(e.originalRequest)}async getImageOptions(e){if(!1===this.properties.image||e.contentType!==s.Image)return!1;const t=xe.getImageDefaults();if(this.properties.image instanceof Array){const s=await e.getNavigateUrl(),i=e.cookies.getMap(),{width:r}=await this.He.get("/com.baqend.speedkit.screen");for(const n of this.properties.image){if(!n.rules||n.rules.matches(e.originalRequest)){if(await this.Ha(e,n.enabledSites)){const a=this.getImageCallbackOptions(e.request,s,i,n,r),o=Object.assign(Object.assign({},n.options),a);Object.assign(t,o),JSON.stringify(o)}}}return t}return Object.assign(t,this.properties.image)}getImageCallbackOptions(e,t,s,i,r){return i.imageFunction?i.imageFunction(e,t,s,i.options,r):{}}shouldStripQueryParameter(e,t){return!!this.properties.stripQueryParams.length&&Se(e,t,this.ruleSetConfig.version)}async getQueryParameterStripConditions(e){let t=[];for(const s of this.properties.stripQueryParams){if(!s.rules||s.rules.matches(e.originalRequest,e.contentType,e.cookies)){(!s.enabledSites||await this.Ha(e,s.enabledSites))&&(t=t.concat(s.params))}}return t}async appendStrippedParams(e,t){const s=new URL(t.originalRequest.url),i=await this.getQueryParameterStripConditions(t);return s.searchParams.forEach((t,s)=>{this.shouldStripQueryParameter(s,i)&&e.searchParams.append(s,t)}),e.toString()}getRequestKey(e,t=!1){const s=A(e.originalRequest.url,t);return"navigate"===e.originalRequest.mode?(this.Hi=!!e.resultingClientId,e.resultingClientId||s):this.Hi?e.navigation.clientId:s}supportsClientId(e){return e&&"navigate"===e.originalRequest.mode&&(this.Hi=!!e.resultingClientId),this.Hi}setConfigDebugId(e){this.Hk=e}setAuthToken(e){this.Hl=e}getConfigDebugId(){return this.Hk}toggleBypassDeactivation(e){this.Hj=e}shouldBypassDeactivation(){return this.Hj}getAuthToken(){return this.Hl}shouldDetectDevice(e){return this.properties.shouldDetectDevice.matches(e.request,e.contentType,e.cookies)}shouldCountIFrameNavigation(){return this.properties.enableIFramePiTracking}getPrecache(){return this.properties.precache}getSplitTestId(){return this.properties.splitTestId}getGroup(){return this.properties.group}toJSON(){const e=this.properties.delayed.map(e=>({options:e.options,rules:e.rules.toJSON()})),t=this.properties.image instanceof Array?this.properties.image.map(e=>({options:e.options,enabledSites:e.enabledSites&&e.enabledSites.toJSON(),rules:e.rules&&e.rules.toJSON()})):this.properties.image,s=this.properties.stripQueryParams.map(e=>({enabledSites:e.enabledSites&&e.enabledSites.toJSON(),rules:e.rules&&e.rules.toJSON(),params:e.params})),i=this.properties.customVariation.map(e=>({rules:e.rules&&e.rules.toJSON(),variationFunction:e.variationFunction.toString()})),r=this.properties.urlTransform.map(e=>({rules:e.rules&&e.rules.toJSON(),transformFunction:e.transformFunction.toString()})),n=this.properties.dynamicBlockUrlTransform?this.properties.dynamicBlockUrlTransform.toString():void 0,a=new URL(this.appURL);let o,c="local";return a.host.endsWith(".app.baqend.com")?c=a.host.substring(a.host.length-".app.baqend.com".length):o=a.host,{appName:c,appDomain:o,delayed:e,image:t,stripQueryParams:s,customVariation:i,urlTransform:r,dynamicBlockUrlTransform:n,preloadDynamicBlocks:this.properties.preloadDynamicBlocks.toJSON(),defer:this.properties.defer.toJSON(),splitTestId:this.properties.splitTestId,group:this.properties.group,blacklist:this.properties.blacklist.toJSON(),preloadBlacklist:this.properties.preloadBlacklist.toJSON(),whitelist:this.properties.whitelist.toJSON(),enabledSites:this.properties.enabledSites.toJSON(),disabledSites:this.properties.disabledSites.toJSON(),disableCache:this.properties.disableCache,enableOriginCache:this.properties.enableOriginCache,ignoreAfterPostNavigate:this.properties.ignoreAfterPostNavigate,userAgentDetection:this.properties.userAgentDetection.toJSON(),fetchOriginInterval:this.properties.fetchOriginInterval,preloadBloomFilter:this.properties.preloadBloomFilter,navigationPreload:this.properties.navigationPreload,reconnectInterval:this.properties.reconnectInterval,refreshInterval:this.properties.refreshInterval,staleWhileRevalidate:this.properties.staleWhileRevalidate,precache:this.properties.precache,immutableAssets:this.properties.immutableAssets.toJSON(),trackingRequests:this.properties.trackingRequests.toJSON(),offlinePage:this.properties.offlinePage,useCacheWhenOffline:this.properties.useCacheWhenOffline,enableIFramePiTracking:this.properties.enableIFramePiTracking,enforceDisabledPages:this.properties.enforceDisabledPages,enforceImageServing:this.properties.enforceImageServing,omitImageCredentials:this.properties.omitImageCredentials,expireBrowserCacheByFetchTime:this.properties.expireBrowserCacheByFetchTime,blockedRequests:this.properties.blockedRequests.toJSON(),shouldDetectDevice:this.properties.shouldDetectDevice.toJSON(),disableParamSorting:this.properties.disableParamSorting.toJSON()}}fromJSON(e){var t;const{sw:i,scope:r,disabled:n}=e,a=h(e,["sw","scope","disabled"]),{appName:o,appDomain:c}=a,u=h(a,["appName","appDomain"]),l=o+".app.baqend.com";this.optionalAppURL=`https://${c||l}/v1`,this.optionalAppURL;const d=xe.getDefaults(),{maxStaleness:p,refreshInterval:g}=u,m=h(u,["maxStaleness","refreshInterval"]),f=g||p&&p/1e3||d.refreshInterval,{whitelist:w,blacklist:v,preloadBlacklist:y,fetchlist:R,delayed:S,defer:b,stripQueryParams:C,customVariation:A,enabledSites:k,disabledSites:I,precache:q,image:O,userAgentDetection:F,immutableAssets:H,trackingRequests:N,enforceDisabledPages:E,omitImageCredentials:D,resetResponseUrl:P,urlTransform:B,blockedRequests:T,shouldDetectDevice:G,preloadDynamicBlocks:x,disableParamSorting:U,dynamicBlockUrlTransform:M}=m,L=h(m,["whitelist","blacklist","preloadBlacklist","fetchlist","delayed","defer","stripQueryParams","customVariation","enabledSites","disabledSites","precache","image","userAgentDetection","immutableAssets","trackingRequests","enforceDisabledPages","omitImageCredentials","resetResponseUrl","urlTransform","blockedRequests","shouldDetectDevice","preloadDynamicBlocks","disableParamSorting","dynamicBlockUrlTransform"]),W=(null===(t=L.ruleSetConfig)||void 0===t?void 0:t.version)||d.ruleSetConfig.version;this.properties=Object.assign(Object.assign(Object.assign({},d),{refreshInterval:f,preloadDynamicBlocks:this.getPreloadDynamicBlockRuleSet(x||!1,W),omitImageCredentials:D||!1,userAgentDetection:this.getUserAgentRuleSet(F||!1,W),whitelist:new He([],W).fromJSON(w),blacklist:new He([],W).fromJSON(v),preloadBlacklist:new He([],W).fromJSON(y),fetchlist:new He([],W).fromJSON(R),immutableAssets:new He([],W).fromJSON(H),trackingRequests:new He([],W).fromJSON(N),enabledSites:new He([],W).fromJSON(k),disabledSites:new He([],W).fromJSON(I),stripQueryParams:xe.initStripParams(C,W),customVariation:this.Hb(A,W),delayed:xe.initDelayed(S,W),defer:new He([],W).fromJSON(b),precache:q||[],image:xe.initImage(O,W),enforceDisabledPages:E||!!k,dynamicBlockUrlTransform:this.Hd(M),resetResponseUrl:new He([],W).fromJSON(P),urlTransform:this.Hc(B,W),blockedRequests:new He([],W).fromJSON(T),shouldDetectDevice:new He([],W).fromJSON(G),disableParamSorting:new He([],W).fromJSON(U||[{contentType:Object.values(s).filter(e=>![s.Navigate,s.Document].includes(e)),pathname:/(?!\.html)/}])}),L)}shouldResetResponseUrl(e){return this.properties.resetResponseUrl.matches(e.originalRequest,e.contentType,e.cookies)}shouldDisableParamSorting(e){return this.properties.disableParamSorting.matches(e.originalRequest,e.contentType,e.cookies)}getUserAgentRuleSet(e,t){const s=new He([],t);return"boolean"==typeof e?e&&s.addRule(new Re([new De("")])):s.fromJSON(e),s}getPreloadDynamicBlockRuleSet(e,t){const s=new He([],t);return"boolean"==typeof e?e&&s.addRule(new Re([new De("")])):s.fromJSON(e),s}static getDefaults(){return{blacklist:new He,preloadBlacklist:new He,delayed:[{rules:new He,options:this.getDelayDefaults()}],defer:new He,disableCache:!1,enableOriginCache:!1,enabledSites:new He,disabledSites:new He,fetchOriginInterval:-1,image:this.getImageDefaults(),ignoreAfterPostNavigate:!0,preloadBloomFilter:!0,preloadDynamicBlocks:new He,navigationPreload:!1,reconnectInterval:6e4,refreshInterval:300,relativeModuleImports:!0,sdnSetup:!1,staleWhileRevalidate:1800,stripQueryParams:[],userAgentDetection:new He,customVariation:[],whitelist:new He,fetchlist:new He,splitTestId:"undefined",group:"A",offlinePage:"",useCacheWhenOffline:!1,precache:[],immutableAssets:new He,trackingRequests:new He,rumTracking:!1,enableIFramePiTracking:!1,enforceDisabledPages:!1,enforceImageServing:!1,resetResponseUrl:new He,omitImageCredentials:!1,urlTransform:[],blockedRequests:new He,shouldDetectDevice:new He,disableParamSorting:new He,delayRacedOrigin:0,ruleSetConfig:{version:1},expireBrowserCacheByFetchTime:!1,dynamicBlockUrlTransform:null}}static getDelayDefaults(){return{event:Te.LOAD,timeout:1e3}}static getImageDefaults(){return{downscale:!0,screenSizeFactor:1,maxWidth:!1,maxHeight:!1,quality:null,optimize:"medium",webp:!0,pjpeg:!0,crop:!1,overrideWidth:!1,overrideHeight:!1,format:null,avif:!1}}static initDelayed(e,t){return e?e.some(e=>e.hasOwnProperty("rules"))?e.map(e=>({rules:new He([],t).fromJSON(e.rules),options:e.options})).reverse():[{rules:new He([],t).fromJSON(e),options:this.getDelayDefaults()}]:[{rules:new He([],t),options:this.getDelayDefaults()}]}static initStripParams(e,t){if(!e)return[];return e instanceof Array&&e.some(e=>"object"==typeof e&&e.params)?e.map(e=>({enabledSites:e.enabledSites&&new He([],t).fromJSON(e.enabledSites),rules:e.rules&&new He([],t).fromJSON(e.rules),params:e.params})):[{params:e}]}Hb(e,t){if(!e)return[];try{return e.map(e=>({rules:e.rules&&new He([],t).fromJSON(e.rules),variationFunction:We("string"==typeof e.variationFunction?e.variationFunction:e.variationFunction.toString())}))}catch(e){try{Le(this,"variationParseError:"+e.message,e.stack,Ge.SERVICEWORKER)}catch(e){}return[]}}Hc(e,t){if(!e)return[];try{return e.map(e=>({rules:e.rules&&new He([],t).fromJSON(e.rules),transformFunction:We(e.transformFunction.toString())}))}catch(e){try{Le(this,"initTransformUrlError:"+e.message,e.stack,Ge.SERVICEWORKER)}catch(e){}return[]}}Hd(e){try{return e?We(e.toString()):null}catch(e){try{Le(this,"initDBRequestTransformError:"+e.message,e.stack,Ge.SERVICEWORKER)}catch(e){}return null}}static initImage(e,t){return!1!==e&&(e?e instanceof Array?e.map(e=>({enabledSites:e.enabledSites&&new He([],t).fromJSON(e.enabledSites),rules:e.rules&&new He([],t).fromJSON(e.rules),options:xe.normalizeImageOptions(e.options||{}),imageFunction:e.imageFunction&&We("string"==typeof e.imageFunction?e.imageFunction:e.imageFunction.toString())||void 0})).reverse():xe.normalizeImageOptions(e):{})}static normalizeImageOptions(e){return"number"==typeof e.quality?e.quality=Math.max(1,Math.min(100,Math.round(e.quality))):!1===e.quality&&(e.quality=100),e}};Je=xe=u([te("/com.baqend.speedkit.config")],Je);let je=class extends re{constructor(){super(...arguments),this.device="",this.userAgent=""}getCustomDevice(){return this.device}setCustomDevice(e){this.device=e,this.notify()}getUserAgent(){return this.userAgent}setUserAgent(e){this.userAgent=e,this.notify()}fromJSON(e){if("string"==typeof e)return this.fromJSON({device:e,userAgent:this.userAgent}),void this.notify();this.device=e.device||this.device,this.userAgent=e.userAgent||this.userAgent}toJSON(){return{device:this.device,userAgent:this.userAgent}}};function Ke(e,t){return void 0===e?t:e}je=u([te("/com.baqend.speedkit.device")],je);class $e{constructor(e){this.isFetched=!1,this.Bm=null,this.Bn=null,this.dependent=new Set,this.originalRequest=e.request,this.request=e.request,this.Bq=e.awaiter,this.navigation=e.navigation,this.cookies=Ke(e.cookies,new oe),this.Bo=e.navigateRequest,this.Bp=Ke(e.precache,!1),this.preloadResponse=e.preloadResponse,this.prewarm=Ke(e.prewarm,!1),this.navigate=Ke(e.navigate,!1),this.marks=Ke(e.marks,new Map),this.dependsOn=e.dependsOn,this.resultingClientId=Ke(e.resultingClientId,""),this.contentType=e.contentType,this.Bn=e.userAgent,this.Br=Ke(e.offlineResource,!1),this.applicationState=e.applicationState}static create(e,t={},s=(()=>{})){const i=p.fromNavigateURL(e),{navigation:n=i,cookies:a=new oe,critical:o=!1,precache:c=!1,navigate:u=!1,offlineResource:l=!1}=t,d=h(t,["navigation","cookies","critical","precache","navigate","offlineResource"]),g=d.headers?d.headers.get("user-agent"):null,m=new Request(e,d),f="navigate"===t.mode||u,w=d.contentType||r(m);return new $e({request:m,navigation:n,cookies:a,critical:o,precache:c,navigateRequest:f,contentType:w,userAgent:g,offlineResource:l,awaiter:s,prewarm:t.prewarm,marks:t.marks,dependsOn:t.dependsOn,resultingClientId:t.resultingClientId})}static fromEvent(e,t){const{request:s,preloadResponse:i,resultingClientId:n}=e,a="navigate"===s.mode,o=a?p.fromNavigateURL(s.url,n):p.fromClientID(e.clientId),c=r(s),h=s.headers.get("user-agent");return new $e({request:s,awaiter:t=>e.waitUntil(t),navigation:o,navigateRequest:a,contentType:c,preloadResponse:i,resultingClientId:n,userAgent:h,applicationState:t})}createSubRequest(e,t){return t.redirect||this.request.redirect,$e.create(e,Object.assign({marks:new Map(this.marks),resultingClientId:this.resultingClientId,redirect:this.request.redirect},t),this.Bq)}createDynamicBlockRequest(e,t){this.originalRequest.redirect;const s=t.getCustomDevice(),i=navigator.userAgent||navigator.vendor,r=t.shouldApplyUserAgentDetection(this)?t.getUAClass(i):null,n=t.getTransformedDynamicBlockRequest(this,s||r);return e?this.createSubRequest(n.url,Object.assign({},n)):new $e({request:n,awaiter:this.Bq,navigation:this.navigation,navigateRequest:this.Bo,contentType:this.contentType,userAgent:this.Bn,dependsOn:this.dependsOn,marks:new Map(this.marks),applicationState:this.applicationState})}waitUntil(...e){this.Bq(Promise.all(e))}get referrer(){return this.originalRequest.referrer}get url(){return new URL(this.request.url)}get originalUrl(){return new URL(this.originalRequest.url)}get headers(){return new Headers(this.request.headers)}get timings(){if(!this.marks.size)return null;const e=Object.create(null);for(const[t,s]of this.marks)e[t]=s;return e}mark(e){this.marks.set(e,Date.now())}isNavigateRequest(){return this.Bo}isPrewarmRequest(){return this.Bp||this.prewarm}isPrecache(){return this.Bp}isSameOrigin(){return this.url.origin===location.origin}isDynamicBlockRequest(){return"dynamic"===this.request.headers.get("baqend-speed-kit-request")}getResponseCause(){return this.responseCause?this.responseCause:E.Unknown}getApplicationState(){return this.applicationState}isOfflineResource(){return this.Br}get modifying(){return"GET"!==this.request.method&&"HEAD"!==this.request.method}set url(t){const s=t.toString();this.url.toString()!==s&&(this.request=e(this.request,s))}set headers(e){this.request=new Request(this.request,{headers:e,referrer:this.request.referrer})}set method(e){this.method!==e&&(this.request=new Request(this.request,{method:e,referrer:this.request.referrer}))}get method(){return this.request.method.toUpperCase()}set mode(e){this.request.mode!==e&&(this.request=new Request(this.request,{mode:e,referrer:this.request.referrer}))}set cache(e){this.request.cache!==e&&(this.request=new Request(this.request,{cache:e,referrer:this.request.referrer}))}set credentials(e){this.credentials!==e&&(this.request=function(e,t){return new Request(e,{credentials:t,headers:e.headers,referrer:e.referrer})}(this.request,e))}setResponseCause(e){this.responseCause||(this.responseCause=e)}markAsFetched(){this.isFetched=!0;for(const e of this.dependent)this.dependent.delete(e),e()}async fetch(e={}){this.mark("fetchStart"),this.dependsOn&&(this.dependsOn,this.dependsOn.isFetched),this.dependsOn&&!this.dependsOn.isFetched&&await new Promise(e=>{this.dependsOn.dependent.add(e)});const t=this.Bl(this.request);this.method,this.url.pathname;const s=fetch(t,e);this.markAsFetched();const i=await s;return this.mark("fetchEnd"),i}Bl(e){const[t,s,i]=G(navigator.userAgent);return"Safari"===t&&(s<15||15===s&&i<4)&&"navigate"===e.mode?new Request(e.url,{mode:"same-origin",method:e.method,referrer:e.referrer,referrerPolicy:e.referrerPolicy,credentials:e.credentials,cache:e.cache,redirect:e.redirect,integrity:e.integrity,keepalive:e.keepalive,headers:e.headers}):e}getNavigateUrl(){return this.isNavigateRequest()?this.originalRequest.url:this.navigation.url}fetchOriginal(){this.method,this.url.pathname;const e=this.Bl(this.originalRequest);return fetch(e)}toString(){return this.isSameOrigin()?`${this.method} ${this.url.pathname}`:`${this.method} ${this.url}`}getVariation(e){if(this.Bm)return this.Bm;const t=e.getCustomDevice(),s=e.shouldDetectDevice(this),i=s?t:null,r=e.shouldApplyUserAgentDetection(this);if(!r&&!e.hasCustomVariation())return i;const n=this.Bn||navigator.userAgent||navigator.vendor,a=e.getUAClass(n),o=s&&r?a:null,c=e.getCustomVariation(this,t||a);return this.Bm=c||i||o}}var ze,Ve;!function(e){e.INSTALLING="installing",e.BOOTING="booting",e.RUNNING="running",e.FAILED="failed"}(ze||(ze={}));const _e=Symbol("State"),Ye=Symbol("Reason"),Qe=Symbol("Waiters");function Ze(e){return e.includes("TypeError: Failed to fetch")||e.includes("TypeError: The network connection was lost")}function Xe(){try{return function e(t){if("string"==typeof t){const e=/^regexp:\/(.*)\/([\w]*)$/.exec(t);if(e){const[,t,s]=e;return new RegExp(t,s)}return t}if("object"!=typeof t)return t;if(t instanceof Array)return t.map(t=>e(t));const s=Object.create(null);for(const[i,r]of Object.entries(t))s[i]=e(r);return s}(INSERT_CONFIG_HERE)}catch(e){return null}}Ve=Qe;function et(e,t,s,i){return Promise.resolve(e).then(e=>new Promise((r,n)=>{const a=e.transaction(t,s),o=Promise.resolve(i(a.objectStore(t)));a.oncomplete=()=>o.then(r),a.onabort=a.onerror=()=>n(a.error)}))}function tt(e,t,s){return et(e,t,"readwrite",s)}async function st(e,t={}){if(e.status===H.NoContent)return new Response(null,t);const s=await e.blob();return new Response(s,t)}function it(e,t={}){const{status:s,statusText:i,headers:r}=e,n=new Headers(e.headers);n.set("timing-allow-origin","*");const a=Object.assign({status:s,statusText:i,headers:n},t);if(!e.body)return st(e,a);try{return Promise.resolve(new Response(e.body,a))}catch(t){return st(e,a)}}function rt(e,t){if(!t)return e.toString();try{return new URL(t).toString()}catch(s){if(t.startsWith("//"))return`${e.protocol}${t}`;if(t.startsWith("/"))return`${e.origin}${t}`;const i=function e(t){return t.startsWith("/")?e(t.substr(1)):t}(e.pathname).split("/"),r=t.split("/");i.pop();for(const e of r)".."===e?i.pop():"."===e||i.push(e);return`${e.origin}/${i.join("/")}`}}class nt{}class at{constructor(e,t){this.BH=e,this.BI=t}async handleInternalServerError(e){return e.isNavigateRequest()&&this.BI.shouldPreloadDynamicBlocks(e)?Y(e,!0,E.InternalServerError):this.retryOrigin(e,!0)}async retryOrigin(e,t=!1){const s=await e.fetchOriginal();return s.status>=H.InternalServerError?function(e,t,s){e.markAsFetched();const i=new z(T.Origin,E.Error,e,Promise.resolve(t));return i.setDisconnectCause(s),i}(e,s,N.ServerError):t?(this.disconnect(N.ServerError),V(e,!0,E.Error,s)):V(e,!0,E.Error,s)}disconnect(e){this.BH.isDisconnected()||this.BH.disconnect(!0,e)}}var ot;!function(e){e.SameOrigin="same-origin",e.Omit="omit",e.Include="include"}(ot||(ot={}));function ct(e,t){return Q(e,Uint8Array.from([71,73,70,56,57,97,1,0,1,0,128,0,0,0,0,0,255,255,255,33,249,4,1,0,0,0,0,44,0,0,0,0,1,0,1,0,0,2,1,68,0,59]),t,E.TrackingRequest)}class ht extends nt{constructor(e){super(),this.GS=e}handle(e,t){const{url:s}=e;return s.searchParams.get("bqpassthrough")?(s.searchParams.delete("bqpassthrough"),b(e.originalUrl,s),e.url=s,this.GS.shouldCacheRequest(e)?t(e):V(e,!1,E.Delayed,e.fetch())):this.GQ(e,t)}supportsHandling(e){return this.GS.shouldDelayRequest(e)}async GQ(e,t){return e.contentType===s.Script?(e.url.toString(),this.GR(e)):e.contentType===s.Image?(e.url.toString(),U(1e3).then(()=>e.fetchOriginal()).catch(console.error),ct(e,ht.buildContentTypeHeader("image/gif"))):(e.url.toString(),t(e))}GR(e){const t=e.url;t.searchParams.append("bqpassthrough","1"),b(e.originalUrl,t);const s=this.GS.getDelayOptions(e);return Q(e,`(function(){\n  const thisNode = document.currentScript;\n  const parentNode = thisNode.parentNode;\n  function loadScript() {\n    const scr = document.createElement('script');\n    for (let i = 0, len = thisNode.attributes.length; i < len; i++) {\n      var attr = thisNode.attributes.item(i);\n      scr.setAttribute(attr.nodeName, attr.nodeValue);\n    }\n    scr.async = true;\n    scr.src = '${t}';\n    // True if original script and corresponding parentNode were not removed from DOM\n    if (thisNode.isConnected) {\n      parentNode.replaceChild(scr, thisNode);\n    } else {\n      var container = parentNode.isConnected ? parentNode : document.head;\n      // Remove delayed script if original script was removed from DOM\n      scr.onload = function() { container.removeChild(scr); };\n      container.appendChild(scr);\n    }\n  }\n  function delayAfter(cb) { ${s.event===Te.SPEED_KIT_DYNAMIC_LOADED?"\n      if (!document.documentElement.classList.contains('speed-kit-dynamic-loading')) {\n        return cb();\n      }\n      document.addEventListener('speed-kit-loaded', () => {\n        cb();\n      });":"\n      if (document.readyState === 'complete') {\n        return cb();\n      }\n      document.addEventListener('readystatechange', () => {\n        if (document.readyState === 'complete') {\n          cb();\n         }\n      });"} }\n  delayAfter(() => {\n    window.setTimeout(() => {\n      loadScript();\n    }, ${s.timeout});\n  });\n})();\n`,ht.buildContentTypeHeader("application/javascript; charset=utf-8"),E.Delayed)}static buildContentTypeHeader(e){return{headers:{"content-type":e}}}}class ut extends nt{constructor(e,t){super(),this.Ga=e,this.Gb=t}async handle(e,t){e.url;const s=await this.GZ(e);return e.waitUntil(this.Gb.storeDynamicBlockResponse(e,s)),s}supportsHandling(e){return e.isDynamicBlockRequest()}async GX(e){if("true"===e.request.headers.get("baqend-speed-kit-offline")){const t=await this.Gb.retrieveDynamicBlockResponse(e);if(t)return t}const t=this.Ga.getRequestKey(e,this.Ga.shouldDisableParamSorting(e));let s=this.Gb.popDynamicBlockResponse(t);return s||(s=Promise.resolve(this.Gb.fetchAsDynamicBlockRequest(e,{redirect:"manual"}))),this.GY(e,s)}async GY(e,t){const s=await t,i=await s.isRedirect();if(!i&&await s.isSuccessful())return s;if(i){const t=this.Gb.fetchAsDynamicBlockRequest(e,{redirect:"follow"},!0);if(await ut.isCorsRedirect(t)){const t=new Response(null,{status:H.CORSRedirect});return V(e,!1,E.CORSRedirect,t)}return t}return V(e,!0,E.DynamicBlock,s.response)}static async isCorsRedirect(e){try{return!await e.getResponseStatus()}catch(t){e.disconnectCause=N.SWException}return!0}async GZ(e){const t=await this.GX(e),s=await t.response;if(!s||s.redirected)return t;const i=e.originalRequest.url.toString();if(!(e.headers.has("baqend-request-hotness")||s.url!==i))return t;const{status:r,statusText:n,headers:a}=s,o=new Headers(a),c=this.Ga.getRequestKey(e,this.Ga.shouldDisableParamSorting(e)),h=this.Gb.getResourceHotness(c);null!==h&&o.set("baqend-response-hotness",h.toString());const u={status:r,statusText:n,headers:o},l=new Response(s.body,u);return s.url!==i&&Object.defineProperty(l,"url",{value:i}),V(t.request,!1,t.cause,l)}}function lt(e){return Z(e)||e===T.SwCache}class dt{constructor(){this.ID=new Set}addRedirect(e,t){return!!this.IB(t)||(this.IC(e),!1)}IB(e){const t=e.headers.get("location");return!!t&&this.ID.has(t)}IC(e){this.ID.add(e.url)}clear(){this.ID.clear()}}function pt(e,t){return Q(e,null,{status:t&&t.status||204,headers:Object.assign({"cache-control":"max-age=0, no-cache, no-store",vary:"*"},t&&t.headers||{})},E.TrackingRequest,T.Origin)}class gt{constructor(e){this.provider=e}}let mt=class extends gt{async handle(){return this.provider.connect(),!0}};mt=u([ee("connect")],mt);let ft=class{constructor(e){this.FS=e}async handle(e,t){return this.FR(t)&&"reset"!==t.data?(t.data,this.FS.setConfigDebugId(t.data)):this.FS.setConfigDebugId(null),!0}FR(e){return!!e&&"object"==typeof e&&"string"==typeof e.data}};ft=u([ee("config-debug")],ft);let wt=class extends gt{async handle(e,t,s){var i;const r=(null===(i=t)||void 0===i?void 0:i.disconnectCause)||N.PostMessage;return this.provider.disconnect(!0,r,!0),!0}};wt=u([ee("disconnect")],wt);let vt=class extends gt{async handle(e,t,s){return t.data?this.provider.refreshOnReload(!1):await this.provider.refreshCacheSketch(!0),!0}};vt=u([ee("fetch-bloom-filter")],vt);let yt=class{constructor(e,t,s){this.FT=e,this.FU=t,this.FV=s}async handle(e,t,s){const i=t.clientURL;if(!s||!t||!i)return!1;const r=A(i),n=e.id&&this.FU.supportsClientId()?e.id:void 0;this.FV.markClientAsReady(n||r,e);const a=this.FT.pop(r,n)||this.FT.getUnknownNavigateMetadata(i);return s.postMessage(a),!0}};var Rt;yt=u([ee("get-navigate-info")],yt),function(e){e.Script="script",e.CSS="css",e.Link="link",e.Navigate="navigate",e.Other="other"}(Rt||(Rt={}));const St=[s.Style,s.Script,s.Font,s.Navigate,s.Fetch];let bt=class{constructor(e,t,s,i,r,n){this.Fb=e,this.Fc=t,this.Fd=s,this.Fe=i,this.Ff=r,this.Fg=n}async handle(e,t){if(!this.FW(t))return!1;const s=this.FY(t.data);return await this.Fa(e,s),!0}FW(e){return!!e&&"object"==typeof e&&e.data instanceof Array&&e.data.every(e=>"string"==typeof e.url)}FX(e){try{return new URL(e,location.origin)}catch(e){return null}}FY(e){return e.map(e=>{var r;if(e.contentType)return this.FZ(e,e.contentType);if(e.initiatorType===Rt.Script)return this.FZ(e,s.Script);if(e.initiatorType===Rt.Navigate)return this.FZ(e,s.Navigate);if([Rt.Other,Rt.Link,Rt.CSS].includes(e.initiatorType)){const s=null===(r=this.FX(e.url))||void 0===r?void 0:r.pathname;if(!s)return null;const n=t(s);return this.FZ(e,i(n))}return null}).filter(e=>e)}FZ(e,t){const s=this.FX(e.url);return St.includes(t)&&s?{contentType:t,url:s}:null}async Fa(e,t){if(!t.length)return;await this.Fd.refreshCacheSketch();const s=new URL(e.url).toString(),i=A(s),r=e.id&&this.Fb.supportsClientId()?e.id:void 0;for(const{url:e,contentType:n}of t){const t="navigate"===n,a={navigation:"navigate"===n?p.fromNavigateURL(e.href):p.fromNavigateURL(s),cookies:this.Fe.getCookies(location.origin),contentType:n,prewarm:!0,navigate:t,redirect:t?"manual":"follow"},o=$e.create(e.href,a),c=performance.now(),h=await this.Ff.fetch(o),u=performance.now();t&&this.Fg.sendMessageToClient(r||i,"preload-timing",{duration:u-c,url:e.toString(),responseSource:h.source,responseCause:h.cause})}}};function Ct(e,...t){return"object"==typeof e&&void 0===e.prototype&&t.every(t=>t in e)}bt=u([ee("prewarm-fetch")],bt);let At=class{constructor(e,t,s){this.Fi=e,this.Fj=t,this.Fk=s}async handle(e,t){return!!Ct(t,"data")&&(await this.Fh(t.data,Ct(t,"event")?t.event:void 0),!0)}async Fh(e,t){"load"===t&&(this.Fj.trackLoadEvent(),2===this.Fj.loadEventCount&&this.Fi.refreshCacheSketch(!0)),this.Fk.updateCookies(location.origin,e)}};At=u([ee("send-cookies")],At);let kt=class{constructor(e){this.Fl=e}async handle(e){return e.id,this.Fl.reportDynamicBlocksApplied(e.id),!0}};kt=u([ee("dom-ready")],kt);let It=class{constructor(e){this.Fn=e}async handle(e,t){return!!Ct(t,"data")&&(await this.Fm(t.data),!0)}async Fm(e){this.Fn.updateCustomDevice(e)}};It=u([ee("update-device")],It);let qt=class{constructor(e,t){this.Fo=e,this.Fp=t}async handle(e,t,s){const i=t.clientURL;if(!s||!t)return!1;const r=A(i),n=e.id&&this.Fp.supportsClientId()?e.id:void 0,a=this.Fo.popOriginTimings(n||r);return s.postMessage(a),!0}};qt=u([ee("get-origin-timings")],qt);let Ot=class{constructor(e){this.Fr=e}async handle(e,t){return!!this.Fq(t)&&(t.data,this.Fr.toggleBypassDeactivation(t.data),!0)}Fq(e){return!!e&&"object"==typeof e&&"boolean"==typeof e.data}};Ot=u([ee("bypass-deactivation")],Ot);let Ft=class{async handle(e,t){if(!this.Fs(t))return!1;const s=t.data;return Object.defineProperty(navigator.constructor.prototype,"onLine",{get:()=>!s}),!0}Fs(e){return!!e&&"object"==typeof e&&"boolean"==typeof e.data}};Ft=u([ee("offline")],Ft);let Ht=class{constructor(e){this.Fv=e}async handle(e,t,s){return!(!s||!t)&&(this.Ft(e.id,s,t),this.Fu(e.id),!0)}Ft(e,t,s){const i=JSON.stringify(this.Fv.getResponses(e,null==s?void 0:s.includeOrigin));t.postMessage(i)}Fu(e){this.Fv.clearResponses(e)}};Ht=u([ee("resource-info")],Ht);let Nt=class{constructor(e){this.Fw=e}async handle(e,t,s){const i=e.id;if(!s)return!1;const r=this.Fw.pop(i,t.contentType);return s.postMessage(r),!0}};Nt=u([ee("get-broken-assets")],Nt);let Et=class{constructor(e){this.cacheRevision=e}async handle(e,t,s){return!!this.Fx(t)&&(await this.cachePages(t.data),!0)}Fx(e){return!!e&&"object"==typeof e&&Array.isArray(e.data)&&e.data.every(e=>"string"==typeof e)}async cachePages(e){try{e.forEach(e=>{this.cachePage(e)})}catch(e){}}async cachePage(e){const t=$e.create(e,{offlineResource:!0}),s=await t.fetch();await this.cacheRevision.storeResponse(t,s)}};Et=u([ee("offline-page")],Et);let Dt=class{constructor(e,t){this.Fy=e,this.Fz=t}async handle(e,t,s){const i=t.clientURL;if(!s||!i)return!1;const r=A(i),n=e.id&&this.Fz.supportsClientId()?e.id:void 0,a=this.Fy.popReferrer(r,n)||"";return s.postMessage(a),!0}};Dt=u([ee("get-referrer-info")],Dt);let Pt=class{constructor(e){this.F0=e}async handle(e,t,s){if(!s)return!1;const i=this.F0.getBlockedScripts(e.id);return i.length&&s.postMessage(i),!0}};Pt=u([ee("get-blocked-scripts")],Pt);let Bt=class{constructor(e){this.F2=e}async handle(e,t){return this.F1(t)&&"reset"!==t.data?(t.data,this.F2.setAuthToken(t.data)):this.F2.setAuthToken(null),!0}F1(e){return!!e&&"object"==typeof e&&"string"==typeof e.data}};Bt=u([ee("auth-token")],Bt);class Tt{constructor(e){this.swResponse=!0,this.url=e.url,this.resultingClientId=e.resultingClientId,this.fromOrigin=e.fromOrigin,this.cacheHit=e.cacheHit,this.cdnCacheHit=e.cdnCacheHit,this.cdnBackendTime=e.cdnBackendTime,this.cdnPoP=e.cdnPoP,this.firstLoad=!1,this.splitTestId=e.splitTestId,this.group=e.group,this.responseCause=e.responseCause,this.responseSource=e.responseSource,this.backendCacheHit=e.backendCacheHit,this.applicationState=e.applicationState,[this.browser,this.browserVersion,this.minorVersion]=G(navigator.userAgent),e.originStatus&&(this.originStatus=e.originStatus),e.timings&&(this.timings=e.timings,!e.fromOrigin&&e.timings.fetchEnd&&e.timings.fetchStart&&(this.assetTTFB=e.timings.fetchEnd-e.timings.fetchStart)),e.disconnectCause&&(this.disconnectCause=e.disconnectCause)}static fromContext(e,t,s,i,r){const n=e.request,a=t&&r?r.status:null,o=r?new K(r.headers):null,c=!!o&&o.isBackendCacheHit(),h=o?o.getPoP():null,u=e.disconnectCause?e.disconnectCause:null,l=n.timings;return new Tt({fromOrigin:t,splitTestId:s,group:i,originStatus:a,timings:l,applicationState:n.getApplicationState(),responseSource:e.source,url:n.originalRequest.url,resultingClientId:n.resultingClientId,cacheHit:e.source===T.SwCache,cdnCacheHit:o?o.getCache():null,cdnBackendTime:o?o.getDuration():null,cdnPoP:h,responseCause:e.cause,backendCacheHit:c,disconnectCause:u})}}class Gt{constructor(){this.state="pending",this.promise=new Promise(e=>{this.resolver=e})}resolve(e){this.state="resolved",this.resolver(e)}}const xt=function(e){return new URL(e.scope).pathname}(self.registration),Ut=new class{constructor(e){this.FP=null,this.FO=le(R,e),this.FP=this.FN()}get(e){return(t=this.FM(),s="baqend-speedkit-store",i=t=>t.get(e),et(t,s,"readonly",i)).then(e=>e.result||null);var t,s,i}set(e,t){return tt(this.FM(),"baqend-speedkit-store",s=>s.put(t,e)&&void 0)}clear(){return Promise.all([(e=this.FM(),t="baqend-speedkit-store",tt(e,t,e=>e.clear()).then(()=>{}))]).then(()=>{});var e,t}disconnect(){return this.FP?this.FP.then(e=>{this.FP=null,e.close()}):Promise.resolve()}FM(){return this.FP||(this.FP=this.FN()),this.FP}FN(){const e=indexedDB.open(this.FO,1);return e.onupgradeneeded=t=>{const{oldVersion:s}=t,{result:i}=e;if(s<1){if(!i)return;try{i.createObjectStore("baqend-speedkit-store")}catch(e){}}},this.openRequest(e).then(e=>(e.onclose=()=>{this.FP=null},e.onerror=()=>{this.FP=null},e.onversionchange=t=>{t.newVersion||(this.FP=null,e.close())},e))}openRequest(e){return new Promise((t,s)=>{e.onsuccess=()=>t(e.result),e.onerror=()=>s(e.error),e.onblocked=()=>s(e.error)})}}(xt),Mt=new class{constructor(e,t,s,i){this.HT=[];const r=le(s,i);this.HR=e,this.HS=t.open(r)}async store(e){if("function"!=typeof e.cachePath)throw new TypeError("Cannot store an object without cachePath method.");const t=e.cachePath(),s=e.toJSON();await this.HR.set(t,s),location.origin}async load(e,t=!1){if("function"!=typeof e.cachePath)throw new TypeError("Cannot store an object without cachePath method.");const s=e.cachePath(),i=await this.HR.get(s);if(null!=i)return void e.fromJSON(i);const r=await this.HS,n=await async function(e,t,s=!1){const i=await e.match(`${location.origin}${t}`);if(!i){const e=`Could not load object "${location.origin}${t}" from cache.`;if(s)throw new Error(e);return null}const r=i.statusText;try{return ue(r)}catch(e){const i=`Object at "${t}" is not in JSON format.`;if(s)throw new Error(i);return r}}(r,s,t);null!==n&&(e.fromJSON(n),await this.HR.set(s,n))}async loadAllWatched(){await this.loadAll(...this.HT)}async loadAll(...e){await Promise.all(e.map(e=>{const t=!!e.cachePath&&"/com.baqend.speedkit.config"===e.cachePath();return this.load(e,t)}))}watch(...e){for(const t of e)this.HT.push(t),t.observe(()=>this.store(t))}}(Ut,caches,R,xt),Lt=new je,Wt=new pe,Jt=new Je(Ut,Lt,Wt),jt=new class{constructor(e){this.F5=new l(10),this.F6=!0,this.F7=!1,this.F8=new l(10),this.F4=e}capture(e,t){var s;t.url,this.F6=!1;const i=this.F4.getRequestKey(e),r=this.F5.getItem(i)||[],n=r.map(e=>({url:e.url,handleStart:e.timings.handleStart})),a=this.F8.getItem(i)||[];a.push({url:e.request.url,referrer:e.referrer});const o=[...n].sort((e,t)=>e.handleStart-t.handleStart);t.redirectList=o,lt(t.responseSource)&&(t.variation=null!==(s=e.getVariation(this.F4))&&void 0!==s?s:void 0),r.push(t),this.F5.putItem(i,r),this.F8.putItem(i,a)}pop(e,t){const s=t||e,i=this.F5.getItem(s);if(!i||!i.length)return null;1===i.length&&this.F5.popItem(s);let r=-1;return i.forEach((t,s)=>{A(t.url)===e&&(r=s)}),-1!==r?i.splice(r,1)[0]:i.pop()}popReferrer(e,t){const s=t||e,i=this.F8.getItem(s);if(!i||!i.length)return null;1===i.length&&this.F8.popItem(s);let r=-1;return i.forEach((t,s)=>{A(t.url)===e&&(r=s)}),-1!==r?i.splice(r,1)[0]:i.pop()}getUnknownNavigateMetadata(e){return new Tt({url:e,resultingClientId:"",fromOrigin:!0,cacheHit:!1,timings:null,cdnCacheHit:null,cdnBackendTime:null,cdnPoP:null,backendCacheHit:!1,originStatus:null,splitTestId:this.F4.getSplitTestId(),group:this.F4.getGroup(),responseSource:T.Origin,responseCause:this.F3(e),applicationState:ze.RUNNING})}F3(e){return this.F6?E.SwBooting:0===this.F5.size()?E.NoNavigate:null===this.F5.getItem(e)?E.NoMatchingNavigate:E.Unknown}setIgnoreNextNavigate(e){this.F7=e}shouldIgnoreNavigate(){return this.F7}}(Jt),Kt=new ce,$t=new ae(Jt),zt=new de(Jt),Vt=new class{constructor(e){this.swCacheKeys=new WeakMap,this.E_=e}async getSWCacheKey(e){if(this.swCacheKeys.has(e))return this.swCacheKeys.get(e);const t=new URL(this.getTransformedKey(e)),s=await this.E_.getQueryParameterStripConditions(e);for(const e of Array.from(t.searchParams.keys())){(this.E_.shouldStripQueryParameter(e,s)||"bqpassthrough"===e||"bqpreloadrequest"===e||"forceAssetResponse"===e)&&t.searchParams.delete(e)}const i=function(e,t,s=!1){return k(e,new URL(A(t.toString(),s)))}(new URL(e.originalRequest.url),t,this.E_.shouldDisableParamSorting(e)).toString();return this.swCacheKeys.set(e,i),i}getTransformedKey(e){const t=this.E_.getCustomDevice(),s=navigator.userAgent||navigator.vendor,i=this.E_.getUAClass(s);return this.E_.getTransformedUrl(e,t||i)}}(Jt),_t=new class{constructor(e,t,s,i){this.assetAPIKeys=new WeakMap,this.Et=e,this.Eu=t,this.Ev=s,this.Ew=i}async getAssetAPIKey(e){if(this.assetAPIKeys.has(e))return this.assetAPIKeys.get(e);const t=await this.Eu.getSWCacheKey(e),s=new URL(t),i=await this.Et.getImageOptions(e),r=e=>{if(!1!==e)for(const t of g(e))if(s.searchParams.has(t)){s.searchParams.delete(t);break}};!1!==i&&(r(i.overrideWidth),r(i.overrideHeight),k(e.originalUrl,s));const n=s.toString();return this.assetAPIKeys.set(e,n),n}async createAssetAPIRequest(e){const t=await this.getAssetAPIKey(e);if(t.startsWith(this.Et.appURL))return new URL(t);const i=new URL(t),r=e.getVariation(this.Et);if(r&&"desktop"!==r){const t=Je.isCustomVariation(r);(!(e.contentType===s.Image)||t)&&i.searchParams.append("bqvariation",r)}this.Et.shouldBypassDeactivation()&&i.searchParams.append("bqpass","1");const n=this.getSpeedKitConfigVersion();n&&i.searchParams.append("bqcv",n);const a=this.getSpeedKitVersion();i.searchParams.append("bqsk",a),this.Ev.appendParamsToAssetUrl(i),await this.Er(e,i),e.prewarm&&i.searchParams.append("bqcache",y.IF_CACHED),e.isNavigateRequest()&&this.Et.getConfigDebugId()&&!i.searchParams.has("debugSpeedKit")&&i.searchParams.append("bqtest","1");const o=this.Et.getAuthToken();o&&i.searchParams.append("bqAuth",o);const c=new URL(`${this.Et.appURL}/asset/${i}`);return e.url,k(e.originalUrl,c)}getSpeedKitConfigVersion(){var e;const t=new URLSearchParams(self.location.search);if(t.has("r"))return t.get("r").substr(0,8);if(t.has("othersw"))try{return null===(e=new URL(t.get("othersw"),self.location.origin).searchParams.get("r"))||void 0===e?void 0:e.substr(0,8)}catch(e){}}getSpeedKitVersion(){return("2.16.2"+(!"2.16.2".endsWith("-0")?"":"-58904b7c\n")).replace(/\n/g,"")}async Er(e,i){const{request:r}=e;if(r.destination,e.contentType!==s.Image)return;if(".svg"===t(i.pathname))return;const n=await this.Et.getImageOptions(e);if(!1!==n&&!1!==n.optimize){const t=new URL(e.originalRequest.url).searchParams,s=v(this.Es(e,i.pathname,t,n));s.length&&(i.searchParams.append("bqoptimize","1"),i.search+=";"+s.join(";"))}}Es(e,t,s,i){const{width:r,dpr:n}=this.Ew,a=(o=e.headers.get("width")||void 0,c=e=>parseInt(e,10),null===o?null:void 0!==o?c(o):void 0);var o,c;return Object.assign(Object.assign({},i),{screenWidth:r,screenDPR:n,clientHintWidth:a,pathname:t,searchParams:s})}}(Jt,Vt,zt,Wt),Yt=new class{constructor(e,t,s,i){this.BW=e,this.BX=t,this.BY=s,this.BZ=le(R,i)}async delete(){await async function(e){const t=(await caches.keys()).filter(e).map(e=>caches.delete(e));await Promise.all(t)}(e=>e.startsWith(this.BZ)&&e.endsWith(this.BW.getClientRevision())),this.BW.getClientRevision()}async loadResponse(e){const t=this.BT(e);return await caches.match(await this.BY.getSWCacheKey(e),{cacheName:t})}async storeResponse(e,t){const s=this.BT(e),i=await this.BY.getSWCacheKey(e);await this.putIntoCache(s,i,t)}async storeOriginResponse(e,t){try{const s=this.BZ+"-origin",i=await caches.open(s),r=e.originalRequest.url;await i.put(r,t)}catch(e){this.BS("cacheOriginError",e)}}async retrieveOriginResponse(e){try{const t=this.BZ+"-origin",s=await caches.open(t),i=e.originalRequest.url;return await s.match(i)}catch(e){this.BS("cacheOriginError",e)}}async putIntoCache(e,t,s){const i=await caches.open(e);this.BW.getClientRevision(),await this.BR(i,t,s.clone())}async BR(e,t,i,r=!1,n=!1){try{await e.put(t,i)}catch(a){return n?this.BS("cacheErrorAfterCleanAssets",a):r?(this.BS("cacheErrorAfterCleanImages",a),await this.BU(Object.keys(s)),this.BR(e,t,i,!0,!0)):(this.BS("cacheError",a),await this.BU([s.Image]),this.BR(e,t,i.clone(),!0,!1))}}BS(e,t){try{Le(this.BX,`${e}:${t.message}`,t.stack||"",Ge.SERVICEWORKER)}catch(e){}}BT(e){if(e.isOfflineResource())return this.BZ+"-offline";const t=e.getVariation(this.BX)||"assets";return`${this.BZ}-${t}-${this.BW.getClientRevision()}`}async BU(e){e.join(", ");const t=(await caches.keys()).filter(e=>new RegExp(`^${R}-.*`).test(e));return(await Promise.all(t.map(async t=>{const s=await caches.open(t);return this.BV(s,e)}))).reduce((e,t)=>e+t,0)}async BV(e,t){const s=(await e.keys()).filter(e=>{const s=r(e);return-1!==t.indexOf(s)});return(await Promise.all(s.map(t=>e.delete(t)))).filter(e=>e).length}}($t,Jt,Vt,xt),Qt=new class{constructor(e,t,s,i){this.loading=!1,this.disconnected=!1,this.shuttingDown=!1,this.reconnectAttempt=0,this.disconnectCause=N.None,this.E7=e,this.E8=t,this.E9=s,this.E$=i}isDisconnected(){return this.disconnected}getDisconnectCause(){return this.disconnectCause}async purge(){this.E7.purge(),await this.E3()}refreshCacheSketch(e=!1){return e||this.E7.isExpired()?this.E3():(this.E7.getDrift(),Promise.resolve())}refreshOnReload(e){e?this.purge():this.refreshCacheSketch(!0),this.E7.updateLastReload()}connect(){this.reconnectAttempt=0,this.disconnected=!1,this.disconnectCause=N.None}async E2(e){this.disconnectCause=e,this.disconnected=!0,this.shuttingDown=!0,await registration.unregister()}disconnect(e=!0,t,s=!1){if(this.disconnected=!0,this.disconnectCause=t,!e||this.shuttingDown)return;if(s)return void U(this.E8.reconnectInterval).then(()=>this.E3());const i=Math.min(this.E8.reconnectInterval*Math.pow(5,this.reconnectAttempt),216e5);this.reconnectAttempt+=1,U(i).then(()=>this.E3())}async E3(){if(navigator.onLine&&!this.loading){this.loading=!0;try{await this.E4()}catch(e){this.disconnect(!0,N.BloomfilterException)}finally{this.loading=!1}}}async E4(){const e=this.E5(),t=await fetch(e);if(t.status!==H.OK)return t.status===H.Forbidden?(t.status,this.E2(N.ServerError)):(t.status,this.disconnect(!0,N.BloomfilterException));const s=function(e=null){if(!e)return new Map;const t=e.split(";").map(e=>e.split("=",2));return new Map(t)}(t.headers.get("baqend-speed-kit"));if(!this.E8.shouldBypassDeactivation()&&"true"===s.get("disabled"))return this.disconnect(!0,N.DashboardDisabled);const i=this.E7.getClientRevision(),r=s.get("cachingId")||null,n=this.E7.getServerRevision(),a=(o=i,c=n,null===(h=r)||null===c||h===c?o:h);var o,c,h;a!==i&&await this.E9.delete(),this.shuttingDown||(this.reconnectAttempt=0,this.disconnected=!1,this.disconnectCause=N.None);const u=Date.now(),l=u+this.E8.refreshInterval,d=u-M(t);await async function(e,t,s){const i=t.headers.get("content-type");if(!i.startsWith("application/json"))throw new Error("Weird server reply: "+i);const r=await t.json();e.clearRevalidationWhitelist(),e.update(Object.assign(Object.assign({},s),{body:r}))}(this.E7,t,{maxAge:l,drift:d,serverRevision:r,clientRevision:a})}E5(){const e={accept:"application/json"},t=new URL(this.E6());return this.E$.appendParamsToBloomFilterUrl(t),t.searchParams.append("BCB","1"),t.searchParams.append("skversion","2.16.2"),t.search=decodeURIComponent(t.search),new Request(t.toString(),{headers:e})}E6(){return this.E8.appURL+"/bloomfilter"}}($t,Jt,Yt,zt),Zt=new class{constructor(){this.requestHandlers=new Set}addHandler(e){this.requestHandlers.add(e)}fetch(e){try{const t=this.requestHandlers.values(),s=this.Gc(e,t);return s instanceof Promise?s.catch(t=>(t.message,V(e,!0,E.Error))):s}catch(t){return t.message,V(e,!0,E.Error)}}Gc(e,t){const{done:s,value:i}=t.next();return s?V(e,!0,E.Error):i.supportsHandling(e)?(i.constructor.name,i.handle(e,e=>(i.constructor.name,this.Gc(e,t)))):this.Gc(e,t)}},Xt=new at(Qt,Jt),es=new class{constructor(){this.BM=new l(10),this.BN=new l(10),this.BO=new l(10)}capture(e,t,i){if(i===s.Style){const s=this.BM.getItem(e)||[];return s.push(t),void this.BM.putItem(e,s)}if(i===s.Image){const s=this.BN.getItem(e)||[];if(this.shouldIgnorePixel(t))return;return s.push(t),void this.BN.putItem(e,s)}const r=this.BO.getItem(e)||[];r.push(t),this.BN.putItem(e,r)}pop(e,t){if(t===s.Style){const t=this.BM.getItem(e);if(t&&t.length>0)return this.BM.popItem(e)}if(t===s.Image){const t=this.BN.getItem(e);if(t&&t.length>0)return this.BN.popItem(e)}const i=this.BO.getItem(e);return i&&i.length>0?this.BO.popItem(e):null}shouldIgnorePixel(e){const t=e.split("?")[1];return!!t&&t.split("&").length>10}},ts=new class extends class{constructor(e=ze.BOOTING,t=""){this[Ve]=new Map,this[_e]=e,this[Ye]=t}get state(){return this[_e]}get reason(){return this[Ye]}waitUntil(...e){if(!e.length)throw new TypeError("You must wait for at least one desired state.");return e.indexOf(this.state)>=0?Promise.resolve(this.state):Promise.race(e.map(e=>this.Bs(e)))}transition(e,t){this[Ye]=t||"";const s=this[_e];return e===s||(this[_e]=e,this.Bt(e)),s}Bs(e){return new Promise(t=>{const s=this[Qe].get(e)||[];s.push(t),this[Qe].set(e,s)})}Bt(e){const t=this[Qe].get(e)||[];this[Qe].delete(e);for(const s of t)s(e)}}{constructor(e){super(ze.BOOTING),this.Ap=e.scope,this.cookieStore=e.cookieStore,this.Aq=e.handlerExecutor,this.Ar=e.options,this.As=e.cache,this.At=e.cacheRevision,this.Au=e.provider,this.Av=e.brokenAssetListener,this.Aw=[],this.A1=null,this.Ax=e.navigateListener,[this.Ay,this.Az,this.A0]=G(navigator.userAgent),this.Ap.addEventListener("fetch",e=>this.Aa(e)),this.Ap.addEventListener("message",e=>e.waitUntil(this.Ag(e))),this.Ap.addEventListener("push",e=>this.AX(e)),this.Ap.addEventListener("notificationclick",e=>this.AY(e)),this.Ap.addEventListener("error",e=>this.Am(e)),this.Ap.addEventListener("unhandledrejection",e=>this.An(e)),this.AW()}run(){this.transition(ze.RUNNING)}fail(e){this.transition(ze.FAILED,e)}install(e){this.Ap.addEventListener("install",t=>{t.waitUntil(this.AS(e))})}async AS(e){if(await this.waitUntil(ze.FAILED,ze.RUNNING),this.state===ze.RUNNING){await this.AT(e),this.Ar.offlinePage&&await this.AV();try{await this.As.loadAllWatched()}catch(e){}}this.skipWaitingUntilActive()}claimClients(){this.Ap.addEventListener("activate",e=>e.waitUntil(this.Ap.clients.claim()))}pushHandler(e){this.Aq.addHandler(e)}pushMessage(e){this.Aw.push(e)}async watch(e,t,s,i,r,n){return this.As.watch(e,t,s,i,r,n)}async load(){try{await this.As.loadAllWatched(),this.Ar.preloadBloomFilter&&this.Au.refreshCacheSketch(),this.run()}catch(e){e.message,this.fail(e.message)}}async skipWaitingUntilActive(){this.Ap.skipWaiting(),await U(500);const e=this.Ap.registration.installing||this.Ap.registration.waiting||this.Ap.registration.active;if(e&&"activated"!==e.state)return this.skipWaitingUntilActive()}async AT(e){const t=[];for(const s of e.getPrecache()){const e=this.AU(s).catch(e=>{});t.push(e)}await Promise.all(t)}async AU(e){const t="string"==typeof e?e:e.href,s="object"==typeof e?e.as:null,i=$e.create(t,{precache:!0,contentType:s});try{(await this.Aq.fetch(i)).source}catch(e){}}async AV(){const e=$e.create(this.Ar.offlinePage,{offlineResource:!0});try{const t=await e.fetch();await this.At.storeResponse(e,t)}catch(e){}}AW(){try{const e=new URL(self.location.href).searchParams.get("othersw");if(!e)return;const t=new URL(decodeURIComponent(e),self.location.href);if(t.host!==self.location.host)return;const s=ServiceWorkerGlobalScope.prototype.addEventListener;ServiceWorkerGlobalScope.prototype.addEventListener=(e,t,i)=>{"fetch"!==e?s(e,t,i):this.A1=t},self.importScripts(t.href),ServiceWorkerGlobalScope.prototype.onfetch=()=>{}}catch(e){}}AX(e){if(!e.data)return;const t=e.data.json();if(t.isBaqend){const{title:s}=t;t.data.isBaqend=t.isBaqend,e.waitUntil(registration.showNotification(s,t))}}AY(e){const{action:t,notification:s}=e;if(!s.data.isBaqend)return;const i=s.data.closeNotification;"close"!==t?(e.waitUntil(this.AZ(s.data.launchUrl)),i&&setTimeout(s.close.bind(s),1e4)):s.close()}async AZ(e){if(e)return clients.openWindow(e);const t=await clients.matchAll();return t.length>0?t[0].focus():clients.openWindow("/")}Aa(e){if(e.request.url,!this.Ai(e.request))return;const t=$e.fromEvent(e,this.state);t.mark("eventStart"),this.state!==ze.FAILED?this.state!==ze.RUNNING?this.Ad(e,t):this.Ab(e,t):this.Ae(t)}Ab(e,t){t.cookies=this.cookieStore.getCookies(location.origin);const s=this.Aq.fetch(t);if(this.Al(Promise.resolve(s)),s instanceof Promise)return e.respondWith(s.then(s=>{if(s.response)return s.request,this.Ac(t,s.response),s.response;if(s.request,t.isDynamicBlockRequest())return s.response;const i=Date.now(),r=this.Ao(e,s.cause);if(r)return r.then(()=>{s.setCustomFetchTimers(i,Date.now())}),r;const n=s.request.fetchOriginal();return this.Ac(t,n),n}));const{request:i,response:r,cause:n}=s;if(r)return void e.respondWith(r);const a=e.respondWith,o=Date.now(),c=this.Ao(e,n);c&&(a.call(e,c),c.then(()=>{s.setCustomFetchTimers(o,Date.now())}))}async Ac(e,t){const s=await t;if(s.status<H.BadRequest)return;const i=e.navigation.clientId;this.Av.capture(i,s.url,e.contentType)}Ad(e,t){const s="Safari"===this.Ay&&16===this.Az&&this.A0>3,i="Safari"===this.Ay&&this.Az>=17;s?t.isSameOrigin()||e.respondWith(t.fetchOriginal()):i&&!t.isSameOrigin()||this.Af(t)||(e.request.url,e.respondWith(this.waitUntil(ze.RUNNING,ze.FAILED).then(e=>{if(e===ze.FAILED)return this.Ae(t),t.fetchOriginal();t.cookies=this.cookieStore.getCookies(location.origin);const s=Promise.resolve(this.Aq.fetch(t));return this.Al(s),s.then(e=>e.response||e.request.fetchOriginal())})))}Ae(e){e.request.url,e.isNavigateRequest()&&(e.request.url,this.load())}Af(e){const t=Xe();if(!t)return!1;try{const{request:s,cookies:i,contentType:r}=e,n=(new He).fromJSON(t.blacklist||[]),a=(new He).fromJSON(t.disabledSites||[]),o=n.matches(s,r,i),c=!!e.isNavigateRequest()&&a.matches(s,r,i);if(!o&&!c)return!1;if(t.appName||t.appDomain){const e=t.appName+".app.baqend.com";Me(`https://${t.appDomain||e}/v1`,{events:[{value:0,label:s.url.toString(),action:"originFetchAfterBooting"}]})}return!0}catch(e){return!1}}async Ag(e){if(await this.waitUntil(ze.RUNNING,ze.FAILED),this.state===ze.FAILED)return this.Ah(e,this.reason);const t=e.source;e.data;for(const s of this.Aw)if(await s.handle(t,e.data,e.ports?e.ports[0]:void 0))return;e.data,await this.Ah(e,"No message handler could handle.")}async Ah(e,t){if(e.ports&&e.ports.length)return"init-cache"===e.data.type?this.load():void e.ports[0].postMessage({reason:t,applicationState:this.state})}Ai(e){try{if(!function(e){return e.url.startsWith("https")}(e))return e.url,!1;if("POST"===e.method&&"navigate"===e.mode&&this.state===ze.BOOTING)return e.url,this.Ax.setIgnoreNextNavigate(!0),!1;if("same-origin"===e.mode)return e.url,!1;if("only-if-cached"===e.cache)return e.url,!1;const t=r(e);if([s.Audio,s.Video,s.PDF].includes(t))return e.url,!1;if(e.headers.has("Range"))return e.url,!1;if(this.Aj(e))return e.url,!1;if(this.Ak(e))return e.url,!1}catch(e){return!1}return!0}Aj(e){const t=new URL(e.url);return!!t.username||!!t.password}Ak(e){const t=new URL(e.url);if(!this.Ay.includes("Safari")||t.pathname.includes("/v1/rum/pi"))return!1;const s=this.Az<15||15===this.Az&&this.A0<4,i="GET"!==e.method&&"HEAD"!==e.method,r=t.origin===location.origin,n=e.headers.has("content-type");if(i&&(!r&&s||!n))return!0;const a=e.headers.has("cache-control");return s&&!i&&!r&&a}async Al(e){const t=await e;if(t.response&&t.source===T.Origin&&t.cause!==E.Fetchlist&&!await t.isSuccessful())try{const e=await t.response;if(!e.status)return;Le(this.Ar,"originError:"+e.status,"",Ge.SERVICEWORKER)}catch(e){}}Am(e){if(!Ze(""+e.error))try{Le(this.Ar,"swError:"+e.message,"",Ge.SERVICEWORKER)}catch(e){}}An(e){if(Ze(""+e.reason))return;const{message:t,stackTrace:s}=e.reason;try{Le(this.Ar,"swRejection:"+t,s,Ge.SERVICEWORKER)}catch(e){}}Ao(e,t){const s=t===E.Blacklist||t===E.NotWhitelisted||t===E.DisabledSites||t===E.NotEnabled||t===E.Disconnected||t===E.Disabled;if(!this.A1||!s)return;let i;Object.defineProperty(e,"respondWith",{configurable:!0,get:()=>e=>{i=e}});try{this.A1(e)}catch(e){}return i}}({cookieStore:Kt,handlerExecutor:Zt,options:Jt,cache:Mt,cacheRevision:Yt,provider:Qt,brokenAssetListener:es,navigateListener:jt,scope:self});const ss=new class{constructor(e,t){this.A4=new l(3),this.A5=new l(3),this.A6=new l(50),this.A7=new l(3),this.A2=e,this.A3=t}popDynamicBlockResponse(e){return this.A4.popItem(e)}setDynamicBlockPreload(e,t){this.A4.putItem(e,t)}fetchAsDynamicBlockRequest(e,t={},s=!1){const i=e.createDynamicBlockRequest(this.A2.sdnSetup,this.A2);if(this.A2.sdnSetup){const s=new Headers(e.originalRequest.headers);s.set("baqend-speed-kit-request","dynamic"),t.headers=s,t.referrer=e.originalRequest.referrer,t.credentials="include"}const r=s?U(0).then(()=>i.fetch(t)):i.fetch(t),n=s?E.DynamicBlockPreload:E.DynamicBlock;return V(i,!0,n,r)}setOriginTimings(e,t,s){this.A5.putItem(e,{requestStart:t,responseStart:s})}popOriginTimings(e){return this.A5.popItem(e)||{responseStart:-1,requestStart:-1}}async waitForDynamicBlocks(e,t=!1){const s=this.A6.getItem(e);if(s)return s.promise;if(t)return;const i=new Gt;return this.A6.putItem(e,i),i.promise}async storeDynamicBlockResponse(e,t){if(this.A2.cachingDisabled||!this.A2.originCachingEnabled||!t.response)return;const s=await t.response,i=s.headers.has("baqend-speed-kit-origin-cache");if(!(s&&s.status<400&&s.status>=200)||i)return;const r=new Headers(s.headers);r.set("baqend-speed-kit-origin-cache","true");const n=await it(s.clone(),{headers:r});e.url,await this.A3.storeOriginResponse(e,n)}async retrieveDynamicBlockResponse(e){const t=e.createDynamicBlockRequest(this.A2.sdnSetup,this.A2);if(this.A2.cachingDisabled||!this.A2.originCachingEnabled)return null;e.url;const s=await this.A3.retrieveOriginResponse(e);return s?V(t,!0,E.DynamicBlockCached,s):null}reportDynamicBlocksApplied(e){const t=this.A6.getItem(e);if(!t){const t=new Gt;return this.A6.putItem(e,t),void t.resolve()}t.resolve()}releaseOldClients(){this.A6.iterate(async(e,t)=>{if(!await clients.get(e)&&"pending"===t.state)return this.reportDynamicBlocksApplied(e)})}setResourceHotness(e,t){this.A7.putItem(e,t)}getResourceHotness(e){return this.A7.getItem(e)}}(Jt,Yt),is=new class{constructor(){this.BK=new l(3),this.BL=new l(3)}addResponse(e){const t=this.BJ(e),s=e.request.navigation.clientId,i=this.BK.getItem(s)||[];t&&i.push(t),this.BK.putItem(s,i)}BJ(e){return e.request.url?{hasFastlyHeaders:!!e.fastlyHeaders,url:e.request.url,originURL:e.request.originalRequest.url,hotness:e.fastlyHeaders?e.fastlyHeaders.getHotness():null,served:lt(e.source),cause:e.cause,source:e.source}:null}getResponses(e,t=!1){return(this.BK.getItem(e)||[]).filter(e=>e.hasFastlyHeaders||t)}clearResponses(e){this.BK.popItem(e)}addBlockedScript(e){const t=e.navigation.clientId,s=this.BL.getItem(t)||[];s.push(e.request.url),this.BL.putItem(t,s)}getBlockedScripts(e){return this.BL.getItem(e)||[]}},rs=new class extends nt{constructor(e){super(),this.requestsInflightToPromiseMap=new Map,this.Gd=e}async handle(e,t){const s=await this.Gd.getSWCacheKey(e),i=this.requestsInflightToPromiseMap.get(s);if(i){const s=await i;return await s.isSuccessful()?s.clone(e,T.Collapsed):t(e)}if(!e.isPrewarmRequest())return t(e);const r=Promise.resolve(t(e));this.requestsInflightToPromiseMap.set(s,r);const n=await r;return n.source!==T.SwCache&&n.cause!==P.CacheHit||this.requestsInflightToPromiseMap.delete(s),n}async removeFromInflightList(e){const t=await this.Gd.getSWCacheKey(e);this.requestsInflightToPromiseMap.delete(t)}supportsHandling(e){return!0}}(Vt),ns=new class{constructor(e,t,s,i,r,n){this.FG=e,this.FH=t,this.FI=s,this.FK=i,this.FJ=r,this.FL=n}async handleFromCache(e){if(!navigator.onLine)return this.FA(e);if(e.isNavigateRequest()&&"reload"===e.request.cache)return e.setResponseCause(D.ReloadCacheMode),null;const t=await this.FC(e);return t?(e.url,this.FB(e,t)):(e.url,e.setResponseCause(D.CacheMiss),null)}async cacheResponse(e,t){return this.FG.cachingDisabled||!t.response?(e.url,await this.FK.removeFromInflightList(e),t):(e.waitUntil(this.FE(e,t)),t)}async hasRunningRefreshJobs(e,t){const s=await this.FJ.getAssetAPIKey(e);return this.FH.isResponseStale(s,e.contentType,t)}async isOnRevalidationWhitelist(e,t){const s=await this.FJ.getAssetAPIKey(e);return this.FH.isOnWhitelist(s,e.contentType,t)}async isInCacheSketch(e){const t=await this.FJ.getAssetAPIKey(e);return this.FH.isInBloomFilter(t)}async trackRevalidation(e){const t=await this.FJ.getAssetAPIKey(e);this.FH.addToRevalidationWhitelist(t,e.contentType)}isRequestImmutable(e,t){const s=this.FF(t);return s&&s.immutable||this.FG.isImmutable(e)}isCacheSketchInvalid(){return this.FH.isInvalid()}isCachedResponseExpired(e){const t=J(e,this.FH.getDrift(),this.FG.expireBrowserCacheByFetchTime);if(null!==t)return t;const s=function(e){const t=e.headers.get("expires");return t?(Date.now(),Date.now()>Date.parse(t)):null}(e);if(null!==s)return s;const i=function(e,t,s){const i=e.headers.get("date");if(i){const i=Date.now(),r=M(e)+s;return Date.now(),t.staleWhileRevalidate,i-r>t.staleWhileRevalidate}return null}(e,this.FG,this.FH.getDrift());return null!==i&&i}async FA(e){e.url;const t=await this.FC(e);return t?_(e,!0,E.Offline,t):(e.setResponseCause(D.CacheMiss),null)}async FB(e,t){if(this.isRequestImmutable(e,t))return e.url,_(e,!0,E.Immutable,t);if(this.isCacheSketchInvalid())return e.setResponseCause(D.InvalidCacheSketch),null;const s=await this.hasRunningRefreshJobs(e,t),i=this.isCachedResponseExpired(t);if(s){e.url;const t=i?D.ExpiredResponse:D.InstantRefresh;return e.setResponseCause(t),null}if(await this.isOnRevalidationWhitelist(e,t))return _(e,!0,P.RevalidationWhitelist,t);if(i)return e.url,e.setResponseCause(D.ExpiredResponse),null;return await this.isInCacheSketch(e)?(e.setResponseCause(D.UrlInCacheSketch),null):(e.url,_(e,!0,P.CacheHit,t))}async FC(e){e.mark("cacheStart");const t=navigator.onLine?await this.FI.loadResponse(e):await this.FD(e);return e.mark("cacheEnd"),t}async FD(e){const t=$e.create(e.request.url,{offlineResource:!0}),s=await this.FI.loadResponse(t);if(s)return s;if(this.FG.useCacheWhenOffline){const t=await this.FI.loadResponse(e);if(t)return t}if(e.isNavigateRequest()&&!e.isPrewarmRequest()&&this.FG.offlinePage){const e=$e.create(this.FG.offlinePage,{offlineResource:!0}),t=await this.FI.loadResponse(e);if(t)return t}return this.FI.loadResponse(e)}async FE(e,t){try{const s=await t.response;s&&Z(t.source)&&s.status<400&&s.status>=200&&206!==s.status&&(await this.FI.storeResponse(e,s.clone()),await this.trackRevalidation(e))}catch(t){e.url,t.message}await this.FK.removeFromInflightList(e)}FF(e){const t=L.fromString(e.headers.get("baqend-sw-control")||"");return t||null}}(Jt,$t,Yt,rs,_t,Qt),as=new class extends nt{async handle(e,t){return this.G4(e)}supportsHandling(e){return e.url.pathname.endsWith("/speed-kit-safe-script.js")}G4(e){return Q(e,"",{status:200,headers:{"content-type":"application/javascript","cache-control":"public, max-age=31536000"}},E.SafeScript)}},os=new class extends nt{constructor(e){super(),this.G8=e}async handle(e,t){const s=e.navigation.clientId;return e.url,await this.G8.waitForDynamicBlocks(s),this.G7(e)}supportsHandling(e){return e.url.pathname.endsWith("/speed-kit-dom-ready.js")}G7(e){return Q(e,"",{status:200,headers:{"content-type":"application/javascript","cache-control":"max-age=0, no-cache, no-store",vary:"*"}},E.Delayed)}}(ss),cs=new class extends nt{constructor(e,t,s,i){super(),this.loadEvents=0,this.Gk=e,this.Gl=t,this.Gm=s,this.Gn=i}get loadEventCount(){return this.loadEvents}trackLoadEvent(){this.loadEvents+=1}handle(e,t){if(this.Gm.releaseOldClients(),this.loadEvents=0,this.Gi(e),this.Gn.navigationPreload&&e.preloadResponse&&!this.Gn.shouldCacheRequest(e))return async function(e){const t=e.preloadResponse;if(!t)throw new TypeError("The request needs to have a Navigation Preload response.");const s=await t;return s?(e.markAsFetched(),new z(T.Origin,E.NavigationPreload,e,Promise.resolve(s))):V(e,!0,E.NavigationPreload)}(e).then(e=>this.Gj(e));if(!e.modifying&&this.Gk.shouldIgnoreNavigate()){this.Gk.setIgnoreNextNavigate(!1);const t=this.Gn.shouldCacheRequest(e)?E.IgnoredAfterPOSTNavigate:e.getResponseCause();return this.Gj(V(e,!0,t))}this.Gk.setIgnoreNextNavigate(e.modifying&&this.Gn.ignoreAfterPostNavigate);const s=t(e);return s instanceof Promise?s.then(e=>this.Gj(e)):this.Gj(s)}supportsHandling(e){return e.isNavigateRequest()}Gi(e){if("reload"!==e.request.cache&&"no-cache"!==e.request.cache)return;const t=!this.Gn.isEnabledOnURL(e.originalRequest.url,e),s=this.Gl.isDisconnected();if(t||s)return;const i="reload"===e.request.cache;e.request.cache,this.Gl.refreshOnReload(i)}Gj(e){const{request:t}=e;lt(e.source);return e}}(jt,Qt,ss,Jt),hs=new class extends nt{constructor(e){super(),this.Gq=e}supportsHandling(e){return!e.isNavigateRequest()}handle(e,t){const s=t(e);return this.Gp(e),s instanceof Promise?s.then(e=>this.Go(e)):this.Go(s)}Go(e){const{request:t}=e;lt(e.source);return this.Gq.addResponse(e),e}Gp(e){let t=!1;e.request.headers.forEach((e,s)=>{"intervention"===s.toLowerCase()&&"<https://www.chromestatus.com/feature/5718547946799104>"===e&&(t=!0)}),t&&(e.request.url,this.Gq.addBlockedScript(e))}}(is),us=new class{constructor(){this.BP=new l(10),this.BQ=new l(10)}markClientAsReady(e,t){this.BQ.putItem(e,t);const s=this.BP.popItem(e);s&&s.forEach(e=>e(t))}async sendMessageToClient(e,t,s){const i=this.BQ.getItem(e);i?i.postMessage({type:t,payload:s}):new Promise(t=>{const s=this.BP.getItem(e)||[];s.push(t),this.BP.putItem(e,s)}).then(e=>{e.postMessage({type:t,payload:s})})}},ls=new class extends nt{constructor(e,t,s,i){super(),this.G0=e,this.G2=t,this.G1=s,this.G3=i}handle(e,t){if(!this.G0.shouldPreloadDynamicBlocks(e))return e.waitUntil(this.Gz(e)),t(e);const s=this.Gy(e),i=this.Gx(s,this.G0.delayRacedOrigin),r=this.Gx(t(e));return this.Gr(e,r,i),this.Gs(e,i,r)}supportsHandling(e){return e.isNavigateRequest()&&!e.isPrewarmRequest()}Gr(e,t,s){e.waitUntil(Promise.all([t,s.then(t=>{const s=this.G0.getRequestKey(e),i=t.request.timings,r=i&&i.fetchStart?i.fetchStart:-1,n=i&&i.fetchEnd?i.fetchEnd:-1;return this.G2.setOriginTimings(s,r,n),this.Gw()})]))}Gs(e,t,s){const i=[s];return e.url.searchParams.get("forceAssetResponse")||i.push(t),Promise.race(i).then(async e=>{var i;const r=e.source!==T.Origin,n=await e.isSuccessful(),a=await e.isRedirect();if(this.Gv(t,s),a||this.Gu(s,t),r&&n&&!a){const t=null===(i=null==e?void 0:e.fastlyHeaders)||void 0===i?void 0:i.getHotness(),s=this.G0.getRequestKey(e.request,this.G0.shouldDisableParamSorting(e.request));return"number"==typeof t&&this.G2.setResourceHotness(s,t),e}return t.then(t=>{n||(t.cause=e.cause),a&&(t.cause=E.Redirect)}),t})}Gt(e){const t=e.request.timings;return t&&t.fetchEnd&&t.fetchStart?t.fetchEnd-t.fetchStart:null}async Gu(e,t){var s;const i=await e,r=await t,n={assetSource:i.source===T.Origin?T.AssetAPI:i.source,assetCause:i.cause,variation:null!==(s=i.request.getVariation(this.G0))&&void 0!==s?s:void 0},a=this.Gt(i);a&&(n.assetTTFB=a);const o=this.Gt(r);o&&(n.originTTFB=o);const c=i.fastlyHeaders?i.fastlyHeaders.getPoP():null;c&&(n.cdnPoP=c);const h=i.request.navigation.clientId,u=h&&this.G0.supportsClientId()?h:A(i.request.originalRequest.url.toString());return this.G3.sendMessageToClient(u,"asset-response-timings",n)}async Gv(e,t){const s=await t;if(!await s.isServerError())return;const i=await e;await i.isServerError()||this.G1.disconnect(N.ServerError)}async Gw(){if(this.G0.navigationPreload)return U(6e4)}async Gx(e,t=0){const s=await e;return Date.now(),await s.response,t&&await U(t),s}Gy(e){let t;t=this.G0.navigationPreload&&e.preloadResponse?e.preloadResponse.then(t=>t&&t.url===e.originalRequest.url?V(e,!0,E.DynamicBlockPreload,t):this.G2.fetchAsDynamicBlockRequest(e,{},!0)):Promise.resolve(this.G2.fetchAsDynamicBlockRequest(e,{},!0));const s=this.G0.getRequestKey(e,this.G0.shouldDisableParamSorting(e));return this.G2.setDynamicBlockPreload(s,t),t}async Gz(e){if(await this.G0.shouldFetchOrigin(e.request)){await U(2e3);try{const t={},s=e.createDynamicBlockRequest(!1,this.G0);if(this.G0.sdnSetup){const s=new Headers(e.originalRequest.headers);s.set("baqend-speed-kit-request","dynamic"),t.headers=s}await s.fetch(t)}catch(e){e.stack}}}}(Jt,ss,Xt,us),ds=new class extends nt{constructor(e,t,s,i,r,n){super(),this.BB=e,this.BC=t,this.BD=s,this.BE=i,this.BF=r,this.BG=n}handle(e,t){this.BA(e);const s=t(e);return e.isNavigateRequest()?s instanceof Promise?s.then(t=>this.A9(e,t)):this.A9(e,s):s}supportsHandling(e){return!e.isPrewarmRequest()}A8(e,t){const s=e.request.destination;if(!this.BG.shouldCountIFrameNavigation()&&["embed","frame","iframe"].includes(s))return;if(this.BE.isDisconnected())return void this.BF.incrementDisconnectedCount(e,t);Ue(this.BG.isEnabledOnSite(e),s=>{s?this.BF.incrementCount(e,t):this.BF.incrementDisabledCount(e,t)})}A9(e,t){return this.BE.getDisconnectCause()&&(t.disconnectCause=this.BE.getDisconnectCause()),this.A$(e,t)}A$(e,t){return t.waitUntil(this.A_(e,t)),t}async A_(e,t){const s=await t.response,i=this.BG.supportsClientId(e);if(s&&await t.isRedirect()&&!i)return;const r=Tt.fromContext(t,t.source===T.Origin,this.BG.getSplitTestId(),this.BG.getGroup(),s);this.BB.capture(e,r),t.setNavigateMetadata(r)}BA(e){const t=e.isNavigateRequest(),s=this.BG.supportsClientId(e);!t&&s||t&&!s||this.A8(e,e.resultingClientId||e.navigation.clientId)}}(jt,cs,ss,Qt,zt,Jt);ts.pushHandler(ds),ts.pushHandler(new class extends nt{constructor(e){super(),this.GP=e}supportsHandling(e){return e.isNavigateRequest()||e.url.href.includes("/v1/speedkit/install.js")}handle(e,t){const s=new URLSearchParams(e.url.search).get("debugSpeedKit"),i=s||this.GP.getConfigDebugId();if(!i)return t(e);if(e.isNavigateRequest()){const r="reset"===s;return this.GP.setConfigDebugId(r?null:i),t(e)}return t(this.GO(e,i))}GO(e,t){const s=e.url;return s.searchParams.append("r",t),e.url=s,e}}(Jt)),ts.pushHandler(new class extends nt{constructor(e,t){super(),this.Gg=e,this.Gh=t}handle(e,t){e.mark(this.Gg);const s=t(e);return s instanceof Promise||s.response instanceof Promise?(e.waitUntil(this.Gf(s)),s):(s.request.mark(this.Gh),s)}supportsHandling(e){return!0}async Gf(e){Ue(e,async e=>{await e.response,e.request.mark(this.Gh)})}}("handleStart","handleEnd")),ts.pushHandler(cs),ts.pushHandler(hs),ts.pushHandler(as),ts.pushHandler(os),ts.pushHandler(new class extends nt{constructor(e,t){super(),this.G$=t,this.G_=e}handle(e,t){e.url;const s=e.fetch();return new z(T.Origin,E.Fetchlist,e,s)}supportsHandling(e){return!(!this.G$.shouldBypassDeactivation()&&this.G_.isDisconnected())&&(this.G$.shouldEnsureFetch(e)&&!e.isPrewarmRequest())}}(Qt,Jt)),ts.pushHandler(new ut(Jt,ss)),ts.pushHandler(new class extends nt{constructor(e,t){super(),this.GV=e,this.GW=t}handle(e,t){e.url;const s=V(e,!0,E.Disconnected);return s.setDisconnectCause(this.GV.getDisconnectCause()),s}supportsHandling(e){return navigator.onLine&&this.GV.isDisconnected()&&!this.GW.shouldBypassDeactivation()}}(Qt,Jt)),ts.pushHandler(new class extends nt{constructor(e){super(),this.GJ=e}handle(e,t){return e.url,V(e,!0,e.getResponseCause())}supportsHandling(e){e.mark("blacklistHandler");const[t,s]=this.GJ.browserInfo,i=!e.isSameOrigin()&&"Safari"===t&&s>=17;return!this.GJ.shouldCacheRequest(e)&&(i||!this.GJ.isTrackingRequest(e)&&!this.GJ.shouldDelayRequest(e))}}(Jt)),ts.pushHandler(new class extends nt{constructor(e,t){super(),this.GT=e,this.GU=t}handle(e,t){return!e.isNavigateRequest()&&e.isPrewarmRequest()?t(e):Ue(this.GT.isEnabledOnSite(e),s=>{if(s)return t(e);const i=V(e,!0,e.getResponseCause());return this.GT.enforceDisabledPages||e.isNavigateRequest()?i:this.GU.handleFromCache(e).then(e=>e||i)})}supportsHandling(e){return e.mark("disabledPageHandler"),!0}}(Jt,ns)),ts.pushHandler(new class extends nt{constructor(e){super(),this.GK=e}handle(e,t){e.url;const s=new Response(null,{status:H.Forbidden,statusText:"(blocked:speedkit)"});return new z(T.Generated,E.Blocked,e,Promise.resolve(s))}supportsHandling(e){return this.GK.shouldBlockRequest(e)}}(Jt)),ts.pushHandler(new class extends nt{constructor(e,t){super(),this.HA=e,this.HB=t}async handle(e,t){e.url;const s=t(e),i=await s;let r=await i.response;r||(r=await e.fetchOriginal());const n=new Headers(r.headers);n.set("timing-allow-origin","*"),n.set("cache-control","max-age=0, no-cache, no-store"),n.set("vary","*");const a=it(r.clone(),{headers:n});return await this.HB.waitForDynamicBlocks(e.navigation.clientId,!0),new z(i.source,i.cause,e,a)}supportsHandling(e){return this.HA.shouldDefer(e)}}(Jt,ss)),ts.pushHandler(new ht(Jt)),ts.pushHandler(new class extends nt{constructor(e){super(),this.HC=e}handle(e,t){return Promise.resolve().then(async()=>await this.HC.isEnabledOnSite(e)?(e.fetchOriginal(),e.url,e.contentType===s.Image?ct(e,{headers:{"content-type":"image/gif"},status:200}):e.contentType===s.Script?pt(e,{headers:{"content-type":"text/javascript"},status:200}):pt(e)):t(e))}supportsHandling(e){return this.HC.isTrackingRequest(e)}}(Jt)),ts.pushHandler(new class extends nt{constructor(e){super(),this.Ge=e}handle(e,t){return e.url,e.waitUntil(this.Ge.refreshCacheSketch()),t(e)}supportsHandling(e){return!0}}(Qt)),ts.pushHandler(ls),ts.pushHandler(rs),ts.pushHandler(new class extends nt{constructor(){super(...arguments),this.G9=new dt}async handle(e,t){const s=t(e),i=await s,r=await i.response;return lt(i.source)&&r&&$(r)?this.resolvePossibleLoop(e,i,r):(this.G9.clear(),i)}resolvePossibleLoop(e,t,s){if(this.G9.addRedirect(e.originalRequest,s)){const t=e.fetchOriginal();return t.then(()=>this.G9.clear()),e.markAsFetched(),new z(T.Origin,E.LoopDetected,e,t)}return t}supportsHandling(e){return e.isNavigateRequest()}}),ts.pushHandler(new class extends nt{constructor(e,t){super(),this.G5=t,this.G6=e}async handle(e,t){const s=await this.G6.handleFromCache(e);if(s)return s;e.url;const i=await t(e);if(!navigator.onLine&&i.cause===E.Error){const t=await this.G6.handleFromCache(e);if(t)return t}return this.G6.cacheResponse(e,i)}supportsHandling(e){return!e.isNavigateRequest()||!this.G5.getConfigDebugId()}}(ns,Jt)),ts.pushHandler(new class extends nt{constructor(e){super(),this.GM=e;const[t,s]=G(navigator.userAgent);this.GN=!("Chrome"===t&&s<64||"Firefox"===t&&s<61)}async handle(e,t){const s=await this.GL(e);return s?V(e,!0,P.CacheHit,s):t(e)}supportsHandling(e){return this.GN&&e.isSameOrigin()&&!e.isNavigateRequest()&&!e.isPrecache()}async GL(e){const t=e.originalRequest.url;try{const s=await fetch(t,{mode:"same-origin",cache:"only-if-cached",headers:e.originalRequest.headers});if(!this.GM.isCachedResponseExpired(s)&&s.status<H.BadRequest)return s}catch(e){}return null}}(ns)),ts.pushHandler(new class extends nt{constructor(e,t,s){super(),this.GF=e,this.GG=t,this.GH=s,this.GI=new at(t,e)}async handle(e){e.url=await this.GH.createAssetAPIRequest(e);const t=await this.F9(e);return t.status===H.BaqendRedirect?this.F$(e,t):t.status===H.TimeoutError?this.GD(e,t):t.status>=H.BadRequest||t.status<H.OK?this.F_(e,t):206===t.status?this.GE(e,t):this.GB(e,t)}supportsHandling(e){return!0}async F9(e){try{e.headers=this.GC(e),e.mode=this.GA(e),e.cache="no-cache",e.url,e.request.cache;const t=e.originalRequest.referrer;e.contentType===s.Image&&this.GF.omitImageCredentials&&(e.credentials=ot.Omit);const i=e.fetch({referrer:t}),r=e.contentType!==s.Navigate?await Promise.race([i,U(1e4)]):await i;return r||new Response(null,{status:H.TimeoutError})}catch(e){const t=e instanceof TypeError?H.FetchTypeError:H.BadGateway;return new Response(e.message,{status:t})}}async F$(e,t){const s=rt(new URL(e.originalRequest.url),t.headers.get("location")),i=await this.GF.appendStrippedParams(new URL(s),e),r=$e.create(i);if(!this.GF.shouldCacheRequest(r)){if(e.url,r.url,this.GF.shouldPreloadDynamicBlocks(e))return V(e,!0,E.Redirect);const t=e.fetchOriginal();return V(e,!1,E.Redirect,t)}const n=new K(t.headers),a=n.getResponseSource(),o=e.getResponseCause(),c=new Headers(t.headers);return c.set("location",i),Q(e,null,{headers:c,status:H.MovedTemporarily,statusText:t.statusText},o,a,n)}async F_(e,t){if(e.isPrewarmRequest())return Y(e,!0,E.Error);if(t.status>=H.InternalServerError)return this.GI.handleInternalServerError(e);t.status;const s=j(t.headers.get("server-timing")).errorCause,i=j(t.headers.get("server-timing")).errorcode,r=i?"-"+i.desc:"",n=`${(null==s?void 0:s.desc)||E.ClientError}${r}`;if(e.isNavigateRequest()&&this.GF.shouldPreloadDynamicBlocks(e))return V(e,!0,n);const a=e.fetchOriginal();return V(e,!1,n,a)}GA(e){return e.isSameOrigin()?"same-origin":e.request.headers.has("origin")||e.request.url.startsWith(this.GF.appURL.toLowerCase())?"cors":"no-cors"}GB(e,t){return c(e,this.GF)?(e.url,Y(e,!1,e.getResponseCause(),t)):it(t).then(t=>(Object.defineProperty(t,"url",{value:e.originalRequest.url.toString()}),e.url,Y(e,!1,e.getResponseCause(),t)))}GC(e){const t=new Headers;return e.headers.forEach((e,s)=>{new Blob([e]).size<=128&&t.append(s,e)}),t}GD(e,t){return t.status,this.GI.disconnect(N.AssetTimeout),V(e,!0,E.Timeout)}GE(e,t){return t.status,V(e,!0,E.PartialResponse)}}(Jt,Qt,_t)),ts.pushMessage(new ft(Jt)),ts.pushMessage(new yt(jt,Jt,us)),ts.pushMessage(new mt(Qt)),ts.pushMessage(new wt(Qt)),ts.pushMessage(new vt(Qt)),ts.pushMessage(new bt(Jt,Yt,Qt,Kt,Zt,us)),ts.pushMessage(new At(Qt,cs,Kt)),ts.pushMessage(new kt(ss)),ts.pushMessage(new It(Jt)),ts.pushMessage(new qt(ss,Jt)),ts.pushMessage(new Ot(Jt)),ts.pushMessage(new Ft),ts.pushMessage(new Ht(is)),ts.pushMessage(new Nt(es)),ts.pushMessage(new Et(Yt)),ts.pushMessage(new Dt(jt,Jt)),ts.pushMessage(new Pt(is)),ts.pushMessage(new Bt(Jt)),ts.install(Jt),ts.claimClients(),ts.watch(Lt,Jt,Kt,$t,zt,Wt).then(()=>ts.load());