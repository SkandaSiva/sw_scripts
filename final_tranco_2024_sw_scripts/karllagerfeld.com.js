var NS="IMAGE",SEPARATOR="|",VERSION=2887856;function buildKey(e){return NS+SEPARATOR+e+SEPARATOR+VERSION}function parseKey(e){var n=e.split(SEPARATOR);return{ns:n[0],key:n[1],ver:parseInt(n[2],10)}}function purgeExpiredRecords(e){return e.keys().then((function(n){return Promise.all(n.map((function(n){var t=parseKey(n);if(t.ns===NS&&t.ver!==VERSION)return e.delete(n)})))}))}function proxyRequest(e,n){var t=buildKey(n.url);return e.open(t).then((function(e){return e.match(n).then((function(t){return t||fetch(n.clone()).then((function(t){if("opaque"!==t.type&&!1===t.ok)throw new Error("Resource not available");return e.put(n,t.clone()),t})).catch((function(){console.error("Failed to fetch",n.url)}))}))}))}self.addEventListener("install",(function(e){e.waitUntil(self.skipWaiting())})),self.addEventListener("activate",(function(e){e.waitUntil(purgeExpiredRecords(caches))})),self.addEventListener("fetch",(function(e){var n=e.request;"GET"===n.method&&n.url.match(/.(jpe?g.*|png.*|gif.*|svg.*|webp.*|woff.*|css)$/)&&e.respondWith(proxyRequest(caches,n))}));