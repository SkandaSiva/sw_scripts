!function(){let e,t,n,r;function o(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){n(e);return}s.done?t(c):Promise.resolve(c).then(r,o)}function i(e){this.wrapped=e}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}function s(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}function c(e){var t,n;function r(t,n){try{var a=e[t](n),s=a.value,c=s instanceof i;Promise.resolve(c?s.wrapped:s).then(function(e){if(c){r("next",e);return}o(a.done?"return":"normal",e)},function(e){r("throw",e)})}catch(e){o("throw",e)}}function o(e,o){switch(e){case"return":t.resolve({value:o,done:!0});break;case"throw":t.reject(o);break;default:t.resolve({value:o,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(e,o){return new Promise(function(i,a){var s={key:e,arg:o,resolve:i,reject:a,next:null};n?n=n.next=s:(t=n=s,r(e,o))})},"function"!=typeof e.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(c.prototype[Symbol.asyncIterator]=function(){return this}),c.prototype.next=function(e){return this._invoke("next",e)},c.prototype.throw=function(e){return this._invoke("throw",e)},c.prototype.return=function(e){return this._invoke("return",e)};let u=(e,t)=>t.some(t=>e instanceof t),l=new WeakMap,f=new WeakMap,d=new WeakMap,p={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return l.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return h(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function h(n){var r;if(n instanceof IDBRequest)return function(e){let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener("success",o),e.removeEventListener("error",i)},o=()=>{t(h(e.result)),r()},i=()=>{n(e.error),r()};e.addEventListener("success",o),e.addEventListener("error",i)});return d.set(t,e),t}(n);if(f.has(n))return f.get(n);let o="function"==typeof(r=n)?(t||(t=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(r)?function(...e){return r.apply(v(this),e),h(this.request)}:function(...e){return h(r.apply(v(this),e))}:(r instanceof IDBTransaction&&function(e){if(l.has(e))return;let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",i),e.removeEventListener("abort",i)},o=()=>{t(),r()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",o),e.addEventListener("error",i),e.addEventListener("abort",i)});l.set(e,t)}(r),u(r,e||(e=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])))?new Proxy(r,p):r;return o!==n&&(f.set(n,o),d.set(o,n)),o}let v=e=>d.get(e),g=["get","getKey","getAll","getAllKeys","count"],m=["put","add","delete","clear"],b=new Map;function y(e,t){var n,r;if(!(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t))return;if(b.get(t))return b.get(t);let i=t.replace(/FromIndex$/,""),a=t!==i,s=m.includes(i);if(!(i in(a?IDBIndex:IDBObjectStore).prototype)||!(s||g.includes(i)))return;let c=(n=function*(e,...t){let n=this.transaction(e,s?"readwrite":"readonly"),r=n.store;return a&&(r=r.index(t.shift())),(yield Promise.all([r[i](...t),s&&n.done]))[0]},r=function(){var e=this,t=arguments;return new Promise(function(r,i){var a=n.apply(e,t);function s(e){o(a,r,i,s,c,"next",e)}function c(e){o(a,r,i,s,c,"throw",e)}s(void 0)})},function(e){return r.apply(this,arguments)});return b.set(t,c),c}p=s(a({},n=p),{get:(e,t,r)=>y(e,t)||n.get(e,t,r),has:(e,t)=>!!y(e,t)||n.has(e,t)});let w=["continue","continuePrimaryKey","advance"],P={},j=new WeakMap,I=new WeakMap,D={get(e,t){if(!w.includes(t))return e[t];let n=P[t];return n||(n=P[t]=function(...e){j.set(this,I.get(this)[t](...e))}),n}};function O(){return k.apply(this,arguments)}function k(){var e;return e=function*(...e){let t=this;if(t instanceof IDBCursor||(t=yield new i(t.openCursor(...e))),!t)return;let n=new Proxy(t,D);for(I.set(n,t),d.set(n,v(t));t;)yield n,t=yield new i(j.get(n)||t.continue()),j.delete(n)},(k=function(){return new c(e.apply(this,arguments))}).apply(this,arguments)}function E(e,t){return t===Symbol.asyncIterator&&u(e,[IDBIndex,IDBObjectStore,IDBCursor])||"iterate"===t&&u(e,[IDBIndex,IDBObjectStore])}p=s(a({},r=p),{get:(e,t,n)=>E(e,t)?O:r.get(e,t,n),has:(e,t)=>E(e,t)||r.has(e,t)}),function(){var e="static-v4",t="pages",n=[e,t],r="/offline/",o="/img/offline-image-placeholder.svg",i=["/",r],a=location.origin.replace(/www/,"pics"),s=["/fonts/cbsans/cbsans-regular.woff2","/fonts/cbsans/cbsans-bold.woff2","/fonts/cbsans/cbsans-italic.woff2","/fonts/cbsans/cbsans-bolditalic.woff2","/img/logo.svg","/img/offline.svg",o],c="sticky-offline-pages",u=function(e,t,{blocked:n,upgrade:r,blocking:o,terminated:i}={}){let a=indexedDB.open(e,2),s=h(a);return r&&a.addEventListener("upgradeneeded",e=>{r(h(a.result),e.oldVersion,e.newVersion,h(a.transaction),e)}),n&&a.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),s.then(e=>{i&&e.addEventListener("close",()=>i()),o&&e.addEventListener("versionchange",e=>o(e.oldVersion,e.newVersion,e))}).catch(()=>{}),s}("computerbase",0,{upgrade(e){e.objectStoreNames.contains(c)||e.createObjectStore(c,{keyPath:"url"})}}),l="same-origin"===new Request("/").credentials&&!b();function f(e,t,n){return"navigate"===e.mode?caches.match(r):n?Response.redirect(n,303):Response.error()}function d(e,n){var r=new Request(e,{credentials:"include"});return caches.open(t).then(function(t){return t.add(e).then(function(){return t.match(e)}).then(function(e){return e.text()}).then(function(e){var o=p(e);return t.addAll(o).then(function(){return n?g(r.url,o):null})})})}function p(e){return(e.match(/\/(css|js)\/[0-9a-z-]+\.[0-9a-f]+\.\1/g)||[]).filter(v).map(function(e){return location.origin+e})}function v(e,t,n){return n.indexOf(e)===t}function g(e,t){return u.then(function(n){var r=n.transaction(c,"readwrite");return r.objectStore(c).put({url:e,assets:t}),r.done})}function m(e){var t=navigator.userAgent.match(/Chrome\/(\d+)/);return null!==t&&t[1]<e}function b(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}m(68)&&(l=!1),self.addEventListener("install",function(t){t.waitUntil((l?caches.open(e).then(function(e){return e.addAll(s)}):Promise.resolve()).then(function(){return l?Promise.all(i.map(function(e){return d(e,!0)})):Promise.resolve()}).then(function(){return self.skipWaiting()}))}),self.addEventListener("activate",function(e){e.waitUntil(caches.keys().then(function(e){return Promise.all(e.filter(function(e){return!n.includes(e)}).map(function(e){return caches.delete(e)}))}).then(function(){var e=self.registration.navigationPreload;return(!l||m(72)||b())&&(e=null),e?e.enable():null}).then(function(){return self.clients.claim()}))}),l&&self.addEventListener("fetch",function(e){var n=function(e){var n,r,i,s=e.request,l=new URL(s.url);if("GET"!==s.method)return null;if(l.origin===location.origin){if(!/^\/(api|basecms|forum|(css|img|js)\/(ads|backend|flags))\//.test(l.pathname))return n=e.request,Promise.resolve(e.preloadResponse).then(function(e){return e||fetch(n)}).then(function(r){return e.waitUntil(function(e,n){if(!n.ok)return null;var r,o=n.clone(),i=caches.open(t).then(function(t){return t.put(e,o)});return"navigate"===e.mode&&i.then((r=n.clone(),u.then(function(e){return e.transaction(c).objectStore(c).count(r.url)}).then(function(e){return 1!==e?null:r.text().then(function(e){return g(r.url,p(e))})}))),i}(n,r)),r}).catch(function(t){return caches.match(n).then(function(r){var o;return"navigate"===n.mode&&e.waitUntil((o="fetched-from-cache",new Promise(function(e){setTimeout(e,100)}).then(function(){return self.clients.get(e.resultingClientId)}).then(function(e){return e?e.postMessage(o):null}))),r||f(n,t)})});if(e.preloadResponse)return r=e.request,Promise.resolve(e.preloadResponse).then(function(e){return e||fetch(r)})}return l.origin===a?(i=e.request,Promise.resolve(e.preloadResponse).then(function(e){return e||fetch(i)}).catch(function(e){return f(i,e,o)})):null}(e);n&&e.respondWith(n)}),self.addEventListener("message",function(e){var n=e.data,r=n.command;"trim-caches"===r?u.then(function(e){return e.transaction(c).objectStore(c).getAll()}).then(function(e){return e.reduce(function(e,t){return e.concat([t.url],t.assets)},[])}).then(function(e){(function(e,t,n){caches.open(e).then(function(e){return e.keys().then(function(t){for(var r=[];t.length>100;){var o=t.shift();n.includes(o.url)||r.push(e.delete(o))}return Promise.all(r)})})})(t,0,e)}):"preload-page"===r&&d(n.url,n.sticky)}),self.addEventListener("push",function(e){var t=e.data?e.data.json():{},n=self.registration.showNotification(t.title||"ComputerBase",{body:t.body||"Es gibt neue Inhalte.",icon:"/img/icon-192.png",badge:"/img/notification-badge-72.png",image:t.image,timestamp:t.timestamp||Date.now(),data:{url:t.url},tag:t.tag||""});l&&t.preloadUrls&&(n=n.then(function(){Promise.all(t.preloadUrls.map(function(e){return d(e)}))})),e.waitUntil(n)}),self.addEventListener("notificationclick",function(e){var t=e.notification;t.close();var n=t.data&&t.data.url||"/",r=self.clients.openWindow(n);e.waitUntil(r)})}()}();