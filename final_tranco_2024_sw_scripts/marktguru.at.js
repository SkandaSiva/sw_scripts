(()=>{"use strict";var e={offline:"offline-v".concat(3)},t="assets/offline.html";self.addEventListener("install",(function(n){n.waitUntil(fetch(function(e){var t=new Request(e,{cache:"reload"});if("cache"in t)return t;var n=new URL(e,self.location.href);return n.search+="".concat(n.search?"&":"","cachebust=").concat(Date.now()),new Request(n)}(t)).then((function(n){return caches.open(e.offline).then((function(e){return e.put(t,n)}))})))})),self.addEventListener("activate",(function(t){var n=Object.keys(e).map((function(t){return e[t]}));t.waitUntil(caches.keys().then((function(e){return Promise.all(e.map((function(e){if(-1===n.indexOf(e))return caches.delete(e)})))})))})),self.addEventListener("fetch",(function(e){if(("navigate"===e.request.mode||"GET"===e.request.method&&e.request.headers.get("accept").includes("text/html"))&&e.respondWith(fetch(e.request).catch((function(){return caches.match(t)}))),/\.jpg$|.jpeg$/.test(e.request.url)){var n=!1;if(e.request.headers.has("accept")&&(n=e.request.headers.get("accept").includes("webp")),n){var c=e.request.clone(),r="".concat(c.url.substr(0,c.url.lastIndexOf(".")),".webp");e.respondWith(fetch(r,{mode:"no-cors"}))}}}))})();