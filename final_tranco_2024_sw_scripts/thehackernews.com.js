var CACHE="image-cache-v19",IMAGE_REGEX=/\.(jpe?g|png|gif|woff2?)$/,PRECACHE=["/downloads/favicon.ico","/manifest.json"],MAX_ITEMS=500;function limitCache(n){return n.keys().then(function(e){if(e.length>MAX_ITEMS)return n.delete(e[0]).then(function(){return limitCache(n)})})}self.addEventListener("install",function(e){e.waitUntil(caches.open(CACHE).then(function(e){return e.addAll(PRECACHE)}).then(function(){return self.skipWaiting()}))}),self.addEventListener("fetch",function(t){"GET"===t.request.method&&IMAGE_REGEX.test(t.request.url)&&t.respondWith(caches.open(CACHE).then(function(n){return n.match(t.request).then(function(e){return e||fetch(t.request).then(function(e){return n.put(t.request,e.clone()),limitCache(n),e})})}))}),self.addEventListener("activate",function(e){e.waitUntil(caches.keys().then(function(e){return Promise.all(e.map(function(e){if(e!==CACHE)return caches.delete(e)}))}).then(function(){return clients.claim()}))});