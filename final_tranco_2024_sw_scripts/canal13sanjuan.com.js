(()=>{"use strict";var t={874:(t,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.default=null;(async()=>{let t=await caches.open("TadevelSWCache"),a=await t.keys();await Promise.all(a.map((a=>t.delete(a))))})()},222:(t,a)=>{let e;Object.defineProperty(a,"__esModule",{value:!0}),a.default=null,self.addEventListener("push",(async function(t){try{let a=t.data.json(),e=a.fcmOptions&&a.fcmOptions.analyticsLabel,i=a.data.tag;i&&await t.waitUntil(self.registration.getNotifications({tag:i}).then((t=>{for(let a of t)a.close()}))),!a.notification&&a.data&&a.data.tadevel_notification&&await t.waitUntil(Promise.all([self.registration.showNotification(a.data.title,{...a.data,...a.data.actions&&{actions:JSON.parse(a.data.actions)},tag:i,data:{...a.data,FCM_MSG:a}}),...e?[fetch(`/api/v1/push-notification/${e}/track?event=show`,{method:"POST"}).catch((t=>{}))]:[],...a.data.deviceInstanceId?[fetch(`/api/v1/device-instance/${a.data.deviceInstanceId}/track?event=show`,{method:"POST"}).catch((t=>{}))]:[]]).catch((t=>{console.error(t),fetch(`/api/v1/push-notification/${e}/track?event=error`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:t&&t.message,stack:t&&t.stack})})})))}catch(t){console.error(t),fetch("/api/v1/push-notification/error",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:t&&t.message,stack:t&&t.stack})})}})),self.addEventListener("notificationclick",(async function(t){let a=t.notification.data?.FCM_MSG?.fcmOptions.analyticsLabel;e=a,t.action?/^https?:/.test(t.action)&&await t.waitUntil(Promise.all([self.clients.openWindow(t.action),...a?[fetch(`/api/v1/push-notification/${a}/track?event=action`,{method:"POST"}).catch((t=>{}))]:[],...t.notification.data.deviceInstanceId?[fetch(`/api/v1/device-instance/${t.notification.data.deviceInstanceId}/track?event=action`,{method:"POST"}).catch((t=>{}))]:[]])):await t.waitUntil(Promise.all([self.clients.openWindow(t.notification.data.FCM_MSG.fcmOptions.link),...a?[fetch(`/api/v1/push-notification/${a}/track?event=click`,{method:"POST"}).catch((t=>{}))]:[],...t.notification.data.deviceInstanceId?[fetch(`/api/v1/device-instance/${t.notification.data.deviceInstanceId}/track?event=click`,{method:"POST"}).catch((t=>{}))]:[]])),t.notification.close()})),self.addEventListener("notificationclose",(async function(t){let a=t.notification.data?.FCM_MSG?.fcmOptions.analyticsLabel;e!=a&&a&&await t.waitUntil(Promise.all([fetch(`/api/v1/push-notification/${a}/track?event=close`,{method:"POST"}).catch((t=>{})),...t.notification.data.deviceInstanceId?[fetch(`/api/v1/device-instance/${t.notification.data.deviceInstanceId}/track?event=close`,{method:"POST"}).catch((t=>{}))]:[]]))}))}},a={};function e(i){var n=a[i];if(void 0!==n)return n.exports;var c=a[i]={exports:{}};return t[i](c,c.exports,e),c.exports}e(874),e(222),console.log("Installing SW."),self.addEventListener("activate",(()=>self.clients.claim())),self.skipWaiting()})();