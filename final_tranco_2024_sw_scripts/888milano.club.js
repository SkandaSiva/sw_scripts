var CACHE_NAME_PFX="sw-PortofoliSR-",SwSCOPE=self.registration.scope;self.addEventListener("install",function(a){skipWaiting()});self.addEventListener("activate",function(a){skipWaiting().then(function(){clients.claim()});try{self.registration.navigationPreload.disable()}catch(c){}});var LstVersion=null,versionRgx=/\/version\.js/i,versionCc=null,_VerDynam=null,preserveVersion=6E4,cacheVerExt={css:1,js:1,html:1},noCache=/\/(Dev\.PortofoliSR|livehub\/hubs)\//i,noCacheExt={php:1,mp4:1,webm:1,m4a:1};
function getVersion(a){var c=Date.now();if(c-LstVersion>preserveVersion)return fetch(a+"?v="+c).then(function(b){b&&200==b.status&&"basic"==b.type&&(LstVersion=c,versionCc=b.clone());var h=b.clone();caches.open("versionCache").then(function(k){k.put(a,h)});return b.clone().text().then(function(a){eval(a);_VerDynam=VerDynam;return b})}).catch(function(b){return caches.open("versionCache").then(function(b){return b.match(a).then(function(a){if(a)return versionCc=a.clone(),a.clone().text().then(function(b){eval(b);
_VerDynam=VerDynam;return a})})})});var f,d=new Promise(function(a,c){f=a}),e=versionCc;versionCc=versionCc.clone();f(e);return d.then(function(a){return a})}function getFileName(a){return a.split("/").pop()||"index.html"}function getUrlWithFileName(a){return a.split("/").pop()?a:a+"index.html"}function getExtension(a){a=a.split(".");return 1<a.length?a.pop():""}
self.addEventListener("fetch",function(a){var c=a.request.url.split("#")[0].split("?"),f=versionRgx.test(c[0]),d=getUrlWithFileName(c[0]),e=getExtension(d);if(!(0>a.request.url.indexOf(SwSCOPE)||noCache.test(d)||noCacheExt[e]))if(f)versionURL=c[0],a.respondWith(getVersion(versionURL));else{var b=function(){var b=d.substr(SwSCOPE.length),c=_VerDynam[b];c||("js/global.js"==b?c=_VerDynam.client:b.match(/js\/skin\/manifest\//i)?c=_VerDynam.manifest:b.match(/js\/lang\/[A-Za-z]+\//i)&&(c=_VerDynam[b.replace(/js\/lang\/[A-Za-z]+\//i,
"##/")]));var g=c?d+"?v="+c:a.request.url;caches.keys().then(function(a){for(var b=0;b<a.length;b++){var c=a[b];"versionCache"!=c&&0==c.indexOf(CACHE_NAME_PFX)&&c!=CACHE_NAME_PFX+_VerDynam.client&&(kaPromise=caches.delete(c))}});return caches.match(g).then(function(a){return a&&!f?a:fetch(g).then(function(a){if(!a||200!==a.status||"basic"!==a.type)return a;var b=a.clone();noCacheExt[e]||noCache.test(g)||!(cacheVerExt[e]&&c||!cacheVerExt[e])||caches.open(CACHE_NAME_PFX+_VerDynam.client).then(function(a){a.put(g,
b)});return a})})};_VerDynam&&"navigate"!=a.request.mode?a.respondWith(b()):a.respondWith(getVersion("js/version.js").then(function(){return b()}))}});
