const CACHE_VERSION="2024.11.11.01",PRECACHE_NAME="precache_2024.11.11.01",fallbackUrl="/offline.html",BASE_URL="https://www.outdoorphoto.co.za",INITIAL_CACHED_RESOURCES=[{"revision":"d9b77ce354193d21e9ae8de0ee8aa210","url":"/catalog/view/theme/outdoorphoto/dist//js/app.js"},{"revision":"42a8aa0a5adf713d7aa8194dff8a04cf","url":"/catalog/view/theme/outdoorphoto/dist//js/biggerPicture.js"},{"revision":"979383d467240ed835a6347c6d054b33","url":"/catalog/view/theme/outdoorphoto/dist//js/countdown.js"},{"revision":"5049730d3ab27d8bb7bf18dd089fdfce","url":"/catalog/view/theme/outdoorphoto/dist//js/ga4Manager.js"},{"revision":"6f3fe0eb8f98d130eab4d62a697b425d","url":"/catalog/view/theme/outdoorphoto/dist//js/googleLogin.js"},{"revision":"b355c994c1ed9fc337483d69e4f60a65","url":"/catalog/view/theme/outdoorphoto/dist//js/loadMore.js"},{"revision":"04a5c0abfcc2fcd7bc9d67f8524c3a02","url":"/catalog/view/theme/outdoorphoto/dist//js/nprogress.js"},{"revision":"e549cd4937fdc54540b70e45ab0ec90e","url":"/catalog/view/theme/outdoorphoto/dist//js/search.js"},{"revision":"f2526dba819f73101b4886b870fade31","url":"/catalog/view/theme/outdoorphoto/dist//js/template/account/edit.js"},{"revision":"421d34d5b5f94457a8b9edfb3edef1db","url":"/catalog/view/theme/outdoorphoto/dist//js/template/account/register.js"},{"revision":"329b7db3c97165f10f1433fc67543a6d","url":"/catalog/view/theme/outdoorphoto/dist//js/template/account/repair.js"},{"revision":"fa9f7873045d48eee81f0f0c04193db1","url":"/catalog/view/theme/outdoorphoto/dist//js/template/account/tracking.js"},{"revision":"fd7f261b2100e9faf7509b3f89f8a21c","url":"/catalog/view/theme/outdoorphoto/dist//js/template/product/product.js"},{"revision":"aa2eae69b2c54e379482687c7e32aeab","url":"/catalog/view/theme/outdoorphoto/dist//js/template/secondhand/secondhand.js"},{"revision":"0e7e23e552fec7756da1cd8483043b3e","url":"/catalog/view/theme/outdoorphoto/dist/css/app.css"},{"revision":"510d2beef6020884ba178f917a975443","url":"/catalog/view/theme/outdoorphoto/dist/css/interactiveLinks.css"},{"revision":"951ce8a4d98c24b01d3ebcacaea97f42","url":"/catalog/view/theme/outdoorphoto/dist/css/intlTel.css"},{"revision":"a5dbc6213e71c0f7ff98f9d25700f8a3","url":"/catalog/view/theme/outdoorphoto/dist/css/search.css"},{"revision":"a41db4eeb71fd36c0ed5e47b16cfa15d","url":"/catalog/view/theme/outdoorphoto/dist/css/select2.css"},{"revision":"cc0b56a3b9e338a27425573bc117ca86","url":"/catalog/view/theme/outdoorphoto/dist/css/vendor/payflex.css"},{"revision":"4cd45b580323ace72d3431ffec86a010","url":"/catalog/view/theme/outdoorphoto/dist/js/search/965.js"},{"revision":"6b990befb890f1ce5997913fc74c6318","url":"/catalog/view/theme/outdoorphoto/dist/js/vendor.js"},{"revision":"bb25b155c937e1c5cd9864932b32cf55","url":"/catalog/view/theme/outdoorphoto/dist/manifest.js"}]||[];self.assets=[fallbackUrl],INITIAL_CACHED_RESOURCES.forEach((e=>{self.assets.push(`${e.url.replace("//","/")}?id=${e.revision}`)}));const addResourcesToCache=async e=>{const t=await caches.open(PRECACHE_NAME);try{await t.addAll(e)}catch(e){throw console.error(`Failed to cache resources: ${e}`),e}},putInCache=async(e,t)=>{if(e.url.match(/\.svg|\.png|\.jpg|\.jpeg|\.js|\.css/)){const a=await caches.open(PRECACHE_NAME);await a.put(e,t)}},cacheFirst=async({request:e,preloadResponsePromise:t,fallbackUrl:a})=>{try{const a=await caches.match(e,{ignoreVary:!0});if(a)return a;const n=await t;if(n)return putInCache(e,n.clone()),n;const i=await fetch(e);return putInCache(e,i.clone()),i}catch(e){console.error("Fetch failed; returning offline page instead.",e);const t=await caches.match(a,{ignoreVary:!0});return t||new Response("Network error happened",{status:408,headers:{"Content-Type":"text/plain"}})}},deleteCache=async e=>{await caches.delete(e)},deleteOldCaches=async()=>{const e=[PRECACHE_NAME],t=(await caches.keys()).filter((t=>!e.includes(t)));await Promise.all(t.map(deleteCache))},enableNavigationPreload=async()=>{self.registration.navigationPreload&&await self.registration.navigationPreload.enable()};function urlBase64ToUint8Array(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),a=atob(t),n=new Uint8Array(a.length),i=0;i<a.length;++i)n[i]=a.charCodeAt(i);return n}function resubscribeToPush(){return self.registration.pushManager.getSubscription().then((function(e){if(e)return e.unsubscribe()})).then((function(){return self.registration.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:urlBase64ToUint8Array("BGQBZKbwxUGnWqnOkAt2Sq6de5NxJgAVKws3ztI9Lm_RhHudKRyiA5Yx9yd95qUFRpwfsVF8qPf0MR6gjX4Pp04")})})).then((function(e){self.clients.matchAll().then((t=>{t.forEach((async t=>{await t.postMessage({callback:"updateSubscriptionOnBackEnd",subscription:JSON.stringify(e)})}))}))})).catch((function(e){console.error("Failed to resubscribe:",e)}))}self.addEventListener("activate",(e=>{e.waitUntil((async()=>{await deleteOldCaches(),await enableNavigationPreload()})())})),self.addEventListener("install",(e=>{self.skipWaiting(),e.waitUntil((async()=>{try{await addResourcesToCache(self.assets)}catch(e){console.error("Failed to install service worker: ",e)}})())})),self.addEventListener("fetch",(e=>{"GET"===e.request.method&&e.request.url.startsWith(BASE_URL)&&("navigate"===e.request.mode?e.respondWith(async function(){try{return await e.preloadResponse||await fetch(e.request)}catch(e){const t=await caches.open(PRECACHE_NAME);return await t.match("/offline.html",{ignoreVary:!0})}}()):e.respondWith(cacheFirst({request:e.request,preloadResponsePromise:e.preloadResponse,fallbackUrl})))})),self.addEventListener("push",(async function(e){console.log("Received a push message",e.data.text());let t=JSON.parse(e.data.text());const a=t.title;let n={body:t.body,icon:"https://www.outdoorphoto.co.za/catalog/view/theme/outdoorphoto/dist/images/manifest/384x384.png",data:{targetURL:t.targetURL}};"badge"in Notification?.prototype&&(n.badge="https://www.outdoorphoto.co.za/catalog/view/theme/outdoorphoto/dist/images/manifest/72x72.png"),Notification,e.waitUntil((async()=>{await self.registration.showNotification(a,n),await resubscribeToPush()})())})),self.addEventListener("notificationclick",(function(e){e.notification.close(),e.notification.data&&e.notification.data.targetURL&&e.waitUntil(clients.matchAll({type:"window"}).then((function(t){for(var a=0;a<t.length;a++){var n=t[a];if(n.url===e.notification.data.targetURL&&"focus"in n)return n.focus()}if(clients.openWindow)return clients.openWindow(e.notification.data.targetURL)})))}));