let e;self.oninstall=t=>t.waitUntil(caches.keys().then((t=>(e=t.some((e=>+e<2.7)))&&self.skipWaiting()))),self.onactivate=t=>t.waitUntil(caches.keys().then((e=>Promise.all(e.map((e=>caches.delete(e)))))).then((t=>clients.claim().then((t=>{e&&clients.matchAll().then((e=>e.forEach((e=>"/"===new URL(e.url).pathname&&e.navigate("/trans")))))}))))),self.onfetch=e=>e.respondWith(caches.match(e.request,{ignoreSearch:!0}).then((t=>{if(t)return t;const n=e.request.url.includes("/Upl/");return fetch(e.request,n?void 0:{headers:new Headers([["Cache-Control","no-cache"]]),cache:"reload"}).then((t=>{if(!n&&t.ok){const n=t.clone();caches.open("2.70").then((t=>t.put(e.request,n)))}return t}))}))),self.onmessage=({data:e,source:t})=>self.registration.showNotification(e.n,{body:e.m,icon:e.p?"Upl/Pro/"+e.p+".avif":"Assets/192M.webp",data:t.id,badge:"Assets/bdg.png",tag:e.u,renotify:!0,actions:[{action:"M",title:"הודעה",type:"text"},{action:"I",title:"התעלמות",type:"button"}]}),self.onnotificationclick=e=>e.waitUntil(clients.get(e.notification.data).then((async t=>{e.action?e.notification.close():await t.focus(),t.postMessage([e.action,+e.notification.tag,e.reply?.trim()])})));