!function(){function e(e,t){var n=e.url,r=1;return c.test(n)||(r=0,t.credentials="include"),r}function t(e){if(f.test(e))return 1;var t=e.replace(u,"");return"/"==t||""==t||a.test(t)||l.test(t)?1:0}function n(e,n){var r=0,i=e.url,o=e.referrer;return"GET"!==e.method||o&&!u.test(o)||h.test(i)||(u.test(i)&&(t(i)||c.test(i))?r=1:d.test(i)&&c.test(i)&&(r=1,n.mode="cors",n.credentials="omit")),r}function r(){caches.keys().then(function(e){return Promise.all(e.map(function(e){if(e!=s)return caches.delete(e)}))})}function i(t){function r(e){function t(e){if(!e)throw Error("");if(200!==e.status)return e;var t=e.clone();return caches.open(s).then(function(e){e.put(i,t)}),e}function n(t){if(e)return e}if(e&&u)return e;var r=99e3;return e&&(r=3e3,"https://poisk-podbor.ru/"==i.url&&(r=500)),o(i,c,r).then(t,n)}var i=t.request,c={referrer:i.referrer,referrerPolicy:"unsafe-url"},u=e(i,c);n(i,c)&&t.respondWith(caches.match(i).then(r))}function o(e,t,n){return Promise.race([fetch(e,t),new Promise(function(_,e){setTimeout(function(){e(new Error("timeout"))},n)})])}var s="poiskpodbor3",c=/\.js$/,u=new RegExp("^"+location.origin),f=/\.html$/,a=/^\/\?/,l=/^\/prices\//,d=/^https:\/\/poiskpodbor\.ru\//,h=/action=redirect/;self.addEventListener("activate",function(e){e.waitUntil(r())}),self.addEventListener("install",function(e){self.skipWaiting(),e.waitUntil(caches.open(s))}),self.addEventListener("fetch",i),self.addEventListener("error",function(e){fetch("/nss/post?cl_err",{method:"post",body:e.message+"\nin "+e.filename+" ("+e.lineno+":"+e.colno+")"}),caches.delete(s).then(function(){self.registration.unregister()})})}();