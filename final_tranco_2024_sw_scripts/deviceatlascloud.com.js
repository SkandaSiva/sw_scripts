/*
 * Copyright 2024 DeviceAtlas Limited. All rights reserved.
 * http://deviceatlas.com
 * 
 * This is an experimental version of the DeviceAssure library. It is not intended for production use. 
 */
function _getTimezone(){return _collectData(function(){return Intl&&"function"==typeof Intl.DateTimeFormat?{key:"timezone",value:Intl.DateTimeFormat().resolvedOptions().timeZone}:null})}function _getAppVersion(){return _collectData(function(){return void 0===navigator.appVersion?null:{key:"navigator_appVersion",value:navigator.appVersion}})}function _getAppName(){return _collectData(function(){return void 0===navigator.appName?null:{key:"navigator_appName",value:navigator.appName}})}function _getAppCodeName(){return _collectData(function(){return void 0===navigator.appCodeName?null:{key:"navigator_appCodeName",value:navigator.appCodeName}})}function _canPromise(){return _collectData(function(){return"undefined"==typeof Promise?null:{key:"promises",value:!0}})}function _getEval(){return _collectData(function(){return"undefined"==typeof eval?null:{key:"eval",value:eval.toString()}})}function _getConnection(){return _collectData(function(){var e;return navigator.connection&&"object"==typeof navigator.connection?((e={}).type=navigator.connection.type,e.effectiveType=navigator.connection.effectiveType,e.downlink=navigator.connection.downlink,e.rtt=navigator.connection.rtt,e.saveData=navigator.connection.saveData,{key:"navigator_connection",value:e}):null})}function _getVibrate(){return _collectData(function(){return void 0===navigator.vibrate?null:{key:"navigator_vibrate",value:navigator.vibrate([0])}})}function _getWebdriver(){return _collectData(function(){return void 0===navigator.webdriver?null:{key:"navigator_webdriver",value:navigator.webdriver}})}function _getStandalone(){return _collectData(function(){return void 0===navigator.standalone?null:{key:"navigator_standalone",value:navigator.standalone}})}function _getVendor(){return _collectData(function(){return void 0===navigator.vendor?null:{key:"navigator_vendor",value:navigator.vendor}})}function _getVendorSub(){return _collectData(function(){return void 0===navigator.vendorSub?null:{key:"navigator_vendorSub",value:navigator.vendorSub}})}function _getLanguage(){return _collectData(function(){return void 0===navigator.language?null:{key:"navigator_language",value:navigator.language}})}function _getLanguages(){return _collectData(function(){return void 0===navigator.languages?null:{key:"navigator_languages",value:navigator.languages}})}function _getPlatform(){return _collectData(function(){return void 0===navigator.platform?null:{key:"navigator_platform",value:navigator.platform}})}function _getHardwareConcurrency(){return _collectData(function(){return void 0===navigator.hardwareConcurrency?null:{key:"navigator_hardwareConcurrency",value:navigator.hardwareConcurrency}})}function _getDeviceMemory(){return _collectData(function(){return void 0===navigator.deviceMemory?null:{key:"navigator_deviceMemory",value:navigator.deviceMemory}})}function _getProduct(){return _collectData(function(){return void 0===navigator.product?null:{key:"navigator_product",value:navigator.product}})}function _getProductSub(){return _collectData(function(){return void 0===navigator.productSub?null:{key:"navigator_productSub",value:navigator.productSub}})}function _getUserAgent(){return _collectData(function(){return void 0===navigator.userAgent?null:{key:"navigator_userAgent",value:navigator.userAgent}})}function _getMaxTouchPoints(){return _collectData(function(){return void 0===navigator.maxTouchPoints?null:{key:"navigator_maxTouchPoints",value:navigator.maxTouchPoints}})}function _getBuildID(){return _collectData(function(){return void 0===navigator.buildID?null:{key:"navigator_buildID",value:navigator.buildID}})}function _getPermissions(){return _collectData(function(){return void 0===navigator.permissions?null:{key:"navigator_permissions",value:!!navigator.permissions}})}function _getGeoLocation(){return _collectData(function(){return navigator.geolocation?{key:"navigator_geolocation",value:!!navigator.geolocation}:null})}function _getOscpu(){return _collectData(function(){return navigator.oscpu?{key:"navigator_oscpu",value:navigator.oscpu}:null})}function _getCookieEnabled(){return _collectData(function(){return void 0===navigator.cookieEnabled?null:{key:"navigator_cookieEnabled",value:!!navigator.cookieEnabled}})}function _getServiceWorker(){return _collectData(function(){return{key:"navigator_serviceWorker",value:"serviceWorker"in navigator}})}function _getGlobalPrivacyControl(){return _collectData(function(){return void 0===navigator.globalPrivacyControl?null:{key:"navigator_globalPrivacyControl",value:!!navigator.globalPrivacyControl}})}function _isOnLine(){return _collectData(function(){return void 0===navigator.onLine?null:{key:"navigator_onLine",value:navigator.onLine}})}function _getGetClearAppBadge(){return _collectData(function(){return navigator.clearAppBadge&&"function"==typeof navigator.clearAppBadge?{key:"navigator_clearAppBadge",value:navigator.clearAppBadge&&"function"==typeof navigator.clearAppBadge}:null})}function _getSetAppBadge(){return _collectData(function(){return navigator.setAppBadge&&"function"==typeof navigator.setAppBadge?{key:"navigator_setAppBadge",value:navigator.setAppBadge&&"function"==typeof navigator.setAppBadge}:null})}function _getStorageEstimate(){return navigator.storage&&"function"==typeof navigator.storage.estimate?new Promise(function(t,e){navigator.storage.estimate().then(function(e){t(_buildPropertyResult(function(){return{key:"navigator_storage_estimate",value:e}}))}).catch(function(){t({key:"navigator_storage_estimate",value:_buildErrorResult()})})}):null}function _getBatteryData(){return navigator.getBattery&&"function"==typeof navigator.getBattery?new Promise(function(t,e){navigator.getBattery().then(function(e){t(_buildPropertyResult(function(){return{key:"navigator_battery",value:{charging:e.charging,chargingTime:e.chargingTime,dischargingTime:e.dischargingTime,level:e.level}}}))}).catch(function(){t({key:"navigator_battery",value:_buildErrorResult()})})}):null}function _detectBrave(){return navigator&&navigator.brave&&"function"==typeof navigator.brave.isBrave?new Promise(function(t,e){navigator.brave.isBrave().then(function(e){t(_buildPropertyResult(function(){return{key:"navigator_brave",value:e}}))}).catch(function(e){t({key:"navigator_brave",value:_buildErrorResult(e)})})}):null}function _getGPU(){return navigator.gpu?new Promise(function(o,e){var t=new Promise(function(e,t){var n=[];if(navigator.gpu.wgslLanguageFeatures){for(var r=navigator.gpu.wgslLanguageFeatures.values(),a=r.next(),o="";a&&!a.done;)o=o+"__"+a.value,a=r.next();n.push(btoa(o))}return e({key:"wgslLanguageFeatures",value:n})});return Promise.all([t]).then(function(e){if(!e)return null;for(var t={wgslLanguageFeatures:[]},n=!1,r=0;r<e.length;r++){var a=e[r];"wgslLanguageFeatures"===a.key&&(t.wgslLanguageFeatures=a.value)}o(_buildPropertyResult(function(){return n&&(t.e=!0),{key:"navigator_gpu",value:t}}))}).catch(function(e){o({key:"navigator_gpu",value:_buildErrorResult(e)})})}):null}function _getHighEntropyValues(){return navigator.userAgentData&&navigator.userAgentData.getHighEntropyValues?new Promise(function(t,e){navigator.userAgentData.getHighEntropyValues(["architecture","bitness","formFactor","fullVersionList","model","platformVersion","uaFullVersion","wow64"]).then(function(e){t(_buildPropertyResult(function(){return{key:"navigator_highEntropyValues",value:e}}))}).catch(function(e){t({key:"navigator_highEntropyValues",value:_buildErrorResult(e)})})}):null}function _getPlugins(){return _collectData(function(){if(!navigator.plugins)return null;for(var e=[],t=0;t<navigator.plugins.length;t++){var n=navigator.plugins[t],n=btoa(n.name+"__"+n.filename+"__"+n.description);e.v.push(n)}return{key:"navigator_plugins",value:e}})}function _getMimeTypes(){return _collectData(function(){if(!navigator.mimeTypes)return null;for(var e=[],t=0;t<navigator.mimeTypes.length;t++){var n=navigator.mimeTypes[t],n=btoa(n.type+"__"+n.description);e.v.push(n)}return{key:"navigator_mimeTypes",value:e}})}var _collectData=function(n,e){return e?new Promise(function(e,t){e(_buildPropertyResult(n))}):_buildPropertyResult(n)},_buildPropertyResult=function(e){var t={a:!1,e:!1},n=null;try{var r=e();r&&(t.a=!0,t.v=r.value,n=r.key)}catch(e){t.e=!0}return{key:n,value:t}},_buildErrorResult=function(e){return{a:!0,e:!0}};function _detectWebGlOverrides(){return _collectData(function(){var e,t;return WebGLRenderingContext&&WebGLRenderingContext.prototype&&Object&&Object.getOwnPropertyDescriptor?(t={},(e=Object.getOwnPropertyDescriptor(WebGLRenderingContext.prototype,"getParameter"))&&(t.enumerable=e.enumerable,t.configurable=e.configurable,e.get&&(t.getter=e.get.toString()),e.set&&(t.setter=e.set.toString()),e.value)&&(t.value=e.value.toString()),{key:"WebGLRenderingContext",value:t}):null})}function _updateResponse(e,t){for(var n=0;n<t.length;n++){var r=t[n];r&&r.key&&(e.v[r.key]=r.value)}}var ServiceWorker={init:function(){ServiceWorker._instance={},ServiceWorker._instance.getBattery=_getBatteryData,ServiceWorker._instance.getAppCodeName=_getAppCodeName,ServiceWorker._instance.getAppName=_getAppName,ServiceWorker._instance.getAppVersion=_getAppVersion,ServiceWorker._instance.getTimezone=_getTimezone,ServiceWorker._instance.getEval=_getEval,ServiceWorker._instance.canPromise=_canPromise,ServiceWorker._instance.getConnection=_getConnection,ServiceWorker._instance.detectBrave=_detectBrave,ServiceWorker._instance.getPlugins=_getPlugins,ServiceWorker._instance.getMimeTypes=_getMimeTypes,ServiceWorker._instance.getVibrate=_getVibrate,ServiceWorker._instance.detectWebGlOverrides=_detectWebGlOverrides,ServiceWorker._instance.getGPU=_getGPU,ServiceWorker._instance.getHighEntropyValues=_getHighEntropyValues,ServiceWorker._instance.getWebdriver=_getWebdriver,ServiceWorker._instance.getStandalone=_getStandalone,ServiceWorker._instance.getVendor=_getVendor,ServiceWorker._instance.getVendorSub=_getVendorSub,ServiceWorker._instance.getLanguage=_getLanguage,ServiceWorker._instance.getLanguages=_getLanguages,ServiceWorker._instance.getPlatform=_getPlatform,ServiceWorker._instance.getHardwareConcurrency=_getHardwareConcurrency,ServiceWorker._instance.getDeviceMemory=_getDeviceMemory,ServiceWorker._instance.getProduct=_getProduct,ServiceWorker._instance.getProductSub=_getProductSub,ServiceWorker._instance.getUserAgent=_getUserAgent,ServiceWorker._instance.getMaxTouchPoints=_getMaxTouchPoints,ServiceWorker._instance.getBuildID=_getBuildID,ServiceWorker._instance.getPermissions=_getPermissions,ServiceWorker._instance.getGeoLocation=_getGeoLocation,ServiceWorker._instance.getOscpu=_getOscpu,ServiceWorker._instance.getCookieEnabled=_getCookieEnabled,ServiceWorker._instance.getServiceWorker=_getServiceWorker,ServiceWorker._instance.getGlobalPrivacyControl=_getGlobalPrivacyControl,ServiceWorker._instance.isOnLine=_isOnLine,ServiceWorker._instance.getStorageEstimate=_getStorageEstimate,ServiceWorker._instance.getGetClearAppBadge=_getGetClearAppBadge,ServiceWorker._instance.getSetAppBadge=_getSetAppBadge,ServiceWorker._instance.collectData=_collectData},handleEvent:function(c){function e(){function t(e,t){t.i.ms=Date.now()-a,t.e=!0,n(t)}function n(e){e.i.ms=Date.now()-a,e=e,c&&c.ports&&0!==c.ports.length&&(e={action:"com.deviceassure.message.sw."+g,data:e},c.ports[0].postMessage(JSON.stringify(e)))}var r={e:!1,i:{v:g,ms:null},v:{}},a=Date.now();try{for(var e=[_getAppName,_getAppVersion,_getAppCodeName,_getTimezone,_canPromise,_getEval,_detectWebGlOverrides,_getPlugins,_getMimeTypes,_getConnection,_getWebdriver,_getStandalone,_getVendor,_getVendorSub,_getLanguage,_getLanguages,_getPlatform,_getHardwareConcurrency,_getDeviceMemory,_getProduct,_getProductSub,_getUserAgent,_getVibrate,_getMaxTouchPoints,_getBuildID,_getPermissions,_getGeoLocation,_getOscpu,_getCookieEnabled,_getServiceWorker,_getGlobalPrivacyControl,_isOnLine,_getGetClearAppBadge,_getSetAppBadge],o=0;o<e.length;o++){var i=e[o]();i&&_updateResponse(r,[i])}var u=[_detectBrave(),_getBatteryData(),_getStorageEstimate(),_getHighEntropyValues(),_getGPU()];Promise.all(u).then(function(e){_updateResponse(r,e),n(r)}).catch(function(e){t(0,r)})}catch(e){t(0,r)}}var g="1.0.23-beta-0.0.8-beta-0.0.8";c.data&&c.data.action&&-1<c.data.action.indexOf("com.deviceassure.message.sw")&&e()}};ServiceWorker.init(),self.addEventListener("message",function(e){ServiceWorker.handleEvent(e)});
//# sourceMappingURL=sw.min.js.map
