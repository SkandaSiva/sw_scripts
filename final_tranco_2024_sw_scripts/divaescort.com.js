const staticCacheName='cache-v14';const offlinePage='/offline';const allowCacheUrls=['https://diva.asap.in.ua/','https://asap.in.ua/',];const ignoreCacheUrls=['https://media.divaescort.com/',];const fontsUrl=['https://fonts.googleapis.com/','.woff','.woff2',];let coreAssets=['/swn_app.js?r=12','/manifest_new_41457e07-4c51-11ea-9818-0025902566bc.json?r=3','/resources/img/logo-svg.svg',offlinePage,'/',];self.addEventListener('fetch',function(event){let request=event.request;if(request.cache==='only-if-cached'&&request.mode!=='same-origin'){return;}
if(request.method.toLowerCase()!=='get'){return;}
let allow=false;for(let i in allowCacheUrls){if(request.url.indexOf(allowCacheUrls[i])!==-1){allow=true;break;}}
if(!allow){return;}
for(let i in ignoreCacheUrls){if(request.url.indexOf(ignoreCacheUrls[i])!==-1){return;}}
if(request.headers.get('Accept').includes('text/html')){event.respondWith(fetch(request).then(function(response){if(response.status===200||response.status===304){let copy=response.clone();event.waitUntil(caches.open(staticCacheName).then(function(cache){return cache.put(request,copy);}));}
return response;}).catch(function(error){return caches.match(request).then(function(response){return response||caches.match(offlinePage);});}));return;}
if(request.headers.get('Accept').includes('text/css')||request.headers.get('Accept').includes('text/javascript')||request.headers.get('Accept').includes('application/javascript')){event.respondWith(caches.match(request).then(function(response){return response||fetch(request).then(function(response){if(response.status===200||response.status===304){let copy=response.clone();event.waitUntil(caches.open(staticCacheName).then(function(cache){return cache.put(request,copy);}));}
return response;});}));return;}
let isFonts=false;for(let i in fontsUrl){if(request.url.indexOf(fontsUrl[i])!==-1){isFonts=true;break;}}
if(request.headers.get('Accept').includes('image')||isFonts){event.respondWith(caches.match(request).then(function(response){return response||fetch(request).then(function(response){if(response.status===200||response.status===304){let copy=response.clone();event.waitUntil(caches.open(staticCacheName).then(function(cache){return cache.put(request,copy);}));}
return response;});}));return;}});self.addEventListener('install',function(event){console.log('install service worker');event.waitUntil(caches.open(staticCacheName).then(function(cache){for(let asset of coreAssets){cache.add(new Request(asset));}
return cache;}));});self.addEventListener('activate',function(event){console.log('activate service worker');const cacheAllowlist=[staticCacheName];event.waitUntil(caches.keys().then(function(cacheNames){return Promise.all(cacheNames.map(function(cacheName){if(cacheAllowlist.indexOf(cacheName)===-1){return caches.delete(cacheName);}}));}));});