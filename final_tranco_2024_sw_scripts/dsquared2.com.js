

self.serverPreparedData = {"offlineUrl":"/on/demandware.static/Sites-dsquared2-row-Site/-/default/dw1cb9c75a/offline.html","cachedParts":[{"url":"/on/demandware.store/Sites-dsquared2-row-Site/default/Page-IncludeHeaderMenu?sw=true","placeholder":"$swheader$","skipParameter":"sw_skipheader","cacheSuffix":"header","invalidateOnSessionChange":true,"cacheCleanTriggerActions":["set-site","Account-Login","savenewpassword","Account-SubmitRegistration","Login-Logout","Login-OAuthReentry","Order-CreateAccount","CSRF-Fail"]},{"url":"/on/demandware.store/Sites-dsquared2-row-Site/default/Cart-MiniCart?sw=true","placeholder":"$swminicarticon$","skipParameter":null,"cacheSuffix":"MiniCartIcon","invalidateOnSessionChange":true,"cacheCleanTriggerActions":["set-site","Cart-AddProduct","cart","Cart-UpdateQuantity","Cart-RemoveProductLineItem","Cart-AddCoupon","Cart-RemoveCouponLineItem","Cart-EditProductLineItem","CSRF-AjaxFail","CSRF-Fail","CheckoutServices-PlaceOrder","confirmation","COPlaceOrder-Submit","Account-Login","Login-Logout","Login-OAuthReentry"]},{"url":"/on/demandware.store/Sites-dsquared2-row-Site/default/Page-IncludeFooter?sw=true","placeholder":"$swfooter$","skipParameter":"sw_skipfooter","cacheSuffix":"footer","invalidateOnSessionChange":true,"cacheCleanTriggerActions":[]}],"cachedUrls":[{"url":"/on/demandware.store/Sites-dsquared2-row-Site/default/Cart-MiniCartShow","cacheSuffix":"MiniCartShow","invalidateOnSessionChange":false,"cacheCleanTriggerActions":["set-site","Cart-AddProduct","cart","Cart-UpdateQuantity","Cart-RemoveProductLineItem","Cart-AddCoupon","Cart-RemoveCouponLineItem","Cart-EditProductLineItem","CSRF-AjaxFail","CSRF-Fail","CheckoutServices-PlaceOrder","confirmation","COPlaceOrder-Submit","Account-Login","Login-Logout","Login-OAuthReentry"]}],"urlSiteId":"dsquared2-row","urlLocale":"default","sourceCodeParameter":"src","cacheVersion":"v1731131437546"};
(()=>{"use strict";self.buildSuitePreparedData={codeVersion:"v24.12.2.1-198",isProductionBuild:!0};const e=self.buildSuitePreparedData.codeVersion+"_"+self.serverPreparedData.cacheVersion,t=self.serverPreparedData.offlineUrl;async function s(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const s=await caches.keys();return Promise.all(s.filter((s=>t||s!==e)).map((e=>caches.delete(e))))}async function n(t){let s,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t){const e=t.request.url.split("?")[0].match(/\/([^/]+)(\/$|\/\?|\?|$)/);if(!e)return;const n=e[1],r=Object.keys(self.cacheCleanActions).find((e=>-1!==n.indexOf(e)))||"";s=self.cacheCleanActions[r]||[]}else r&&(s=self.sessionCleanParts);const a=[];if(s.length>0){const t=await caches.open(e),r=await t.keys(),i=(n?"."+n:"")+".";for(const e of r)s.find((t=>-1!==e.url.indexOf(i+t)))&&a.push(t.delete(e))}await Promise.all(a)}const r="$sw",a=20,i="x-sf-cc-siteid",o="x-sf-cc-requestlocale";function c(e,t,s,n){const r=e.length;let a=t,i=0,o=!1,c=!1,l=null;const h=n.map((t=>({config:t,placeholderBytes:t.placeholderBytes,length:t.placeholderBytes.length,match:t.placeholderBytes[i]===e[a],finished:1===t.placeholderBytes.length,beginIndex:0,endIndex:0})));for(a++,i++;a<r&&h.length>0&&!o&&!c;){o=!0;for(let t=h.length-1;t>=0;t--){const s=h[t];i<s.length&&(s.match=s.match&&s.placeholderBytes[i]===e[a]),i===s.length-1&&(s.finished=!0),o=o&&s.finished,c=c||s.finished&&s.match,s.match||h.splice(t,1)}a++,i++}return c&&(l=h[0],l.endIndex=a-1,l.beginIndex=l.endIndex-l.length-s.length+1),l}function l(e,t){const s=new TextEncoder,n=s.encode("$sw-session-hash$".replace(r,"")),a=s.encode(">"),i=e.length;let o,c=t,l=0,h=!1;const u={placeholderBytes:n,length:n.length,match:n[l]===e[c],finished:1===n.length};for(c++,l++;c<i&&u.match&&!u.finished&&!h;)l<u.length&&(u.match=u.match&&u.placeholderBytes[l]===e[c]),l===u.length-1&&(u.finished=!0),h=h||u.finished&&u.match,c++,l++;if(h){for(;c<i&&a[0]!==e[c];)c++;const s=e.slice(t,c),n=(new TextDecoder).decode(s).match(/content="([^"]+)"/);n&&(o=n[1])}return o}function h(){let e=0;for(var t=arguments.length,s=new Array(t),n=0;n<t;n++)s[n]=arguments[n];for(let t=0;t<s.length;t++)e+=s[t].length;const r=new Uint8Array(e);let a=0;for(let e=0;e<s.length;e++)r.set(s[e],a),a+=s[e].length;return r}async function u(u){let d;try{!function(e){return new URL(e.request.url).searchParams.has(self.serverPreparedData.sourceCodeParameter)}(u)?await n(u):s(!0);const t=await async function(e){const t=new URL(e.url);let s=!1;if(self.serverPreparedData.cachedParts?.forEach((function(e){e.skipParameter&&(s||(s=t.searchParams.has(e.skipParameter)),t.searchParams.append(e.skipParameter,"true"))})),s){const t=new URL(e.url);return self.serverPreparedData.cachedParts.forEach((function(e){e.skipParameter&&t.searchParams.delete(e.skipParameter)})),t}if(/on\/demandware.store\/[^?]+\/__/.test(e.url))return e;const n={cache:e.cache,credentials:e.credentials,headers:e.headers,method:e.method,referrer:e.referrer,redirect:"manual"},r=await e.arrayBuffer();return r&&r.byteLength>0&&(n.body=r),new Request(t.toString(),n)}(u.request);if(t instanceof URL)return Response.redirect(t,301);if(d=await fetch(t),401===d.status)return new Response("\n        <html>\n            <head>\n                <script>\n                    navigator.serviceWorker.getRegistrations().then(function(registrations) {\n                        var unregisterPromises = registrations.map((registration) => registration.unregister());\n                        return Promise.all(unregisterPromises);\n                    }).then(function () {\n                        window.location.reload();\n                    }).catch(function () {\n                        window.location.reload();\n                    });\n                <\/script>\n            </head>\n            <body>\n            </body>\n        </html>\n    ",{headers:new Headers({"Content-Type":"text/html"})});if(301===d.status||302===d.status||"opaqueredirect"===d.type)return d;d=function(e,t,s){const u=function(e){const t={status:e.status,statusText:e.statusText,headers:{"X-ServedByServiceWorker":"true"}};return e.headers.forEach((function(e,s){t.headers&&(t.headers[s]=e)})),t}(e),d=u.headers&&u.headers[i],f=u.headers&&u.headers[o];if(!d||!f)return e;self.sessionHash=self.sessionHash||{};const p=new ReadableStream({done:!1,promisesQueue:[],async start(){this.reader=await(e.body?.getReader());const{placeholderPrefixBytes:s,placeholderConfigs:n}=function(e){const t=new TextEncoder;return{placeholderPrefixBytes:t.encode(r),placeholderConfigs:e.map((e=>{if(0!==e.placeholder.indexOf(r))throw Error(`All placeholders should start from ${r}. Please fix configuration!`);return{...e,placeholderBytes:t.encode(e.placeholder.replace(r,""))}}))}}(t);this.placeholderPrefixBytes=s,this.placeholderConfigs=n,this.promisesQueue.push(this.getNextChunkFromBaseResponse())},async getNextChunkFromBaseResponse(){return{...await(this.reader?.read()),isBaseResponse:!0}},async getFromQueue(){const e=await this.promisesQueue.shift();for(;e&&e.mergeWithNext&&this.promisesQueue.length>0;){const{done:t,value:s,mergeWithNext:n,isBaseResponse:r}=await this.promisesQueue.shift()||{};e.done=e.done||t||!1,e.mergeWithNext=n,e.isBaseResponse=r,s&&(e.value=h(e.value||new Uint8Array,s))}return e},async pull(e){if(!this.promisesQueue.length)return e.close(),null;const{done:t,value:r,isBaseResponse:i}=await this.getFromQueue();if(this.done=this.done||t,this.done&&!r)return e.close(),null;const{foundPlaceholder:o,chunkBeforePlaceholder:h,chunkAfterPlaceholder:u,lastBytes:p,sessionHash:g}=function(e,t,s,n){const r=e.length;let i,o=0,h=0,u=null,d=e,f=null,p=null;for(;o<r&&!u;){for(;e[o]===t[h]&&h<t.length&&o<r;)h++,o++;h===t.length&&o<r&&(u=c(e,o,t,s),u||(i=l(e,o))),h=0,o++}return u?(d=e.slice(0,u.beginIndex),f=e.slice(u.endIndex+1)):n||(d.length>a?(p=d.slice(d.length-a),d=d.slice(0,d.length-a)):(p=d,d=null)),{sessionHash:i,foundPlaceholder:u,chunkBeforePlaceholder:d,chunkAfterPlaceholder:f,lastBytes:p}}(r||new Uint8Array,this.placeholderPrefixBytes||new Uint8Array,this.placeholderConfigs||[],this.done);return g&&self.sessionHash[d]!==g&&(await n(null,d,!0),self.sessionHash[d]=g),h&&e.enqueue(h),p&&this.promisesQueue.unshift(Promise.resolve({value:p,mergeWithNext:!0,done:!1})),u&&this.promisesQueue.unshift(Promise.resolve({value:u,mergeWithNext:!0,done:!1})),o&&this.promisesQueue.unshift(async function(e,t,s,n){const r=s+"."+t+"."+e.cacheSuffix;let a=await caches.match(r);if(!a){let i=e.url;i=i.replace(`-${self.serverPreparedData.urlSiteId}-`,`-${t}-`),i=i.replace(`/${self.serverPreparedData.urlLocale}/`,`/${s}/`),a=await fetch(new Request(i));const o=await caches.open(n);await o.put(r,a.clone())}return{value:new Uint8Array(await a.arrayBuffer()),done:!1}}(o.config,d,f,s)),!this.done&&i&&this.promisesQueue.push(this.getNextChunkFromBaseResponse()),this.pull&&this.pull(e)},cancel(){this.done=!0,this.promisesQueue=[]}});return new Response(p,u)}(d,self.serverPreparedData.cachedParts,e)}catch(s){d=await async function(){return(await caches.open(e)).match(t)}()}return d}!function(){const e={},t=[];for(const s of self.serverPreparedData.cachedParts){for(const t of s.cacheCleanTriggerActions)e[t]=e[t]||[],e[t].push(s.cacheSuffix);s.invalidateOnSessionChange&&t.push(s.cacheSuffix)}for(const s of self.serverPreparedData.cachedUrls){for(const t of s.cacheCleanTriggerActions)e[t]=e[t]||[],e[t].push(s.cacheSuffix);s.invalidateOnSessionChange&&t.push(s.cacheSuffix)}self.cacheCleanActions=e,self.sessionCleanParts=t}(),self.addEventListener("install",(s=>{s.waitUntil(async function(){const s=await caches.open(e);await s.add(new Request(t,{cache:"reload"}))}()),self.skipWaiting()})),self.addEventListener("activate",(e=>{e.waitUntil(async function(){"navigationPreload"in self.registration&&await self.registration.navigationPreload.disable()}()),s(),self.clients.claim()})),self.addEventListener("fetch",(t=>{const s=t.request,r=function(e){const t=e.request.headers.get(i),s=e.request.headers.get(o);if(s&&t)return self.serverPreparedData.cachedUrls.find((function(n){let r=n.url.replace(`-${self.serverPreparedData.urlSiteId}-`,`-${t}-`);return r=r.replace(`/${self.serverPreparedData.urlLocale}/`,`/${s}/`),-1!==e.request.url.indexOf(r)}))}(t);"same-origin"===s.mode&&r?t.respondWith(async function(t,s){if(s){const n=await caches.open(e),r=t.request.headers.get(i),a=t.request.headers.get(o)+"."+r+"."+s.cacheSuffix;let c=await caches.match(a);return c||(c=await fetch(t.request),t.waitUntil(n.put(a,c.clone())),c)}return fetch(t.request)}(t,r)):"same-origin"===s.mode?t.waitUntil(n(t)):"navigate"===s.mode?t.respondWith(u(t)):function(e){return!!self.buildSuitePreparedData.isProductionBuild&&(t=e.url,!(!/\/demandware.static\//g.test(t)||/\/demandware.static\/-\/Sites-[^/]+/g.test(t))&&(-1!==["image","script","style","font"].indexOf(e.destination)||function(e){return/.*\.(js|css)/.test(e)}(e.url)));var t}(s)&&t.respondWith(async function(t){const s=await caches.open(e),n=await s.match(t);let r;if(n)r=n;else{const e=await fetch(t);s.put(t,e.clone()),r=e}return r}(s))}))})();
