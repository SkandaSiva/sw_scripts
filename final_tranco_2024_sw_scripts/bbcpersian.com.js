const version="v0.2.0",cacheName="simorghCache_v1";self.addEventListener("install",(e=>{e.waitUntil(caches.open(cacheName))}));const fetchEventHandler=async e=>{if(/^https:\/\/ichef(\.test)?\.bbci\.co\.uk\/(news|images|ace\/(standard|ws))\/.+.webp$/.test(e.request.url)){const t=e.request.clone();if(!(t.headers.has("accept")&&t.headers.get("accept").includes("webp"))){const s=t.url.replace(".webp","");e.respondWith(fetch(s,{mode:"no-cors"}))}}else if(/((\/cwr\.js$)|(\.woff2$)|(modern\.frosted_promo+.*?\.js$)|(\/moment-lib+.*?\.js$))/.test(e.request.url)){const t=await caches.open(cacheName);let s=await t.match(e.request);s||(s=await fetch(e.request.url),t.put(e.request,s.clone())),e.respondWith(s)}};onfetch=fetchEventHandler;