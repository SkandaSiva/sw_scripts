const version="1iaanpvs8",staticAssets=["/css/style.css","/js/runtime.js","/js/commons.js","/js/script.js","/assets/fonts/Futura-LT-Bold.woff","/assets/fonts/Futura-LT-Bold.woff2","/assets/fonts/Futura-LT-Book.woff","/assets/fonts/Futura-LT-Book.woff2","/assets/fonts/Futura-LT-Heavy.woff","/assets/fonts/Futura-LT-Heavy.woff2","/assets/fonts/Futura-LT-Medium.woff2","/assets/fonts/google/Rubik-normal-700.woff","/assets/fonts/Hand-Of-Sean-Pro.woff","/assets/fonts/Hand-Of-Sean-Pro.woff2","/assets/img/logo-bg.png","/assets/img/logo.svg"],staticCacheName=version+"::static";function updatedFetch(e,s){const t={method:e.method,headers:e.headers,mode:"navigate"===e.mode?"same-origin":e.mode,credentials:e.credentials,cache:e.cache,redirect:e.redirect,referrer:e.referrer,integrity:e.integrity};return e.headers.has("Content-Type")?e.blob().then(a=>(t.body=a,e=new Request(e.url,Object.assign(t,s)),fetch(e))):(e=new Request(e.url,Object.assign(t,s)),fetch(e))}function updateStaticCache(){return self.caches.open(staticCacheName).then(e=>e.addAll(staticAssets.map(e=>{const s=e.substr(e.lastIndexOf(".")+1).toLowerCase();return"css"!==s&&"js"!==s||(e+="?v="+version),new Request(e,{credentials:"same-origin"})})))}function clearOldCaches(){return self.caches.keys().then(e=>Promise.all(e.filter(e=>0!==e.indexOf(version)).map(e=>self.caches.delete(e))))}self.addEventListener("install",e=>{e.waitUntil(updateStaticCache().then(()=>self.skipWaiting()))}),self.addEventListener("activate",e=>{e.waitUntil(clearOldCaches().then(()=>self.clients.claim()))}),self.addEventListener("fetch",e=>{let s=e.request;if("only-if-cached"!==s.cache||"same-origin"===e.request.mode){const t=new URL(s.url);if(!/^\/(typo3\/|backs\/shop|gastronomie|it\/ristorazione)/.test(t.pathname))if("document"===s.destination){const t=new Headers;for(let e of s.headers.entries())t.set(e[0],e[1]);t.set("x-cached",version),e.respondWith(updatedFetch(s,{headers:t}))}else e.respondWith(self.caches.match(s).then(e=>e||fetch(s)))}});