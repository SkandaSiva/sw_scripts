!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var i=t();for(var n in i)("object"==typeof exports?exports:e)[n]=i[n]}}(self,(()=>(self.addEventListener("install",(function(e){self.skipWaiting(),console.log("Service Worker is being installed...")})),self.addEventListener("activate",(function(e){console.log("Service Worker::addEventListener::activated"),e.waitUntil(caches.keys().then((function(e){return Promise.all(e.map((function(e){return console.log("Deleting old cache:",e),caches.delete(e)})))})).then((function(){return console.log("Service Worker has been activated"),self.clients.claim()})))})),self.addEventListener("push",(function(e){var t=e.data.json();console.log(t);var i=t.title,n={title:t.title,body:t.body,icon:t.data.image,badge:t.data.icon||"https://cdn.messagehub.click/media/default_icon.png",image:t.data.image,data:t.data,vibrate:[500,110,500,110,450,110,200,110,170,40,450,110,200,110,170,40,500],tag:t.data.uuid||"default-tag",renotify:!0,requireInteraction:!0};e.waitUntil(self.registration.showNotification(i,n))})),self.addEventListener("notificationclick",(function(e){console.log("On notification click: ",e.notification),e.notification.close();var t=e.notification,i=t.body,n=t.title,a=t.data,o=a.url,c=a.image,s=a.icon,l=a.hostname,r=a.media_id,d=a.campaign_id,f=a.subscription_id,g=navigator.userAgent,u=(navigator.platform,{title:n,message:i,url:o,user_agent:g,image:c,icon:s,hostname:l,media_id:r,campaign_id:d,subscription_id:f});console.log("Notification Log Data:",u);var m=btoa(encodeURIComponent(JSON.stringify(u))),p="".concat("https://api.messagehub.click","/api/v1/notifications/tracking?data=").concat(m);e.waitUntil(clients.openWindow(p))})),{})));