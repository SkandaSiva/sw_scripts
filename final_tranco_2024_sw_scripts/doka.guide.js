var o=(s,e,a)=>new Promise((c,t)=>{var i=l=>{try{r(a.next(l))}catch(d){t(d)}},n=l=>{try{r(a.throw(l))}catch(d){t(d)}},r=l=>l.done?c(l.value):Promise.resolve(l.value).then(i,n);r((a=a.apply(s,e)).next())});const CACHE_PERIOD=2,salt=s=>new Date().getUTCDate()%s>=s/2?"even":"odd",debugStylesCacheName="doka-debug-styles-"+salt(2),debugScriptsCacheName="doka-debug-scripts-"+salt(2),assetsCacheName="doka-assets-"+salt(2),staticCacheName="doka-static-"+salt(2),dynamicCacheName="doka-dynamic-"+salt(2),syncFeaturedCacheName="doka-sync-featured-"+salt(2),offlinePageUrl="/offline/",debugStyles=["/styles/blocks/all-articles.css","/styles/blocks/answer.css","/styles/blocks/article-heading.css","/styles/blocks/article-image.css","/styles/blocks/article-indexes-list.css","/styles/blocks/article-nav.css","/styles/blocks/article.css","/styles/blocks/articles-gallery.css","/styles/blocks/articles-group.css","/styles/blocks/base-list.css","/styles/blocks/base.css","/styles/blocks/baseline.css","/styles/blocks/block-code.css","/styles/blocks/breadcrumbs.css","/styles/blocks/button.css","/styles/blocks/callout.css","/styles/blocks/code-fix.css","/styles/blocks/color-picker.css","/styles/blocks/container.css","/styles/blocks/content.css","/styles/blocks/contributors.css","/styles/blocks/cookie-notification.css","/styles/blocks/copy-button.css","/styles/blocks/details.css","/styles/blocks/doc.css","/styles/blocks/featured-article.css","/styles/blocks/featured-articles-list.css","/styles/blocks/feedback-control-list.css","/styles/blocks/feedback-form.css","/styles/blocks/figure.css","/styles/blocks/filter-group.css","/styles/blocks/filter-panel.css","/styles/blocks/float-button.css","/styles/blocks/font-theme.css","/styles/blocks/footer.css","/styles/blocks/format-block.css","/styles/blocks/header.css","/styles/blocks/hotkey.css","/styles/blocks/index-block.css","/styles/blocks/index-group-list.css","/styles/blocks/index-section.css","/styles/blocks/inline-code.css","/styles/blocks/intro.css","/styles/blocks/link.css","/styles/blocks/linked-article.css","/styles/blocks/logo.css","/styles/blocks/materials-collection.css","/styles/blocks/menu-toggle.css","/styles/blocks/nav-list.css","/styles/blocks/not-found.css","/styles/blocks/notification.css","/styles/blocks/people-page.css","/styles/blocks/person-avatar.css","/styles/blocks/person-badges.css","/styles/blocks/person-grid.css","/styles/blocks/person-links-list.css","/styles/blocks/person-page.css","/styles/blocks/person.css","/styles/blocks/persons-list.css","/styles/blocks/practices.css","/styles/blocks/question-form.css","/styles/blocks/questions.css","/styles/blocks/related-articles-list.css","/styles/blocks/search-category.css","/styles/blocks/search-hit.css","/styles/blocks/search-page.css","/styles/blocks/search-result-list.css","/styles/blocks/search-tag.css","/styles/blocks/search.css","/styles/blocks/snow-toggle.css","/styles/blocks/snow.css","/styles/blocks/social-card.css","/styles/blocks/standalone-page.css","/styles/blocks/subscribe-page.css","/styles/blocks/subscribe-popup.css","/styles/blocks/suggestion-list.css","/styles/blocks/switch.css","/styles/blocks/table-wrapper.css","/styles/blocks/tag-filter.css","/styles/blocks/text-control.css","/styles/blocks/theme-toggle.css","/styles/blocks/toc.css","/styles/blocks/visually-hidden.css","/styles/blocks/vote.css","/styles/base-colors.css","/styles/blocks","/styles/code-dark-theme.css","/styles/code-light-theme.css","/styles/dark-theme.css","/styles/fonts.css","/styles/fonts.sc.css","/styles/index.css","/styles/index.sc.css","/styles/light-theme.css"],debugScripts=["/scripts/core/base-component.js","/scripts/core/search-api-client.js","/scripts/core/search-commons.js","/scripts/libs/debounce.js","/scripts/libs/throttle.js","/scripts/modules/answer.js","/scripts/modules/article-aside.js","/scripts/modules/article-nav.js","/scripts/modules/articles-gallery.js","/scripts/modules/articles-index.js","/scripts/modules/code-line-numbers.js","/scripts/modules/cookie-notification.js","/scripts/modules/copy-code-snippet.js","/scripts/modules/feedback-form.js","/scripts/modules/filter-panel.js","/scripts/modules/form-cache.js","/scripts/modules/header-quick-search-presenter.js","/scripts/modules/header.js","/scripts/modules/last-update.js","/scripts/modules/linked-article-navigation.js","/scripts/modules/logo.js","/scripts/modules/people.js","/scripts/modules/person-badges-tooltip.js","/scripts/modules/person-badges.js","/scripts/modules/persons-list.js","/scripts/modules/practices.js","/scripts/modules/pwa.js","/scripts/modules/question-form.js","/scripts/modules/quick-search.js","/scripts/modules/search-page-filter.js","/scripts/modules/search.js","/scripts/modules/snow-toggle.js","/scripts/modules/subscribe-form.js","/scripts/modules/subscribe-popup.js","/scripts/modules/theme-toggle.js","/scripts/modules/toc-text-crop.js","/scripts/modules/toc.js","/scripts/modules/triggers.js"],assetsResources=["/fonts/graphik/graphik-medium.woff2","/fonts/graphik/graphik-regular.woff2","/fonts/graphik/graphik-regular-italic.woff2","/fonts/spot-mono/spot-mono-light.woff2","/scripts/index.js","/styles/index.css","/styles/dark-theme.css","/images/assets/cached-link.svg","/images/assets/non-cached-link.svg","/images/logo/logo-offline.svg","/images/partners/practicum.svg","/images/partners/practicum-icon.svg","/images/badges/doka-dog-help-10.svg","/images/badges/doka-dog-help-100.svg","/images/badges/doka-dog-help-5.svg","/images/badges/doka-dog-help-50.svg","/images/badges/first-contribution-small.svg","/images/badges/hackathon-practicum.svg","/images/badges/merged-pr-10.svg","/images/badges/merged-pr-100.svg","/images/badges/merged-pr-5.svg","/images/badges/merged-pr-50.svg","/images/badges/most-viewed-month-line.svg","/images/badges/most-viewed-month-zeta.svg","/images/badges/most-viewed-week-line.svg","/images/badges/most-viewed-week-zeta.svg","/images/badges/most-viewed-year-line.svg","/images/badges/most-viewed-year-zeta.svg","/images/badges/ny.svg","/images/badges/superstar.svg"],staticPages=[offlinePageUrl,"/","/404/","/about/","/a11y/","/all/","/css/","/html/","/js/","/letuchka/","/licenses/","/people/","/recipes/","/tools/","/ylf/"],cacheSettings={".avif":{dataType:"blob",headers:{"Content-Type":"image/avif"}},".bmp":{dataType:"blob",headers:{"Content-Type":"image/bmp"}},".css":{dataType:"text",headers:{"Content-Type":"text/css; charset=UTF-8"}},".gif":{dataType:"blob",headers:{"Content-Type":"image/gif"}},".html":{dataType:"text",headers:{"Content-Type":"text/html; charset=UTF-8"}},".ico":{dataType:"blob",headers:{"Content-Type":"image/x-icon"}},".jpg":{dataType:"blob",headers:{"Content-Type":"image/jpeg"}},".jpeg":{dataType:"blob",headers:{"Content-Type":"image/jpeg"}},".js":{dataType:"text",headers:{"Content-Type":"application/javascript; charset=UTF-8"}},".json":{dataType:"json",headers:{"Content-Type":"application/json; charset=UTF-8"}},".mpeg":{dataType:"blob",headers:{"Content-Type":"video/mpeg"}},".mp4":{dataType:"blob",headers:{"Content-Type":"video/mp4"}},".png":{dataType:"blob",headers:{"Content-Type":"image/png"}},".svg":{dataType:"text",headers:{"Content-Type":"image/svg+xml; charset=UTF-8"}},".tiff":{dataType:"blob",headers:{"Content-Type":"image/tiff"}},".webp":{dataType:"blob",headers:{"Content-Type":"image/webp"}},".woff2":{dataType:"blob",headers:{"Content-Type":"application/font-woff2"}}};function enableNavigationPreload(){return o(this,null,function*(){self.registration.navigationPreload&&(yield self.registration.navigationPreload.enable())})}function getMimeType(s){const e=typeof s=="string"?s.match(/\..+$/):void 0;if(e&&Array.isArray(e)&&typeof e[0]=="string"){const a=e[0].match(/^\.[a-z0-9]{2,5}/);return a?a[0]:""}else return".html"}function putInCache(s,e,a){return o(this,null,function*(){yield(yield caches.open(s)).put(e,a)})}function putInCacheWithSettings(s,e,a,c,t){return o(this,null,function*(){if(t&&t[c]&&t[c].dataType)switch(t[c].dataType){case"blob":yield putInCache(s,e,new Response(yield a.blob(),{headers:t[c].headers}));break;case"json":yield putInCache(s,e,new Response(yield a.json(),{headers:t[c].headers}));break;case"text":yield putInCache(s,e,new Response(yield a.text(),{headers:t[c].headers}));break;default:yield putInCache(s,e,new Response(yield a.text(),{headers:{"Content-Type":"text/plain; charset=UTF-8"}}));break}})}function cloneResponseInCache(s,e,a){return o(this,null,function*(){const c=new Request(e),t=a.clone();yield putInCacheWithSettings(s,c,t,getMimeType(e),cacheSettings)})}function putResInCache(s,e){return o(this,null,function*(){const a=new Request(e),c=yield fetch(a);return yield putInCacheWithSettings(s,a,c,getMimeType(e),cacheSettings),c})}function putResourcesInCache(s,e){return o(this,null,function*(){for(let a=0;a<e.length;a++)yield putResInCache(s,e[a])})}function putPageInCache(s,e,a=!0){return o(this,null,function*(){const c=yield putResInCache(s,e.replace(/\/#.+$/,""));if(typeof e=="string"&&e.match(/^\/(a11y|css|html|js|tools|recipes)\/.+\//))try{const t=yield(yield fetch(`${e}index.json`)).json();t.images&&(yield putResourcesInCache(s,t.images)),t.videos&&(yield putResourcesInCache(s,t.videos)),t.demos&&(yield putPagesInCache(s,t.demos,!1)),t.cover&&(yield putResInCache(s,t.cover.desktop),yield putResInCache(s,t.cover.mobile)),a&&t.links&&(yield putPagesInCache(s,t.links.inArticle.inside.filter(i=>!i.match("#")),!1),yield putPageInCache(s,t.links.nextArticle,!1),yield putPageInCache(s,t.links.previousArticle,!1),yield putPagesInCache(s,t.links.relatedArticles,!1))}catch(t){console.log(t)}else if(e.match(/^\/people\//)){const t=yield(yield fetch(`${e}index.json`)).json();t.images&&(yield putResourcesInCache(s,t.images)),t.links&&(yield putResourcesInCache(s,t.links))}return c})}function putPagesInCache(s,e,a=!0){return o(this,null,function*(){if(Array.isArray(e))for(let c=0;c<e.length;c++)(yield caches.match(new Request(e[c])))||(yield putPageInCache(s,e[c],a))})}function cacheStrategyImpl(t){return o(this,arguments,function*({cacheKey:s,request:e,preloadResponsePromise:a,fallbackUrl:c}){let i=e.url;const n=yield caches.match(e);if(n)return n;i.endsWith("index.html")&&(i=i.replace("index.html",""));try{const r=yield a;return r?(cloneResponseInCache(s,i,r),r):putResInCache(s,e)}catch(r){const l=yield caches.match(c);return l||new Response("408: \u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u0435\u0442\u0438",{status:408,headers:{"Content-Type":"text/plain; charset=UTF-8"}})}})}self.addEventListener("install",()=>o(this,null,function*(){self.location.origin.startsWith("http://localhost")&&(yield putResourcesInCache(debugStylesCacheName,debugStyles),yield putResourcesInCache(debugScriptsCacheName,debugScripts)),yield putResourcesInCache(assetsCacheName,assetsResources),yield putPagesInCache(staticCacheName,staticPages)})),self.addEventListener("activate",()=>o(this,null,function*(){const s=yield caches.keys();yield enableNavigationPreload(),yield Promise.all(s.filter(e=>e!==assetsCacheName).filter(e=>e!==dynamicCacheName).map(e=>caches.delete(e)))})),self.addEventListener("sync",s=>o(this,null,function*(){const e=yield caches.keys();if(s.tag===syncFeaturedCacheName&&!e.includes(syncFeaturedCacheName)){const c=yield(yield fetch("/featured.json")).json();yield putPagesInCache(syncFeaturedCacheName,c.map(t=>t.link),!1)}})),self.addEventListener("message",s=>o(this,null,function*(){yield putPageInCache(dynamicCacheName,s.data)})),self.addEventListener("fetch",s=>o(this,null,function*(){if(!s.request.startsWith(self.location.origin)&&s.request.method==="POST")return new Response(fetch(s.request));if(s.request.endsWith("sw.js"))return new Response(fetch(s.request));if(s.request.endsWith("manifest.json"))return new Response(fetch(s.request));if(s.request.indexOf(".html?")>-1||s.request.indexOf(".js?")>-1)return new Response(fetch(s.request));s.respondWith(cacheStrategyImpl({cacheKey:dynamicCacheName,request:s.request,preloadResponsePromise:s.preloadResponse,fallbackUrl:offlinePageUrl}))}));
