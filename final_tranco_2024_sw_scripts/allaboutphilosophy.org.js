"use strict";!function(e){const t=["/"],n=["/offline.htm"],c=["/404.htm"],a={assets:"assets-v14",content:"content-v14",offline:"offline-v14",notFound:"404-v14"},s={"/":3600,html:3600,json:86400,js:86400,css:86400},i=[],l=["GET"];function o(e){return i.length>0&&!i.filter(t=>"function"==typeof t&&!t(e)).length}function r(){return e.skipWaiting&&e.skipWaiting()||new Promise(e=>{})}e.addEventListener("install",e=>{e.waitUntil(Promise.all([Promise.all([caches.open(a.assets).then(e=>e.addAll(t)),caches.open(a.offline).then(e=>e.addAll(n)),caches.open(a.notFound).then(e=>e.addAll(c))]).then(()=>r()),r()]))}),e.addEventListener("activate",t=>{t.waitUntil(Promise.all([function(){let e=Object.keys(a).map(e=>a[e]);return new Promise((t,n)=>{caches.keys().then(t=>legacyKeys=t.filter(t=>!~e.indexOf(t))).then(e=>{e.length?Promise.all(e.map(e=>caches.delete(e))).then(()=>{t()}).catch(e=>{n(e)}):t()}).catch(()=>{n()})})}(),e.clients.claim(),r()]).catch(e=>{t.skipWaiting&&t.skipWaiting()}))}),e.addEventListener("fetch",e=>{e.respondWith(caches.open(a.content).then(t=>t.match(e.request).then(n=>{if(n){let c=n.headers.entries(),a=null;for(let e of c)"date"===e[0]&&(a=new Date(e[1]));if(a){let c=parseInt(((new Date).getTime()-a.getTime())/1e3),i=function(e){if("string"==typeof e){let t=function(e){let t=e.split(".").reverse()[0].split("?")[0];return t.endsWith("/")?"/":t}(e);return"number"==typeof s[t]?s[t]:null}return null}(e.request.url);return i&&c>i?new Promise(c=>fetch(e.request.clone()).then(a=>{a?(t.put(e.request,a.clone()),c(a)):c(n)}).catch(()=>{c(n)})).catch(e=>n):n}return n}return null}).then(n=>n||fetch(e.request.clone()).then(n=>n.status<400?(~l.indexOf(e.request.method)&&!o(e.request.url)&&t.put(e.request,n.clone()),n):caches.open(a.notFound).then(e=>e.match("/404.htm"))).then(e=>{if(e)return e}).catch(()=>caches.open(a.offline).then(e=>e.match("/offline.htm")))).catch(e=>{throw console.error("  Error in fetch handler:",e),e})))}),e.addEventListener("message",e=>{if("object"==typeof e.data&&"string"==typeof e.data.action)switch(e.data.action){case"cache":!function(e){o(e)||caches.open(a.content).then(t=>{t.match(e).then(t=>t?null:fetch(e)).then(n=>n?t.put(e,n.clone()):null)})}(e.data.url);break;default:console.log("Unknown action: "+e.data.action)}})}(self);