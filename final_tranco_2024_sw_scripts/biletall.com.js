var NAME="Offline",VERSION="0.1.1",FULL_NAME=NAME+" v"+VERSION,COMMON_CACHE="Offline",WORKER_CACHE="Worker-"+NAME,WORKER_CURRENT_CACHE=WORKER_CACHE+"-"+VERSION;function updateCache(){fetch("/cevrimdisi",{credentials:"include"}).then(function(t){200===t.status&&"Offline"===t.headers.get("ob-Page")&&caches.open(COMMON_CACHE).then(function(e){return Promise.all([e.put("Page",t),e.addAll(t.headers.get("ob-Offline").split(";"))])}).then(function(){return self.skipWaiting()})})}function log(e){console.log(FULL_NAME+": "+e)}self.addEventListener("install",function(e){updateCache(),log("installed")}),self.addEventListener("activate",function(e){return e.waitUntil(caches.keys().then(function(e){return Promise.all(e.filter(function(e){return!e.indexOf(WORKER_CACHE)&&e!==WORKER_CURRENT_CACHE}).map(function(e){return caches.delete(e)}))})),log("activated"),self.clients.claim()}),self.addEventListener("fetch",function(n){var e=n.request;"GET"!==e.method||e.url.indexOf(self.registration.scope)||("navigate"===e.mode?n.respondWith(fetch(e).then(function(e){return e}).catch(function(e){return caches.match("Page",{cacheName:COMMON_CACHE})})):n.respondWith(caches.match(n.request,{cacheName:COMMON_CACHE}).then(function(e){if(e)return e;var t=n.request.clone();return"only-if-cached"!==t.cache||"same-origin"===t.mode?fetch(t):void 0})))});