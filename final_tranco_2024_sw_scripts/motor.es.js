'use strict';self.addEventListener('install',event=>{self.skipWaiting();});self.addEventListener('push',function(event){console.log('[Service Worker] Push Received.');console.log(`[Service Worker] Push had this data: "${event.data.text()}"`);const data=JSON.parse(event.data.text());var url='https://www.motor.es';if(data.url_redirect!=0)
url=data.url_redirect;const title=data.title;const options={body:data.body,icon:data.icon,badge:data.badge,image:data.image,requireInteraction:true,vibrate:[200,100,300],data:{action:'open_url',url:url}};if(data.metadata&&data.metadata.debug){console.log('[Service Worker] Push Received. Debug mode.');}else{event.waitUntil(self.registration.showNotification(title,options));}});self.addEventListener('notificationclick',function(event){console.log('[Service Worker] Notification click Received.');event.notification.close();switch(event.notification.data.action){case 'open_url':event.waitUntil(clients.openWindow(event.notification.data.url));break;}});