console.log("[sw] init");const registration=self.registration,clients=self.clients;self.addEventListener("install",()=>{console.log("[sw] installing")});self.addEventListener("activate",()=>{console.log("[sw] activated")});self.addEventListener("message",n=>{const t=n.data;if(console.log("[sw] message",t),t&&t.action==="showNotification"){const{title:n,options:i}=t;registration.showNotification(n,i)}});self.addEventListener("notificationclick",n=>{n.notification.close(),n.waitUntil(clients.matchAll({type:"window"}).then(t=>{var i,r;const u=(i=n.notification.data)!==null&&i!==void 0?i:{url:"/home"},f={action:"notificationClick",data:u};for(const n of t)if("focus"in n)return n.postMessage(f),n.focus();return clients.openWindow((r=u.url)!==null&&r!==void 0?r:"/home").then(n=>{n.postMessage(f)})}))});self.addEventListener("push",n=>{const t=n.data.json();console.log("[sw] push",t);const{title:i,options:r}=t;n.waitUntil(registration.showNotification(i,r))});
