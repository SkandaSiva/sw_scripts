(function(){(function(){var i="offline-v4.0",r=["/offline","/favicon.ico"];self.addEventListener("install",function(n){n.waitUntil(caches.open(i).then(function(e){return e.addAll(r)})),self.skipWaiting()}),self.addEventListener("activate",function(n){"navigationPreload"in self.registration&&n.waitUntil(self.registration.navigationPreload.enable()),n.waitUntil(self.clients.claim())}),self.addEventListener("fetch",function(n){var e=n.request;if(e.mode==="navigate")try{return n.respondWith(function(){return n.preloadResponse.then(function(t){return t||fetch(e)}).catch(function(){return caches.open(i).then(function(t){return t.match(r[0])})})}())}catch(t){}var o=e.url;if(o.indexOf("/favicon.ico")!==-1)return n.respondWith(caches.open(i).then(function(t){return t.match("/favicon.ico")}));if(/^https:\/\/(music|testsource)-(201|202|203|204).boomplaymusic.com/.test(o)){var c=new Request(n.request,{headers:{"x-boomplay-ref":"Boomplay_WEBV1"},credentials:"omit",mode:"cors"});return n.respondWith(fetch(c).then(function(t){return t}).catch(function(){console.log("sw\u9519\u8BEF")}))}})})();})();
