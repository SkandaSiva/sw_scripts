!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(n="undefined"!=typeof globalThis?globalThis:n||self).sw=e()}(this,(function(){"use strict";function n(n,e,t,i){return new(t||(t=Promise))((function(o,r){function l(n){try{u(i.next(n))}catch(n){r(n)}}function a(n){try{u(i.throw(n))}catch(n){r(n)}}function u(n){var e;n.done?o(n.value):(e=n.value,e instanceof t?e:new t((function(n){n(e)}))).then(l,a)}u((i=i.apply(n,e||[])).next())}))}function e(n,e){var t,i,o,r,l={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(a){return function(u){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;r&&(r=0,a[0]&&(l=0)),l;)try{if(t=1,i&&(o=2&a[0]?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return l.label++,{value:a[1],done:!1};case 5:l.label++,i=a[1],a=[0];continue;case 7:a=l.ops.pop(),l.trys.pop();continue;default:if(!(o=l.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){l=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){l.label=a[1];break}if(6===a[0]&&l.label<o[1]){l.label=o[1],o=a;break}if(o&&l.label<o[2]){l.label=o[2],l.ops.push(a);break}o[2]&&l.ops.pop(),l.trys.pop();continue}a=e.call(n,l)}catch(n){a=[6,n],i=0}finally{t=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}self.addEventListener("install",(function(){self.skipWaiting()})),self.addEventListener("push",(function(t){var i,o,r=null!==(o=null===(i=t.data)||void 0===i?void 0:i.json())&&void 0!==o?o:null;null!==r&&t.waitUntil(function(t){return n(void 0,void 0,void 0,(function(){var n;return e(this,(function(e){switch(e.label){case 0:return n={body:t.body,data:t.url,tag:t.id,badge:t.badge},"image"in Notification.prototype?(n.icon=t.icon,n.image=t.image):n.icon=t.image,[4,self.registration.showNotification(t.title,n)];case 1:return e.sent(),[2]}}))}))}(r))}));return self.addEventListener("notificationclick",(function(t){var i=t.notification;i.close(),t.waitUntil(function(t){return n(void 0,void 0,void 0,(function(){var n,i,o,r,l,a;return e(this,(function(e){switch(e.label){case 0:return n=new URL(t.data,self.location.origin).href,[4,clients.matchAll({type:"window",includeUncontrolled:!0})];case 1:i=e.sent(),o=0,e.label=2;case 2:return o<i.length?(r=i[o]).url!==n?[3,4]:[4,r.focus()]:[3,5];case 3:return[2,e.sent()];case 4:return o++,[3,2];case 5:return[4,clients.openWindow(n)];case 6:return[4,null==(l=e.sent())?void 0:l.focus()];case 7:return[2,null!==(a=e.sent())&&void 0!==a?a:null]}}))}))}(i))})),null}));
