'use strict';self.addEventListener('install',()=>{self.skipWaiting()});self.addEventListener('push',function(event){console.log('Push message received.');let data={title:'Iltapulu',body:'',icon:'',url:'https://www.iltapulu.fi'};if(event.data){data=event.data.json()}const options={body:data.body,icon:'/static/img/iltapulu_cube.png',vibrate:[100,50,100],data:{dateOfArrival:Date.now(),primaryKey:'1',url:data.url,}};event.waitUntil(self.registration.showNotification(data.title,options))});self.addEventListener('notificationclick',function(event){console.log('Notification click received.');event.notification.close();event.waitUntil(clients.matchAll({type:'window'}).then(function(windowClients){for(var i=0;i<windowClients.length;i++){var client=windowClients[i];if(client.url===event.notification.data.url&&'focus' in client){return client.focus()}}if(clients.openWindow){return clients.openWindow(event.notification.data.url)}}))})