(()=>{"use strict";var e=new(function(){function e(e){this.module=e}return e.prototype.info=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n]},e}())("service-worker"),t={static:1,consent:1,flyout:1,skipWaiting:0};self.addEventListener("install",(function(){var n=new URL(self.location.toString());Object.keys(t).forEach((function(e){null!=n.searchParams.get(e)&&(t[e]=parseInt(n.searchParams.get(e),10))})),1===t.skipWaiting&&self.skipWaiting(),e.info("installed service worker "+JSON.stringify(t))})),self.addEventListener("activate",(function(n){e.info("service worker activate"),n.waitUntil(caches.keys().then((function(n){var r=[];return n.forEach((function(n){var c=n.match(/^rvg-(.+)::v(\d+)$/);null!=c&&null!=t[c[1]]&&t[c[1]]!==parseInt(c[2],10)&&(e.info("delete cache ".concat(n," - expect version ").concat(c[2])),r.push(caches.delete(n)))})),Promise.all(r)})).then((function(){return self.clients.claim()})))})),self.addEventListener("fetch",(function(n){var r=n.request.url;(function(e){return!!new RegExp("^https?://".concat(self.location.host,"/assets/")).test(e)||!(!/^https?/.test("https://ravensburger.cloud/web-evo/")||!new RegExp("https://ravensburger.cloud/web-evo/").test(e))})(r)&&"only-if-cached"!==n.request.cache&&n.respondWith(caches.match(n.request.url).then((function(c){return c?(e.info("cached "+r),c):fetch(n.request).then((function(n){return caches.open((c="static","rvg-".concat(c,"::v").concat(t[c]||0))).then((function(t){return function(t,n){return/\.[\da-f]{20}\.es[56]\./.test(n)?(n=n.replace(/\.[\da-f]{20}\.es[56]\..+$/,""),t.keys().then((function(r){var c=[];return r.forEach((function(r){r.url.substring(0,n.length)===n&&(e.info("delete "+r.url),c.push(t.delete(r.url)))})),Promise.all(c)}))):t.match(n,{ignoreSearch:!0}).then((function(r){return null!=r?(e.info("delete "+n.replace(/\?.+$/,"")),t.delete(n,{ignoreSearch:!0})):Promise.resolve(!1)}))}(t,r).then((function(){return null!=n.status&&200===n.status&&(e.info("add to cache "+r),t.put(r,n.clone())),n}))}));var c}))})))}))})();