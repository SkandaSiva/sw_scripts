self.addEventListener("fetch",function(e){if(console.log(e.request.url),event.request.headers.get("range")){var t=Number(/^bytes\=(\d+)\-$/g.exec(event.request.headers.get("range"))[1]);console.log("Range request for",event.request.url,", starting position:",t),event.respondWith(caches.open(CURRENT_CACHES.prefetch).then(function(e){return e.match(event.request.url)}).then(function(e){return e?e.arrayBuffer():fetch(event.request).then(e=>e.arrayBuffer())}).then(function(e){return new Response(e.slice(t),{status:206,statusText:"Partial Content",headers:[["Content-Range","bytes "+t+"-"+(e.byteLength-1)+"/"+e.byteLength]]})}))}else e.respondWith(caches.match(e.request).then(function(t){return t||fetch(e.request)}))});