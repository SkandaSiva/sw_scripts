'use strict';let notificationUrl='';function getQueryVariable(variable,url){var query=url.split("?")[1];var vars=query.split("&");for(var i=0;i<vars.length;i++){var pair=vars[i].split("=");if(pair[0]==variable){return pair[1];}}
return(false);}
self.addEventListener('push',function(event){let _data=event.data?JSON.parse(event.data.text()):{};let _badge=_data.b?_data.b:'';let _image=_data.img?_data.img:'';let _action=_data.a?_data.a:[];notificationUrl=_data.url;const title=_data.title;const options={body:_data.message,icon:_data.icon,image:_image,badge:_badge,requireInteraction:true,data:notificationUrl,actions:_action,vibrate:[300,100,400]};event.waitUntil(self.registration.showNotification(title,options).then(function(){var utm_source=getQueryVariable("utm_source",notificationUrl);let e={site:'te',u_s:utm_source};fetch("https://www.silverglad.com/show-impression7",{mode:"no-cors",body:JSON.stringify(e),method:"POST",headers:{'content-type':'application/json'}}).then(function(e){return;})}));});self.addEventListener('notificationclick',function(event){event.notification.close();var redirectUrl=null;if(event.notification.data){redirectUrl=event.notification.data?event.notification.data:null;}else{redirectUrl='https://www.trackingex.com/';}
event.waitUntil(clients.openWindow(redirectUrl));self.registration.pushManager.getSubscription().then(function(subscription){var end_point=subscription.endpoint;var utm_source=getQueryVariable("utm_source",redirectUrl);let e={site:'te',endpoint:end_point,url:redirectUrl,utm_source:utm_source};fetch("https://www.silverglad.com/click-action7",{mode:"no-cors",body:JSON.stringify(e),method:"POST",headers:{'content-type':'application/json'}}).then(function(e){return;})});});self.addEventListener('fetch',function(event){});