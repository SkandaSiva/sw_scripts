var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value)})}return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})};const cacheName="v1",cacheAssets=["index.html","http://127.0.0.1:5000/assets/mock.jpg"],URLS_WHITELISTED=["http://127.0.0.1:5000/assets/mock.jpg"],addResourcesToCache=resources=>__awaiter(void 0,void 0,void 0,function*(){yield(yield caches.open(cacheName)).addAll(resources)}),setupServiceWorker=()=>{self.addEventListener("activate",event=>{console.log("active",event)}),self.addEventListener("install",event=>{console.log("INSTALLING SW")}),self.addEventListener("fetch",event=>{console.log("SW: Fetching!");const{request}=event,url=request.url;URLS_WHITELISTED.some(whitelistedURL=>whitelistedURL===url)&&event.respondWith(handleRequest(url,event,getResponse))})},handleRequest=(url,event,getResponseFn)=>__awaiter(void 0,void 0,void 0,function*(){console.log("SW: Handling request!");const response=yield getResponseFn(url);return response||fetch(event.request)}),getResponse=url=>__awaiter(void 0,void 0,void 0,function*(){let responseFromCacheServer;for(let i=0;i<3;i++)try{if(responseFromCacheServer=yield fetch("http://127.0.0.1:5000/assets/unicorn.jpg"),responseFromCacheServer.ok)return responseFromCacheServer}catch(error){console.log(error)}return null}),handleMimeType=response=>{const mimeType=response.headers.get("Content-Type");if(mimeType){const handler={}[mimeType];if(handler.length>0)return handler()}return response};setupServiceWorker();
//# sourceMappingURL=/cdn/shop/t/151/assets/sw.js.map?v=112344449243154910221726573188
