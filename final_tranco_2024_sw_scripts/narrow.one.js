const t=self;globalThis.VERSION_TIMESTAMP="000";const e=["/","/static/fonts/BlueNight.woff2","/static/img/logo.svg","/static/manifest.json","/js/narrowCssWorklet-DYPaIRD6.js","/js/colors-DcK-Z6mG.js","/js/index-Cs8ZB4OB.js","/js/module-workers-polyfill-5503f0ff-C8ZGsdlw.js","/js/subworkers-f28dd231-DEgT2DJG.js","/js/index-DIiC6R4I.js","/js/assetWorkerPreload-CkF3kKMa.js"],a=["../static/"];for(const[t,e]of a.entries()){const s=new URL(e,location.href);a[t]=s.pathname}async function s(){return await caches.open("narrowClient1731014282")}t.addEventListener("install",(t=>{t.waitUntil((async()=>{const t=await s();await t.addAll(e)})())})),t.addEventListener("activate",(e=>{e.waitUntil((async()=>{t.registration.navigationPreload&&await t.registration.navigationPreload.disable();for(const t of await caches.keys()){let e=!1;("swCache"==t||t.match(/^narrowClient\d+$/)&&"narrowClient1731014282"!=t)&&(e=!0),e&&caches.delete(t)}})())})),t.addEventListener("fetch",(t=>{const n=new URL(t.request.url),{read:i,write:r}=function(t){const s=t.pathname;if(t.hostname.endsWith(".narrow.one")||"narrow.one"==t.hostname){if("/"==s&&t.search)return{read:!0,write:!1};for(const t of a)if(s.startsWith(t))return{read:!0,write:!0};for(const t of e)if(s==t)return{read:!0,write:!0}}return{read:!1,write:!1}}(n);(i||r)&&t.respondWith((async()=>{if(i){const e=await s(),a=await e.match(t.request,{ignoreSearch:!0});if(a)return a}const e=await fetch(t.request);if(r&&e.ok){const a=e.clone();t.waitUntil((async()=>{(await s()).put(t.request,a)})())}return e})())})),t.addEventListener("message",(e=>{"skipWaiting"==e.data.type&&t.skipWaiting()}));
