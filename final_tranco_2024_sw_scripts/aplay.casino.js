(()=>{var $=(s,t)=>()=>(t||s((t={exports:{}}).exports,t),t.exports);var m=(s,t,e)=>new Promise((a,o)=>{var i=n=>{try{r(e.next(n))}catch(l){o(l)}},d=n=>{try{r(e.throw(n))}catch(l){o(l)}},r=n=>n.done?a(n.value):Promise.resolve(n.value).then(i,d);r((e=e.apply(s,t)).next())});var g=$(h=>{const c=new Map,p=(s,t)=>({$msgId$:s.$msgId$,$error$:t}),f=s=>new Promise(t=>m(h,null,function*(){const e=yield s.clone().json(),a=yield(o=>new Promise(i=>m(h,null,function*(){const r=[...yield self.clients.matchAll()].sort((n,l)=>n.url>l.url?-1:n.url<l.url?1:0)[0];if(r){const l=[i,setTimeout(()=>{c.delete(o.$msgId$),i(p(o,"Timeout"))},12e4)];c.set(o.$msgId$,l),r.postMessage(o)}else i(p(o,"NoParty"))})))(e);t(u(JSON.stringify(a),"application/json"))})),u=(s,t)=>new Response(s,{headers:{"content-type":t||"text/html","Cache-Control":"no-store"}});self.oninstall=()=>self.skipWaiting();self.onactivate=()=>self.clients.claim();self.onmessage=s=>{const t=s.data,e=c.get(t.$msgId$);e&&(c.delete(t.$msgId$),clearTimeout(e[1]),e[0](t))};self.onfetch=s=>{const t=s.request,a=new URL(t.url).pathname;a.endsWith("sw.html")?s.respondWith(u('<!DOCTYPE html><html><head><meta charset="utf-8"><script src="./partytown-sandbox-sw.js?v=0.8.0"><\/script></head></html>')):a.endsWith("proxytown")&&s.respondWith(f(t))}});g();})();

//# sourceMappingURL=partytown-sw.js.map