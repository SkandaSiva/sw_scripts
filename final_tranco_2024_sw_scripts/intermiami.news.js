const version="1.15.31",childVersion="1.0.9",expectedCaches=["grv-parent-"+version,"grv-child-"+childVersion];self.addEventListener("install",function(e){e.waitUntil(caches.open("grv-parent-"+version).then(function(e){let t=["/custom/themes/grv-media/js/app.js?ver=1.15.31","/custom/themes/grv-media/css/deferred-carousel.css?ver=1.15.31","/offline/"];return Array.isArray(t)||(t=[]),e.addAll(t)})),e.waitUntil(caches.open("grv-child-"+childVersion).then(function(e){let t=[];return Array.isArray(t)||(t=[]),e.addAll(t)}))}),self.addEventListener("activate",function(e){e.waitUntil(async function(){self.registration.navigationPreload&&await self.registration.navigationPreload.enable()}()),e.waitUntil(caches.keys().then(function(e){return Promise.all(e.map(function(e){return(/^grv-/.test(e)||/^AMP-/.test(e))&&-1==expectedCaches.indexOf(e)?caches.delete(e):void 0}))}))}),self.addEventListener("fetch",function(t){var e=t.request;"only-if-cached"===t.request.cache&&"same-origin"!==t.request.mode||(e.headers.get("Accept").includes("text/html")&&t.respondWith(fetch(e).then(function(e){return e}).catch(function(e){return caches.match("/offline/")})),(e.headers.get("Accept").includes("text/css")||e.headers.get("Accept").includes("text/javascript"))&&t.respondWith(async function(){var e=await caches.match(t.request);return e||await t.preloadResponse||fetch(t.request)}()))});