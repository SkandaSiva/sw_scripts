var STATIC_CACHE_NAME="luzhniki-static:2024-09-09T16:24:39",DATA_CACHE_NAME="luzhniki-data";function selectImage(e,n){return e.replace(/(\.[a-z]+)$/,function(e){var t="";return n&&("true"===n.retina&&(t="@2x"),"true"===n.webp)&&(e=".webp"),t+e})}function precache(t){return Promise.all([caches.open(STATIC_CACHE_NAME).then(function(e){return e.addAll(["/static/vendor/normalize.min.css","/static/core/css/global.min.css","/static/vendor/jquery.min.js","/static/vendor/modernizr.min.js","/static/core/js/global.min.js","/static/core/img/sprite.svg",selectImage("/static/core/img/tech.png",t)])}),caches.open(DATA_CACHE_NAME).then(function(e){return e.addAll(["/offline/"])})]).then(function(){return self.skipWaiting()})}function getCacheName(e){return e.url.match(/\/(static)\//i)?STATIC_CACHE_NAME:DATA_CACHE_NAME}function get(a){return fetch(a).then(function(e){var t,n;return 200===e.status&&(t=e.clone(),n=getCacheName(a),caches.open(n).then(function(e){e.put(a,t)})),e}).catch(function(){return caches.open(getCacheName(a)).then(function(t){return t.match(a).then(function(e){return e||("navigate"===a.mode?t.match("/offline/"):"image"===a.destination?new Response('<svg xmlns="http://www.w3.org/2000/svg" width="120" height="80" viewBox="0 0 120 80"><path fill="#F0F0F0" fill-rule="nonzero" d="M68.929 27.6L58.313 44.8l-10.456-8.428L31 62h59L68.929 27.6zM37.32 31.9c3.49 0 6.3220003-2.885 6.3220003-6.45C43.643 21.89 40.81 19 37.32 19 33.832 19 31 21.89 31 25.45c0 3.565 2.832 6.45 6.321 6.45h-.001z"/></svg>',{status:503,statusText:"SW: Service Unavailable",headers:new Headers({"Content-Type":"image/svg+xml"})}):new Response("<h1>Service Unavailable</h1>",{status:503,statusText:"SW: Service Unavailable",headers:new Headers({"Content-Type":"text/html"})}))})})})}function remove(){return caches.keys().then(function(e){return Promise.all(e.map(function(e){if(e!==STATIC_CACHE_NAME&&e!==DATA_CACHE_NAME)return caches.delete(e)}))})}function isValidPathname(t){var n=!0;return["/admin","/ajax","/forms","/master","service-worker.min.js"].forEach(function(e){-1!==t.indexOf(e)&&(n=!1)}),n}self.addEventListener("install",function(e){var n={};new URL(self.location).searchParams.forEach(function(e,t){n[t]=e}),e.waitUntil(precache(n))}),self.addEventListener("activate",function(e){e.waitUntil(remove()),e.waitUntil(self.clients.claim())}),self.addEventListener("fetch",function(e){var t=new URL(e.request.url),n="GET"===e.request.method,a=t.origin===self.location.origin,i="XMLHttpRequest"!==e.request.headers.get("X-Requested-With");n&&a&&isValidPathname(t.pathname)&&i&&e.respondWith(get(e.request))});