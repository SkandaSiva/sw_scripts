(()=>{"use strict";var __webpack_modules__={843:(e,r,t)=>{t.d(r,{Nm:()=>n,TQ:()=>o,xB:()=>c});var o=Number("0"),n="https://js.wpshsdk.com/npc/sdk/common/config.js",c="https://js.wpshsdk.com/npc/sdk/common/core.js"},801:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _constants__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(843);function asyncGeneratorStep(e,r,t,o,n,c,a){try{var _=e[c](a),i=_.value}catch(e){return void t(e)}_.done?r(i):Promise.resolve(i).then(o,n)}function _asyncToGenerator(e){return function(){var r=this,t=arguments;return new Promise((function(o,n){var c=e.apply(r,t);function a(e){asyncGeneratorStep(c,o,n,a,_,"next",e)}function _(e){asyncGeneratorStep(c,o,n,a,_,"throw",e)}a(void 0)}))}}var CACHE_ID="tc-worker";const __WEBPACK_DEFAULT_EXPORT__=class{constructor(){this.workerRequest=new Request(_constants__WEBPACK_IMPORTED_MODULE_0__.xB)}getWorker(){var _this=this;return _asyncToGenerator((function*(){var response=yield caches.match(_this.workerRequest);response||(yield _this.loadWorker(),response=yield caches.match(_this.workerRequest));var code=yield response.text();try{eval(code)}catch(e){return Promise.reject(e)}return self.getWorker()}))()}reloadWorker(){var e=this;return _asyncToGenerator((function*(){try{yield e.loadWorker()}catch(e){new Error("[Worker Loader] ".concat(e))}return e.getWorker()}))()}loadWorker(){var e=this;return _asyncToGenerator((function*(){return caches.open(CACHE_ID).then((r=>r.add(e.workerRequest)))}))()}}}},__webpack_module_cache__={};function __webpack_require__(e){var r=__webpack_module_cache__[e];if(void 0!==r)return r.exports;var t=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](t,t.exports,__webpack_require__),t.exports}__webpack_require__.d=(e,r)=>{for(var t in r)__webpack_require__.o(r,t)&&!__webpack_require__.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})},__webpack_require__.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r);var __webpack_exports__={};(()=>{var e=__webpack_require__(843);function r(){e.TQ&&console.log(...arguments)}function t(e,r,t,o,n,c,a){try{var _=e[c](a),i=_.value}catch(e){return void t(e)}_.done?r(i):Promise.resolve(i).then(o,n)}function o(e){return function(){var r=this,o=arguments;return new Promise((function(n,c){var a=e.apply(r,o);function _(e){t(a,n,c,_,i,"next",e)}function i(e){t(a,n,c,_,i,"throw",e)}_(void 0)}))}}var n=__webpack_require__(801);function c(e,r,t,o,n,c,a){try{var _=e[c](a),i=_.value}catch(e){return void t(e)}_.done?r(i):Promise.resolve(i).then(o,n)}function a(e){return function(){var r=this,t=arguments;return new Promise((function(o,n){var a=e.apply(r,t);function _(e){c(a,o,n,_,i,"next",e)}function i(e){c(a,o,n,_,i,"throw",e)}_(void 0)}))}}var _=["install","activate","message","notificationclick","notificationclose","push"],i=new class{constructor(){this.configRequest=new Request(e.Nm),this.config=null}getConfig(){var e=this;return o((function*(){return e.config=yield e.fetchConfig(),e.setCache(),r("Config was loaded, config - ",e.config),e.config}))()}setCache(){var e=this;return o((function*(){var r=yield caches.open("worker-config");yield r.put(e.configRequest,new Response(JSON.stringify(e.config)))}))()}getCache(){var e=this;return o((function*(){var r=yield caches.match(e.configRequest);return yield r.json()}))()}fetchConfig(){var e=this;return o((function*(){try{var t=yield fetch(e.configRequest);return yield t.json()}catch(t){var o=yield e.getCache();return r("Config was loaded from cache, config - ",o),o}}))()}},s=new n.Z;new class{constructor(){this.workerController=null,_.forEach((e=>{self.addEventListener(e,(e=>e.waitUntil(this.eventHandler(e)))),r("[Worker Loader] Subscribe to event ".concat(e))}))}eventHandler(e){var r=this;return a((function*(){if(r.workerController||(r.workerController=yield r.loadWorker()),r.workerController[e.type])return r.workerController[e.type](e)}))()}loadWorker(){return a((function*(){var e,t,o,[n,c]=yield(e=[i.getConfig(),s.getWorker()],Promise.allSettled&&Promise.allSettled(e)||Promise.all(e.map((e=>e.then((e=>({status:"fulfilled",value:e}))).catch((e=>({status:"rejected",reason:e})))))));try{t=(c=c.value).getVersion(),o=n.value.sw_ver!==t}catch(e){o=!0}if(o)try{r("[Worker Loader] Try to fetch new Worker version, old version was ".concat(t,".")),t=(c=yield s.reloadWorker()).getVersion()}catch(e){return Promise.reject(e)}return r("[Worker Loader] Worker version was ".concat(t||"not"," loaded.")),new c}))()}}})()})();