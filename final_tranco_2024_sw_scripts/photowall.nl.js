self.addEventListener("activate",(function(){return self.clients.claim()})),self.addEventListener("fetch",(function(e){if(/(images.photowall.com|images-dev.photowall.com).*\.jpg($|\?)/.test(e.request.url)){if("cors"==e.request.mode)return;if(e.request.headers.has("accept")&&e.request.headers.get("accept").includes("webp")){const t=e.request.clone(),s=new URL(t.url);"/collections"===s.pathname?s.search=s.search.replace(/\.jpg/g,".webp"):s.pathname=`${s.pathname.slice(0,-3)}webp`,e.respondWith(fetch(s.toString(),{mode:"no-cors"}))}}}));