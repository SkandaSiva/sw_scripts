const CACHE_VERSION="assets_4.3.2",CACHE_NAME="::static-cache",ROOT_PATH="localhost"===self.location.hostname?"/site/hr-fernsehen":"",OFFLINE_URL=`${ROOT_PATH}/index~offline.html`,urlsToCache=[OFFLINE_URL,`${ROOT_PATH}/assets_4.3.2/index.css`,`${ROOT_PATH}/assets_4.3.2/fonts/RobotoSlabbed.woff`,`${ROOT_PATH}/assets_4.3.2/fonts/DINPro.woff`,`${ROOT_PATH}/assets_4.3.2/base/icons/icons/svgmap.min.svg`,`${ROOT_PATH}/assets_4.3.2/base/icons/404/svgmap.min.svg`,`${ROOT_PATH}/assets_4.3.2/base/icons/logo/svgmap.min.svg`,`${ROOT_PATH}/assets_4.3.2/base/icons/favicon/favicon-256.png`,`${ROOT_PATH}/assets_4.3.2/base/icons/favicon/favicon-144.png`,`${ROOT_PATH}/assets_4.3.2/base/icons/favicon/favicon-64.png`,`${ROOT_PATH}/assets_4.3.2/base/icons/favicon/favicon.ico`,`${ROOT_PATH}/assets_4.3.2/base/icons/logo/brandlogo--desk.min.svg`,`${ROOT_PATH}/assets_4.3.2/base/icons/logo/brandlogo--mobile.min.svg`];self.addEventListener("install",(function(e){self.skipWaiting(),e.waitUntil(caches.open(CACHE_VERSION+CACHE_NAME).then((function(e){return e.addAll(urlsToCache)})).then((function(){})))})),self.addEventListener("activate",(e=>{e.waitUntil(async function(){self.registration&&self.registration.navigationPreload&&await self.registration.navigationPreload.enable()}().then(caches.keys().then((function(e){e.forEach((function(e){e!==CACHE_VERSION+CACHE_NAME&&caches.delete(e)}))}))))})),self.addEventListener("fetch",(e=>{const{request:t}=e;t.headers.has("range")||e.respondWith(async function(){const n=await caches.match(t);if(n)return n;try{const n=await e.preloadResponse;return n||await fetch(t)}catch(e){if("navigate"===t.mode){const e=await caches.open(CACHE_VERSION+CACHE_NAME);return await e.match(OFFLINE_URL)}throw e}}())}));const externalIds=[];async function handleMessage(e){const t=e.data.notificationOptions;let n=!0;if(0===externalIds.length)externalIds.push({id:e.data.notificationOptions.data.externalId,time:Date.now()}),self.registration.showNotification(e.data.title,t);else{for(let t=0;t<externalIds.length;t++)externalIds[t].id===e.data.notificationOptions.data.externalId&&Date.now()-externalIds[t].time<=5e3&&(n=!1);n&&(externalIds.push({id:e.data.notificationOptions.data.externalId,time:Date.now()}),self.registration.showNotification(e.data.title,t))}}self.addEventListener("message",(async e=>{e.waitUntil(handleMessage(e))})),self.addEventListener("notificationclick",(function(e){e.notification.close();const{eventSrc:t,data:n}=e.notification;if(!n||!n.tickerUrl)return;const{tickerUrl:s,jumpUrl:a}=e.notification.data;e.waitUntil(clients.matchAll({type:"window"}).then((e=>{e.some((function(e){let t=e.url;const n=e.url.indexOf("#");return t=t.substring(0,-1!==n?n:t.length),t===s&&(e.focus().then((e=>e.postMessage({type:"reload",jumpUrl:a}))),!0)}))||clients.openWindow(a).then((e=>e?e.focus():null))})))}));