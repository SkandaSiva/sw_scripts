const a="static-v27",expectedCaches=[a];self.addEventListener("install",(e=>{self.skipWaiting(),e.waitUntil(async function(){caches.open(a).then((e=>e.addAll(["/html/offline.html","/html/error.html","/static/images/logo.png","/player/kt_player.js?=2.3.1","/player/skin/youtube.css","/static/styles/jquery.fancybox-metal.css?v=8.3","/static/js/main.min.js?v=2.2.2.2"])))}())})),self.addEventListener("activate",(e=>{e.waitUntil(async function(){self.registration.navigationPreload&&await self.registration.navigationPreload.enable(),caches.keys().then((e=>Promise.all(e.map((e=>{if(!expectedCaches.includes(e))return caches.delete(e)})))))}())})),self.addEventListener("fetch",(e=>{const t=new URL(e.request.url);t.origin!==location.origin||/(\/get_file)/.test(t.pathname)||e.respondWith(async function(){const t=await caches.match(e.request);if(t)return t;try{return await e.preloadResponse||await fetch(e.request)}catch(e){return navigator.onLine?caches.match("/html/error.html"):caches.match("/html/offline.html")}}())}));