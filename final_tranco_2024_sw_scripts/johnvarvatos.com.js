

self.serverPreparedData = {"offlineUrl":"/on/demandware.static/Sites-johnvarvatos-Site/-/default/dw7bd47b28/offline.html","cachedParts":[{"url":"/on/demandware.store/Sites-johnvarvatos-Site/en_US/Page-IncludeHeaderMenuGlobaleCache?sw=true","placeholder":"$swheader$","skipParameter":"sw_skipheader","cacheSuffix":"header","cacheCleanTriggerActions":["set-site","Account-Login","Account-SaveNewPassword","Account-SubmitRegistration","Login-Logout","Order-CreateAccount","CSRF-Fail"],"globaleCountryChangeReload":true},{"url":"/on/demandware.store/Sites-johnvarvatos-Site/en_US/Cart-MiniCart?sw=true","placeholder":"$swminicarticon$","skipParameter":null,"cacheSuffix":"MiniCartIcon","cacheCleanTriggerActions":["set-site","Cart-AddProduct","cart","Cart-UpdateQuantity","Cart-RemoveProductLineItem","Cart-AddCoupon","Cart-RemoveCouponLineItem","Cart-EditProductLineItem","CSRF-AjaxFail","CSRF-Fail","CheckoutServices-PlaceOrder","orderconfirmation","COPlaceOrder-Submit","Account-Login","Login-Logout","Cart-RemoveGiftCertificateLineItem","Cart-AddGiftCertificate","checkout","Globale-CheckoutShow"]},{"url":"/on/demandware.store/Sites-johnvarvatos-Site/en_US/Page-IncludeFooter?sw=true","placeholder":"$swfooter$","skipParameter":"sw_skipfooter","cacheSuffix":"footer","cacheCleanTriggerActions":[],"globaleCountryChangeReload":true}],"cachedUrls":[{"url":"/on/demandware.store/Sites-johnvarvatos-Site/en_US/Cart-MiniCartShow","cacheSuffix":"MiniCartShow","cacheCleanTriggerActions":["set-site","Cart-AddProduct","cart","Cart-UpdateQuantity","Cart-RemoveProductLineItem","Cart-AddCoupon","Cart-RemoveCouponLineItem","Cart-EditProductLineItem","CSRF-AjaxFail","CSRF-Fail","CheckoutServices-PlaceOrder","orderconfirmation","COPlaceOrder-Submit","Account-Login","Login-Logout","Cart-RemoveGiftCertificateLineItem","Cart-AddGiftCertificate","checkout","Globale-CheckoutShow"]},{"url":"/wishlist","cacheSuffix":"WishlistShow","cacheCleanTriggerActions":["Wishlist-AddProduct","Wishlist-RemoveProduct","Wishlist-EditProductListItem"]}],"urlSiteId":"johnvarvatos","urlLocale":"en_US","cacheVersion":"v1731214962902"};
(()=>{"use strict";const e="$sw",t=20,r="x-sf-cc-siteid",s="x-sf-cc-requestlocale";function n(e,t,r,s){const n=e.length;let a=t,i=0,c=!1,o=!1,l=null;const u=s.map((t=>({config:t,placeholderBytes:t.placeholderBytes,length:t.placeholderBytes.length,match:t.placeholderBytes[i]===e[a],finished:1===t.placeholderBytes.length,beginIndex:0,endIndex:0})));for(a++,i++;a<n&&u.length>0&&!c&&!o;){c=!0;for(let t=u.length-1;t>=0;t--){const r=u[t];i<r.length&&(r.match=r.match&&r.placeholderBytes[i]===e[a]),i===r.length-1&&(r.finished=!0),c=c&&r.finished,o=o||r.finished&&r.match,r.match||u.splice(t,1)}a++,i++}return o&&(l=u[0],l.endIndex=a-1,l.beginIndex=l.endIndex-l.length-r.length+1),l}function a(...e){let t=0;for(let r=0;r<e.length;r++)t+=e[r].length;const r=new Uint8Array(t);let s=0;for(let t=0;t<e.length;t++)r.set(e[t],s),s+=e[t].length;return r}self.buildSuitePreparedData={codeVersion:"JV-24.10.1-92",isProductionBuild:!0};const i=self.buildSuitePreparedData.codeVersion+"_"+self.serverPreparedData.cacheVersion,c=self.serverPreparedData.offlineUrl;function o(e){let t=!1;return e.searchParams.has("countryChanged")&&(t="1"===e.searchParams.get("countryChanged")),t}async function l(e){const t=e.request.url.split("?")[0].match(/\/([^/]+)(\/$|\/\?|\?|$)/);if(!t)return;const r=t[1],s=Object.keys(self.cacheCleanActions).find((e=>-1!==r.indexOf(e)))||"",n=self.cacheCleanActions[s]||[],a=[];if(n.length>0){const e=await caches.open(i),t=await e.keys();for(const r of t)n.find((e=>-1!==r.url.indexOf("."+e)))&&a.push(e.delete(r))}await Promise.all(a)}async function u(u){let h;try{await async function(e){return o(new URL(e.request.url))?async function(){const e=await caches.keys();return Promise.all(e.map((e=>caches.delete(e))))}():Promise.resolve()}(u),await l(u);const c=await async function(e){const t=new URL(e.url);let r=!1;const s=o(t);if(self.serverPreparedData.cachedParts&&self.serverPreparedData.cachedParts.forEach((function(e){!e.skipParameter||s&&e.globaleCountryChangeReload||(r||(r=t.searchParams.has(e.skipParameter)),t.searchParams.append(e.skipParameter,"true"))})),r){const t=new URL(e.url);return self.serverPreparedData.cachedParts.forEach((function(e){e.skipParameter&&t.searchParams.delete(e.skipParameter)})),t}if(/on\/demandware.store\/[^?]+\/__/.test(e.url))return e;const n={cache:e.cache,credentials:e.credentials,headers:e.headers,method:e.method,referrer:e.referrer,redirect:"manual"},a=await e.arrayBuffer();return a&&a.byteLength>0&&(n.body=a),new Request(t.toString(),n)}(u.request);if(c instanceof URL)return Response.redirect(c,301);if(h=await fetch(c),401===h.status)return new Response("\n        <html>\n            <head>\n                <script>\n                    navigator.serviceWorker.getRegistrations().then(function(registrations) {\n                        var unregisterPromises = registrations.map((registration) => registration.unregister());\n                        return Promise.all(unregisterPromises);\n                    }).then(function () {\n                        window.location.reload();\n                    }).catch(function () {\n                        window.location.reload();\n                    });\n                <\/script>\n            </head>\n            <body>\n            </body>\n        </html>\n    ",{headers:new Headers({"Content-Type":"text/html"})});if(301===h.status||302===h.status||"opaqueredirect"===h.type)return h;h=function(i,c,o){const l=function(e){const t={status:e.status,statusText:e.statusText,headers:{"X-ServedByServiceWorker":"true"}};return e.headers.forEach((function(e,r){t.headers&&(t.headers[r]=e)})),t}(i),u=l.headers&&l.headers[r],h=l.headers&&l.headers[s];if(!u||!h)return i;const d=new ReadableStream({done:!1,promisesQueue:[],async start(){this.reader=await(i.body?.getReader());const{placeholderPrefixBytes:t,placeholderConfigs:r}=function(t){const r=new TextEncoder;return{placeholderPrefixBytes:r.encode(e),placeholderConfigs:t.map((t=>{if(0!==t.placeholder.indexOf(e))throw Error(`All placeholders should start from ${e}. Please fix configuration!`);return{...t,placeholderBytes:r.encode(t.placeholder.replace(e,""))}}))}}(c);this.placeholderPrefixBytes=t,this.placeholderConfigs=r,this.promisesQueue.push(this.getNextChunkFromBaseResponse())},async getNextChunkFromBaseResponse(){return{...await(this.reader?.read()),isBaseResponse:!0}},async getFromQueue(){const e=await this.promisesQueue.shift();for(;e&&e.mergeWithNext&&this.promisesQueue.length>0;){const{done:t,value:r,mergeWithNext:s,isBaseResponse:n}=await this.promisesQueue.shift()||{};e.done=e.done||t||!1,e.mergeWithNext=s,e.isBaseResponse=n,r&&(e.value=a(e.value||new Uint8Array,r))}return e},async pull(e){if(!this.promisesQueue.length)return e.close(),null;const{done:r,value:s,isBaseResponse:a}=await this.getFromQueue();if(this.done=this.done||r,this.done&&!s)return e.close(),null;const{foundPlaceholder:i,chunkBeforePlaceholder:c,chunkAfterPlaceholder:l,lastBytes:d}=function(e,r,s,a){const i=e.length;let c=0,o=0,l=null,u=e,h=null,d=null;for(;c<i&&!l;){for(;e[c]===r[o]&&o<r.length&&c<i;)o++,c++;o===r.length&&c<i&&(l=n(e,c,r,s)),o=0,c++}return l?(u=e.slice(0,l.beginIndex),h=e.slice(l.endIndex+1)):a||(u.length>t?(d=u.slice(u.length-t),u=u.slice(0,u.length-t)):(d=u,u=null)),{foundPlaceholder:l,chunkBeforePlaceholder:u,chunkAfterPlaceholder:h,lastBytes:d}}(s||new Uint8Array,this.placeholderPrefixBytes||new Uint8Array,this.placeholderConfigs||[],this.done);return c&&e.enqueue(c),d&&this.promisesQueue.unshift(Promise.resolve({value:d,mergeWithNext:!0,done:!1})),l&&this.promisesQueue.unshift(Promise.resolve({value:l,mergeWithNext:!0,done:!1})),i&&this.promisesQueue.unshift(async function(e,t,r,s){const n=t+"."+r+"."+e.cacheSuffix;let a=await caches.match(n);if(!a){let i=e.url;i=i.replace(`-${self.serverPreparedData.urlSiteId}-`,`-${t}-`),i=i.replace(`/${self.serverPreparedData.urlLocale}/`,`/${r}/`),a=await fetch(new Request(i));const c=await caches.open(s);await c.put(n,a.clone())}return{value:new Uint8Array(await a.arrayBuffer()),done:!1}}(i.config,u,h,o)),!this.done&&a&&this.promisesQueue.push(this.getNextChunkFromBaseResponse()),this.pull&&this.pull(e)},cancel(){this.done=!0,this.promisesQueue=[]}});return new Response(d,l)}(h,self.serverPreparedData.cachedParts,i)}catch(e){const t=await caches.open(i);h=await t.match(c)}return h}self.cacheCleanActions=function(){const e={};for(const t of self.serverPreparedData.cachedParts)for(const r of t.cacheCleanTriggerActions)e[r]=e[r]||[],e[r].push(t.cacheSuffix);for(const t of self.serverPreparedData.cachedUrls)for(const r of t.cacheCleanTriggerActions)e[r]=e[r]||[],e[r].push(t.cacheSuffix);return e}(),self.addEventListener("install",(e=>{e.waitUntil(async function(){const e=await caches.open(i);await e.add(new Request(c,{cache:"reload"}))}()),self.skipWaiting()})),self.addEventListener("activate",(e=>{e.waitUntil(async function(){"navigationPreload"in self.registration&&await self.registration.navigationPreload.disable()}()),async function(){const e=await caches.keys();Promise.all(e.filter((e=>e!==i)).map((e=>caches.delete(e))))}(),self.clients.claim()})),self.addEventListener("fetch",(e=>{const t=e.request,n=function(e){const t=e.request.headers.get(r),n=e.request.headers.get(s);if(n&&t)return self.serverPreparedData.cachedUrls.find((function(r){let s=r.url.replace(`-${self.serverPreparedData.urlSiteId}-`,`-${t}-`);return s=s.replace(`/${self.serverPreparedData.urlLocale}/`,`/${n}/`),-1!==e.request.url.indexOf(s)}))}(e);"same-origin"===t.mode&&n?e.respondWith(async function(e,t){if(t){const n=await caches.open(i),a=e.request.headers.get(r)+"."+e.request.headers.get(s)+"."+t.cacheSuffix;let c=await caches.match(a);return c||(c=await fetch(e.request),e.waitUntil(n.put(a,c.clone())),c)}return fetch(e.request)}(e,n)):"same-origin"===t.mode?e.waitUntil(l(e)):"navigate"===t.mode?e.respondWith(u(e)):function(e){return!!self.buildSuitePreparedData.isProductionBuild&&(t=e.url,!(!/\/demandware.static\//g.test(t)||/\/demandware.static\/-\/Sites-[^/]+/g.test(t))&&(-1!==["image","script","style","font"].indexOf(e.destination)||function(e){return/.*\.(js|css)/.test(e)}(e.url)));var t}(t)&&e.respondWith(async function(e){const t=await caches.open(i),r=await t.match(e);let s;if(r)s=r;else{const r=await fetch(e);t.put(e,r.clone()),s=r}return s}(t))}))})();
