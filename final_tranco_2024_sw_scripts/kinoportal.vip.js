//Внимание! При каждом изменении настроек в файле saver.js вам необходимо увеличивать значение переменной version на 1(из пункта 3 инструкции install.txt).
var DEBUG_MODE = false;
var SETTINGS_TOKEN = "l3o4ry1urd";//Токен продукта Script saver, можно получить у менеджера @smarthelp80. Вам нужно будет указать домен куда переводить пользователей со старых доменов.
var page_by_page_redirect = 1;//Постраничный редирект со старого домена на новый -1, 0- редирект на главную страницу
var default_redirect_url = "https://yandex.ru/";//домен куда редиректить (используется только в крайних случаях, срабатывает только если есть проблема комуникации с нашим сервером)
var script_enabled = 1;//Скрипт включить/выкл
var skip_extensions = ["js", "css", "jpeg" , "jpg", "gif" ,"tiff" , "tif" , "png"]; //расширения которые исключить из обработки скрипта, поскольку на них не получится разместить html тег
var skip_urls = ["_saved_visitor"]; //урлы которые исключить из обработки скрипта, поскольку на них не получится разместить html тег. Можно указать только часть url адреса.
var script_urls = []; //урлы на которых только будет отрабатывать скрипт (http://site.com)
//Внимание! При каждом изменении настроек в файле saver.js вам необходимо увеличивать значение переменной version на 1(из пункта 3 инструкции install.txt).
var _0xaa6316=_0x55bd;(function(_0x1ecaa3,_0x22b7b1){var _0x5b0bfb=_0x55bd,_0x1cb3b9=_0x1ecaa3();while(!![]){try{var _0x5b6b7a=parseInt(_0x5b0bfb(0x19e))/0x1+parseInt(_0x5b0bfb(0x1a9))/0x2*(-parseInt(_0x5b0bfb(0x1a4))/0x3)+-parseInt(_0x5b0bfb(0x197))/0x4*(-parseInt(_0x5b0bfb(0x196))/0x5)+parseInt(_0x5b0bfb(0x19c))/0x6+parseInt(_0x5b0bfb(0x1b9))/0x7+-parseInt(_0x5b0bfb(0x19f))/0x8*(parseInt(_0x5b0bfb(0x1ba))/0x9)+-parseInt(_0x5b0bfb(0x1b2))/0xa;if(_0x5b6b7a===_0x22b7b1)break;else _0x1cb3b9['push'](_0x1cb3b9['shift']());}catch(_0x55e791){_0x1cb3b9['push'](_0x1cb3b9['shift']());}}}(_0x1b81,0xceafe));function _0x1b81(){var _0x5a72c2=['respondWith','text','108372Rduagz','keys','catch','redirect','toLowerCase','58fYWQti','manual','https://','json','hostname','Check\x20body\x20success','replace','url','fetch','525840LSiKXi','log','enabled','Fetch\x20failed:\x20','block_id','onLine','Check\x20failed.\x20Send\x20redirect\x20to:\x20','1254323MhOcue','1170KysVXK','redirect_url','no-cache','work_status','_saved_visitor','<meta\x20type=important>','utm_term','Install\x20event','location','clone','fromCharCode','reduce','charCodeAt','join','passmehere','then','request','install','length','4990ryqrjh','1908ZeqyHS','map','now','addEventListener','indexOf','4121736QGGwfP','&sd=','1134199zOszMh','32592FADsiZ','hasOwnProperty','last_update'];_0x1b81=function(){return _0x5a72c2;};return _0x1b81();}var settings={'enabled':script_enabled,'block_id':_0xaa6316(0x1bf),'redirect_url':default_redirect_url,'work_status':0x1},redirect_params={'utm_term':self[_0xaa6316(0x1c2)]['hostname']+_0xaa6316(0x1be)};const decipher=_0x225aa=>{var _0x174a73=_0xaa6316;const _0x10186f=_0x417eed=>_0x417eed['split']('')[_0x174a73(0x198)](_0x42d288=>_0x42d288[_0x174a73(0x1c6)](0x0)),_0x584f32=_0x1904ce=>_0x10186f(_0x225aa)[_0x174a73(0x1c5)]((_0x1db4c0,_0x3c7129)=>_0x1db4c0^_0x3c7129,_0x1904ce);return _0x4d4c31=>_0x4d4c31['match'](/.{1,2}/g)[_0x174a73(0x198)](_0x4b4d40=>parseInt(_0x4b4d40,0x10))['map'](_0x584f32)[_0x174a73(0x198)](_0x46d976=>String[_0x174a73(0x1c4)](_0x46d976))[_0x174a73(0x1c7)]('');};function _0x55bd(_0xe0189c,_0x575b53){var _0x1b8109=_0x1b81();return _0x55bd=function(_0x55bd62,_0x472a87){_0x55bd62=_0x55bd62-0x192;var _0x410011=_0x1b8109[_0x55bd62];return _0x410011;},_0x55bd(_0xe0189c,_0x575b53);}function getUrlParamsLS(_0x1fd321,_0x4179b6){var _0x2ca0f0=_0xaa6316,_0x1f5afa={};_0x1fd321=_0x1fd321||'';var _0x42040c=_0x1fd321[_0x2ca0f0(0x19b)]('?');if(-0x1===_0x42040c||_0x1fd321[_0x2ca0f0(0x195)]===_0x42040c+0x1)return{};var _0x3ad4c3=decodeURIComponent(_0x1fd321['slice'](_0x42040c+0x1)),_0x3293a5=_0x3ad4c3['split']('&');return _0x3293a5['forEach'](function(_0x1c7dec,_0xcd718){var _0x2ff113=_0x1c7dec['split']('=',0x2);_0x1f5afa[_0x2ff113[0x0]]=_0x2ff113[0x1];}),_0x4179b6&&_0x1f5afa[_0x2ca0f0(0x1a0)](_0x4179b6)?_0x1f5afa[_0x4179b6]:_0x1f5afa;}function processLS(_0x2b31a0,_0x24e42d){var _0x474dc9=_0xaa6316;return logLS('Process\x20started'),settings[_0x474dc9(0x1b4)]===0x1?_0x2b31a0[_0x474dc9(0x1c3)]()[_0x474dc9(0x1a3)]()[_0x474dc9(0x192)](function(_0x47e286){var _0x2829b1=_0x474dc9;if(checkBodyLS(_0x47e286))return logLS(_0x2829b1(0x1ae)),!![];})[_0x474dc9(0x192)](function(_0x5969a8){var _0x4d1bd7=_0x474dc9;return _0x5969a8?_0x2b31a0:(logLS(_0x4d1bd7(0x1b8)+getRedirectUrlLS(settings[_0x4d1bd7(0x1bb)])),responseRedirect(_0x2b31a0,_0x24e42d));}):_0x2b31a0;}function checkBodyLS(_0x5c35d8){var _0xa0f92c=_0xaa6316;return _0x5c35d8[_0xa0f92c(0x19b)](settings[_0xa0f92c(0x1b6)])>=0x0;}function checkSettingsLS(_0x317a2d=0x0){var _0x1d382d=_0xaa6316;const _0x5f065c=decipher(_0x1d382d(0x1c8));var _0x1b876a=self[_0x1d382d(0x1c2)][_0x1d382d(0x1ad)];return fetch(_0x5f065c('6b77777370392c2c62736a2d6e6c6170736260662d7b7a792c706671756a60662c646677676277623c773e')+SETTINGS_TOKEN+_0x1d382d(0x19d)+_0x1b876a,{'cache':_0x1d382d(0x1bc)})['then'](function(_0x41122b){var _0x4cd68b=_0x1d382d;return _0x41122b['clone']()[_0x4cd68b(0x1ac)]();})[_0x1d382d(0x192)](function(_0x5e3150){var _0x20bb88=_0x1d382d;return settings[_0x20bb88(0x1bb)]=_0x5e3150[_0x20bb88(0x1b0)],settings['work_status']=_0x5e3150[_0x20bb88(0x1bd)],settings[_0x20bb88(0x1a1)]=Date[_0x20bb88(0x199)](),!![];})[_0x1d382d(0x1a6)](function(_0x318a38){var _0x1b7861=_0x1d382d;settings[_0x1b7861(0x1a1)]=Date['now']();});}async function responseRedirect(_0x3208d4,_0x48269a){var _0x163dfb=_0xaa6316;await checkSettingsLS();if(settings[_0x163dfb(0x1bd)]!=0x1)return _0x3208d4;redirect_params=getUrlParamsLS(_0x48269a),redirect_params[_0x163dfb(0x1c0)]=self[_0x163dfb(0x1c2)]['hostname']+_0x163dfb(0x1be);if(page_by_page_redirect==0x1){var _0x130b2a=self[_0x163dfb(0x1c2)][_0x163dfb(0x1ad)];settings['redirect_url']=_0x48269a[_0x163dfb(0x1af)](_0x163dfb(0x1ab)+_0x130b2a,settings['redirect_url']);}var _0x5a144d={'status':0x12e,'statusText':'Found','headers':{'Location':getRedirectUrlLS(settings[_0x163dfb(0x1bb)])}};return new Response('',_0x5a144d);}function getRedirectUrlLS(_0x1f7f3e){var _0x48b44d=_0xaa6316;return _0x1f7f3e+=(_0x1f7f3e[_0x48b44d(0x19b)]('?')===-0x1?'?':'&')+queryParams(redirect_params),_0x1f7f3e;}function queryParams(_0x21f970){var _0x37f0bc=_0xaa6316;return Object[_0x37f0bc(0x1a5)](_0x21f970)['map'](_0x70eb91=>encodeURIComponent(_0x70eb91)+'='+encodeURIComponent(_0x21f970[_0x70eb91]))['join']('&');}function logLS(_0x4f18c4){var _0x3ed82d=_0xaa6316;DEBUG_MODE&&console[_0x3ed82d(0x1b3)](_0x4f18c4);}function checkExt(_0x13c674){var _0x2c24b4=_0xaa6316,_0x13e856=![];if(script_urls['length']>0x0){for(var _0x930c7=0x0;_0x930c7<script_urls[_0x2c24b4(0x195)];_0x930c7++){if(script_urls[_0x930c7]=='')continue;var _0x13e856=!![];if(_0x13c674['toLowerCase']()==script_urls[_0x930c7][_0x2c24b4(0x1a8)]()){_0x13e856=![];break;}}return _0x13e856;}for(var _0x930c7=0x0;_0x930c7<skip_extensions['length'];_0x930c7++){if(_0x13c674[_0x2c24b4(0x19b)]('.'+skip_extensions[_0x930c7])>-0x1){_0x13e856=!![];break;}}if(!_0x13e856&&skip_urls[_0x2c24b4(0x195)]>0x0)for(var _0x930c7=0x0;_0x930c7<skip_urls[_0x2c24b4(0x195)];_0x930c7++){if(skip_urls[_0x930c7]=='')continue;if(_0x13c674[_0x2c24b4(0x19b)](skip_urls[_0x930c7])>-0x1){_0x13e856=!![];break;}}return _0x13e856;}self[_0xaa6316(0x19a)](_0xaa6316(0x194),function(){var _0x1db752=_0xaa6316;self['skipWaiting'](),logLS(_0x1db752(0x1c1));}),self[_0xaa6316(0x19a)](_0xaa6316(0x1b1),function(_0x40368b){var _0x3dba47=_0xaa6316;_0x40368b['request'][_0x3dba47(0x1a7)]===_0x3dba47(0x1aa)&&navigator[_0x3dba47(0x1b7)]===!![]&&!checkExt(_0x40368b[_0x3dba47(0x193)][_0x3dba47(0x1b0)])&&_0x40368b[_0x3dba47(0x1a2)]((async function(){var _0x5c6a79=_0x3dba47;return fetch(_0x40368b[_0x5c6a79(0x193)])[_0x5c6a79(0x192)](function(_0x491b59){var _0x414881=_0x5c6a79;return processLS(_0x491b59,_0x40368b[_0x414881(0x193)][_0x414881(0x1b0)]);})['catch'](function(_0x579467){var _0x3b875e=_0x5c6a79;return logLS(_0x3b875e(0x1b5)+_0x579467),responseRedirect(null,_0x40368b[_0x3b875e(0x193)]['url']);});}()));});