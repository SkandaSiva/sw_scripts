importScripts('https://storage.googleapis.com/workbox-cdn/releases/5.0.0/workbox-sw.js');workbox.core.skipWaiting();workbox.core.clientsClaim();const CACHE_VERSION='v1.1.0.1690351157';const OFFLINE_PAGE_URL='/oc-content/plugins/alsyed_extreme_progressive_web_app_builder/offline.html';const ALLOWED_HOSTS=[location.host,'ajax.googleapis.com','fonts.googleapis.com','fonts.gstatic.com','cdnjs.cloudflare.com']
const NETWORK_PAGES_ONLY_MATCH_CALL_BACK=({url,event})=>{var cacheExcludeUrls=["https:\/\/www.dealmarkaz.pk\/user\/login","https:\/\/www.dealmarkaz.pk\/user\/register","https:\/\/www.dealmarkaz.pk\/item\/post-classified-ad","https:\/\/www.dealmarkaz.pk\/item\/edit\/0\/","https:\/\/www.dealmarkaz.pk\/profile","https:\/\/www.dealmarkaz.pk\/contact"];return cacheExcludeUrls.some(v=>event.request.url.includes(v));}
var isAdminArea=function(url){return(url.indexOf('https://www.dealmarkaz.pk/oc-admin/')==0);};workbox.precaching.precacheAndRoute([{url:OFFLINE_PAGE_URL,revision:CACHE_VERSION}]);workbox.routing.registerRoute(({event})=>isAdminArea(event.request.url),new workbox.strategies.NetworkOnly(),);workbox.routing.registerRoute(NETWORK_PAGES_ONLY_MATCH_CALL_BACK,new workbox.strategies.NetworkOnly(),);workbox.routing.registerRoute(({url,event})=>{return((event.request.method==='GET')&&(event.request.destination==='document')&&(event.request.url.includes(location.host)));},new workbox.strategies.NetworkFirst({cacheName:'pages-cache',plugins:[new workbox.expiration.ExpirationPlugin({maxEntries:50,maxAgeSeconds:2592000,})],}));workbox.routing.registerRoute(({url,event})=>{return((event.request.destination==='script')&&(ALLOWED_HOSTS.some(v=>event.request.url.includes(v))));},new workbox.strategies.CacheFirst({cacheName:'scripts-cache',plugins:[new workbox.expiration.ExpirationPlugin({maxEntries:50,maxAgeSeconds:2592000,})],}),);workbox.routing.registerRoute(({url,event})=>{return((event.request.destination==='style')&&(ALLOWED_HOSTS.some(v=>event.request.url.includes(v))));},new workbox.strategies.CacheFirst({cacheName:'styles-cache',plugins:[new workbox.expiration.ExpirationPlugin({maxEntries:50,maxAgeSeconds:2592000,})],}),);workbox.routing.registerRoute(({url,event})=>{return((event.request.destination==='font')&&(ALLOWED_HOSTS.some(v=>event.request.url.includes(v))));},new workbox.strategies.CacheFirst({cacheName:'fonts-cache',plugins:[new workbox.expiration.ExpirationPlugin({maxEntries:50,maxAgeSeconds:2592000,})],}),);workbox.routing.registerRoute(({url,event})=>{return((event.request.destination==='image')&&(ALLOWED_HOSTS.some(v=>event.request.url.includes(v))));},new workbox.strategies.CacheFirst({cacheName:'images-cache',plugins:[new workbox.expiration.ExpirationPlugin({maxEntries:50,maxAgeSeconds:2592000,})],}),);workbox.routing.setDefaultHandler(new workbox.strategies.NetworkOnly());workbox.routing.setCatchHandler(({event})=>{if(isAdminArea(event.request.url)){return Response.error();}
switch(event.request.destination){case'document':return workbox.precaching.matchPrecache(OFFLINE_PAGE_URL);break;default:return Response.error();break;}});var clearOldCaches=function(event){event.waitUntil(caches.keys().then(function(cacheNames){let validCacheSet=new Set(Object.values(workbox.core.cacheNames));return Promise.all(cacheNames.filter(function(cacheName){return!validCacheSet.has(cacheName);}).map(function(cacheName){return caches.delete(cacheName);}));}));};self.addEventListener("activate",function(event){clearOldCaches(event);});