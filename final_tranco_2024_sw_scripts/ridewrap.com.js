!function(){async function $bbca70f785afe9cf$export$2e2bcd8739ae039(e){if(new.target)throw Error("awaitDefined() cannot be called with new.");let t=Symbol.for(e);if(void 0!==self[e]&&(Object.defineProperty(self,e,{writable:!1,configurable:!1,enumerable:!0}),self[t]=Promise.resolve(self[e])),self[t])return self[t];let n=new Promise(t=>{Object.defineProperty(self,e,{get(){},set(n){delete self[e],Object.defineProperty(self,e,{value:n,writable:!1,configurable:!1,enumerable:!0}),t(n)},configurable:!0,enumerable:!1})});return self[t]=n,n}function $a2337b7c7cea9244$export$2e2bcd8739ae039(e,t,n="bold"){return new Proxy(self.console,{get:(...e)=>function(){}})}let e=$a2337b7c7cea9244$export$2e2bcd8739ae039("MessageHandlers","darkslateblue");let $910dd1f3fcbc7021$export$7e767dbbbc73ce23=class $910dd1f3fcbc7021$export$7e767dbbbc73ce23{constructor(){this.handlers={}}addHandler(e,t){this.handlers[e]=t}getHandlers(){return this.handlers}handleMessage(t){if(null===t.data){e.debug("Message received: null");return}e.debug("Attempting to handle the message received: ",t);let n=t.data;n.command,"string"==typeof n.command&&this.hasHandler(n.command)&&(e.debug(`Found handler for message command: ${n.command}`),this.handlers[n.command](n.type,n.data).then(async e=>{let n=t.source;"object"==typeof n&&n&&"WindowClient"===n.constructor.name&&(e?n.postMessage({...e}):n.postMessage({type:"error",message:"Resolved to void."}))}).catch(t=>{e.error("Error handling message",t)}))}hasHandler(e){return this.handlers.hasOwnProperty(e)}};self.awaitDefined=$bbca70f785afe9cf$export$2e2bcd8739ae039,self.createDynamicConsole=$a2337b7c7cea9244$export$2e2bcd8739ae039;let t=self.createDynamicConsole("ServiceWorker","royalblue");"RideWrap"in self||(self.RideWrap=Object.create(null)),self.fetchHandlers=[],self.messageHandlers=new $910dd1f3fcbc7021$export$7e767dbbbc73ce23,self.importScripts("https://cdn.jsdelivr.net/npm/idb-keyval/dist/umd.js"),self.importScripts("/wp-content/plugins/ridewrap-utilities/public/js/swm.js");let n="ridewrap-service-worker",s=`${n}-0.1.0`,a=self.location.protocol,r=self.location.hostname,l=self.location.pathname,o=l.substring(0,l.lastIndexOf("/")),c=`${o}/wp-admin/admin-ajax.php`,i=`${a}//${r}${c}?action=ridewrap_swc`;self.addEventListener("install",function(e){e.waitUntil(fetch(new Request(i)).then(function(e){return e.ok?e.json():(t.debug("Notice: No manifest present; presuming dev version."),Promise.resolve([]))}).then(function(e){t.dir(e)}))}),self.addEventListener("activate",function(e){e.waitUntil(clients.claim()),e.waitUntil(caches.keys().then(function(e){return Promise.all(e.map(function(e){return e.startsWith(n)&&e!==s?caches.delete(e):Promise.resolve()}))}))}),self.addEventListener("fetch",function(e){}),self.addEventListener("message",async e=>{e.data.command&&self.messageHandlers?self.messageHandlers.handleMessage(e):t.debug("Received unknown message")})}();
