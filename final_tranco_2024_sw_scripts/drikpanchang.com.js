"use strict";importScripts('https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js');importScripts('https://www.gstatic.com/firebasejs/8.10.0/firebase-messaging.js');var kUTMMediumPushNotification="dp_push";var kUTMSourcePushNotification="dp_web";var kUTMCampaignPushNotification="dp_push_messaging";var kWebPlatform="web";var kFCMTokenKey="fcm-token";var kFCMTopicKey="fcm-topic";var kFCMDeliveryYYYYMMDDDateKey="fcm-delivery-date";var kFCMPlatformKey="fcm-platform";firebase.initializeApp({apiKey:"AIzaSyCYYJVYTUuW-WGTPCvH3vb6M7LsxzxbyKM",authDomain:"fir-drikpanchang.firebaseapp.com",databaseURL:"https://fir-drikpanchang.firebaseio.com",projectId:"firebase-drikpanchang",storageBucket:"firebase-drikpanchang.appspot.com",messagingSenderId:"816637316526",appId:"1:816637316526:web:39610abf8992b880c6cc3f",measurementId:"G-3GYFX0X6CX"});const messaging=firebase.messaging();messaging.setBackgroundMessageHandler(function(payload){var payloadDataObj=JSON.parse(payload.data.dp_fcm_payload);var title=payloadDataObj.dp_title;var description=payloadDataObj.dp_description;var smallImage=payloadDataObj.dp_image_web_url;var bigImage=payloadDataObj.dp_big_image_web_url;var url=payloadDataObj.dp_topic_web_url;var priorityWebUrl=payloadDataObj.dp_priority_web_url;if('undefined'!==typeof(priorityWebUrl)&&0!==priorityWebUrl.length){url=priorityWebUrl;}if('undefined'===typeof(url)||0===url.length){url="/index.html?src=dp";}if('undefined'==typeof(smallImage)||null==smallImage)smallImage="https://www.drikpanchang.com/images/logo/2x/logo_panditji.png";url=getNotificationOpenURL(payloadDataObj,url);return self.registration.showNotification(title,{body:description,icon:smallImage,image:bigImage,tag:url});});self.addEventListener('notificationclick',function(event){var url=event.notification.tag;event.notification.close();event.waitUntil(self.clients.openWindow(url));});self.addEventListener('notificationclose',function(event){console.log("notification pop up closed.");});function getNotificationOpenURL(payloadDataObj,url){var topic=payloadDataObj.dp_topic_int_value;var fcmDeliveryDate=payloadDataObj.dp_dispatched_yyyymmdd_date;return url+"&utm_source="+kUTMSourcePushNotification+"&utm_medium="+kUTMMediumPushNotification+"&utm_campaign="+kUTMCampaignPushNotification+"&"+kFCMTopicKey+"="+topic+"&"+kFCMPlatformKey+"="+kWebPlatform+"&"+kFCMDeliveryYYYYMMDDDateKey+"="+fcmDeliveryDate;}