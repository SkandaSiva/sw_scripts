const CACHE_NAME="xotaku-app-v3.4",ASSETS_TO_CACHE=["/mirai/fonts/rubik-ar300x900.woff2","/mirai/fonts/rubik-en300x900.woff2","/favicon.ico",];self.addEventListener("install",t=>{t.waitUntil((async()=>{let t=await caches.open(CACHE_NAME);await t.addAll(ASSETS_TO_CACHE),self.skipWaiting()})())}),self.addEventListener("activate",t=>{t.waitUntil((async()=>{let t=await caches.keys();await Promise.all(t.map(t=>{if(t!==CACHE_NAME)return caches.delete(t)})),self.clients.claim()})())}),self.addEventListener("fetch",t=>{t.respondWith((async()=>{let e=await caches.open(CACHE_NAME);if("GET"===t.request.method){if(new URL(t.request.url).origin!==self.location.origin)return fetch(t.request);if(["style","script","image","font"].includes(t.request.destination)){let i=await e.match(t.request);if(i)return i;let a=await fetch(t.request);return e.put(t.request,a.clone()),a}try{let n=await fetch(t.request);return e.put(t.request,n.clone()),n}catch{return e.match(t.request)}}return fetch(t.request)})())});