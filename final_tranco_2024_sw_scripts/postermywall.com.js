const a="pmw-pwa-cache",s="/offline/offline-pwa-page.html",n="/offline/assets/NunitoSans-Bold.woff",t="/favicon-redesigned.ico",i=[s,n,t],o={inquireIsLocal:{type:"get_isLocal"},inquireIsPWA:{type:"get_isPWA"}},c={isLocalResponse:"isLocal",isPWAResponse:"isPWA"};self.addEventListener("message",e=>{e.data&&"SKIP_WAITING"===e.data.type&&self.skipWaiting()}),self.addEventListener("install",async e=>{self.skipWaiting(),e.waitUntil(caches.open(a).then(a=>{const e=new BroadcastChannel("core-sw-channel");e.postMessage(o.inquireIsLocal),e.onmessage=e=>{e.data&&e.data.type===c.isLocalResponse&&(e.data.isLocal||a.addAll(i))}}).catch(e=>{console.log(e)}))}),self.addEventListener("fetch",e=>{"navigate"===e.request.mode?navigator.onLine||e.respondWith((async()=>{const e=await caches.open(a);return e.match(s)})()):e.request.url.includes(n)?e.respondWith((async()=>{const e=await caches.open(a);return e.match(n)})()):e.request.url.includes("favicon.ico")&&e.respondWith((async()=>{const e=await caches.open(a);return e.match(t)})())}),self.addEventListener("activate",e=>{e.waitUntil((async()=>{self.registration.navigationPreload&&await self.registration.navigationPreload.disable()})())});