(()=>{"use strict";(()=>{if("undefined"!=typeof __webpack_require__){var e=__webpack_require__.u,t=__webpack_require__.e,n={},r={};__webpack_require__.u=function(t){return e(t)+(n.hasOwnProperty(t)?"?"+n[t]:"")},__webpack_require__.e=function(i){return t(i).catch(function(t){var o=r.hasOwnProperty(i)?r[i]:5;if(o<1){var a=e(i);throw t.message="Loading chunk "+i+" failed after 5 retries.\n("+a+")",t.request=a,window.handleResourceLoadError(t,i),t}return new Promise(function(e){setTimeout(function(){var t=Date.now();n[i]=t,r[i]=o-1,e(__webpack_require__.e(i))},200*(5-o+1))})})}}})();let e=self;function t(t,n,r,i){if(t)try{fetch(`${e.registration.scope}oapi/tradingplatform/log`,{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify([{AppName:"serviceWorker",Data:i,IsFatal:!1,IsNetworkError:!1,LogLevel:n,Message:`[service-worker] ${r}`}])}).catch(()=>{})}catch(e){}}let n={info:function(){},warn:t.bind(null,!0,"warn"),error:t.bind(null,!0,"error")},r="config"+new URL(e.registration.scope).pathname.replace(/\//g,""),i="---config---",o="---lastUpdate---";function a(e){if(n.info("got bundles",e),e)return Promise.all(Object.values(e).map(s)).then(()=>n.info("Caching complete"))}function s(t){return n.info("fetching bundle",t),d(t.startsWith("http")?t:e.registration.scope+t).catch(()=>{})}function c(e,t){return caches.open(r).then(n=>n.put(e,new Response(t)))}function u(e){return caches.open(r).then(t=>t.match(e)).then(e=>null==e?void 0:e.clone())}function f(){return n.info("check for bundles update"),u(o).then(e=>{if(e)return n.info("got a last update response"),e.text();n.info("got no response for last update")}).then(e=>(n.info("got a last update response",e),e)?isNaN(Number(e))?0:Number(e):(n.info("didnt get a last update response",e),0)).catch(e=>(n.info("Failed to get last update time",e),0)).then(t=>{if(n.info("got last updated",t),t+36e5<Date.now())return u(i).then(e=>null==e?void 0:e.json()).then(t=>{if(t)return n.info("Checking for updated bundles for",t),(function(t){let{appId:r,appIds:i,language:o,theme:a}=t,s=r?`&appId=${r}`:"";s=i?`&appIds=${i}`:s;let c=a?`&theme=${a}`:"",u=`${e.registration.scope}static/v.ashx?lang=${o}${s}${c}`;return n.info("Fetching manifest with",u),d(u).catch(()=>void 0).then(e=>null==e?void 0:e.json())})(t).then(a).then(()=>{var e;return e=Date.now(),n.info("storing last update",e),c(o,String(e))})})}).catch(e=>{n.warn("Failed to do bundles update check",{message:null==e?void 0:e.message,stack:null==e?void 0:e.stack})})}function d(e,t){return fetch(e,t).then(t=>t.ok?t:(n.warn("Failed to fetch",{url:e}),Promise.reject(t)))}e.addEventListener("install",function(){let t=null!=e.registration.active;n.info(`Installing (${t?"update":"first time"}) ...`),t&&e.skipWaiting(),n.info("Installation succeeded.")}),e.addEventListener("activate",()=>n.info("Activating")),e.addEventListener("message",function(e){let t=e.data;n.info("Config received",t),c(i,JSON.stringify(t)),e.waitUntil(f())}),e.addEventListener("fetch",function(){}),e.addEventListener("error",function(e){n.error("Unhandled error in service worker",{lineno:e.lineno,colno:e.colno,message:e.message})}),n.info("Started. Scope:",e.registration.scope),setInterval(function(){return n.info("Scheduled update check",new Date().toISOString()),n.info("Checking for worker update"),e.registration.update(),f()},36e5),setTimeout(f,5e3)})();