var CACHE_NAME='v5';var urlsToCache=['/anime.html','/series.html','/offline.html','/neterr.html'];self.addEventListener('install',function(event){event.waitUntil(caches.open(CACHE_NAME).then(function(cache){return cache.addAll(urlsToCache);}));});self.addEventListener('activate',function(event){var cacheWhitelist=[CACHE_NAME];event.waitUntil(caches.keys().then(function(keyList){return Promise.all(keyList.map(function(key){if(cacheWhitelist.indexOf(key)===-1){return caches.delete(key);}}));}));});self.addEventListener('fetch',function(event){if(event.request.url.split('/')[3]==='anime'){event.respondWith(async function(){event.waitUntil(caches.open(CACHE_NAME).then(function(cache){cache.match('/anime.html').then(function(isCached){if(!isCached){cache.add('/anime.html');}});}));return fetch('/anime.html').catch(()=>caches.match('/anime.html'));}());}else if(event.request.url.split('/')[3]==='series'){event.respondWith(async function(){event.waitUntil(caches.open(CACHE_NAME).then(function(cache){cache.match('/series.html').then(function(isCached){if(!isCached){cache.add('/series.html');}});}));return fetch('/series.html').catch(()=>caches.match('/series.html'));}());}else if(self.navigator.onLine===false&&event.request.mode==='navigate'){event.respondWith(async function(){return fetch(event.request).catch(()=>caches.match('/offline.html'));}());}else if(event.request.url.split('?')[0]===self.location.origin+'/'){event.respondWith(async function(){event.waitUntil(caches.open(CACHE_NAME).then(function(cache){cache.match('/neterr.html').then(function(isCached){if(!isCached){cache.add('/neterr.html');}});}));return fetch(event.request).catch(()=>caches.match('/neterr.html'));}());}});